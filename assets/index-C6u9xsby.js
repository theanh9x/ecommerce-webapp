(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function s(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(u){if(u.ep)return;u.ep=!0;const c=s(u);fetch(u.href,c)}})();var Pa={exports:{}},is={},Aa={exports:{}},he={};var ad;function np(){if(ad)return he;ad=1;var i=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),k=Symbol.iterator;function j(S){return S===null||typeof S!="object"?null:(S=k&&S[k]||S["@@iterator"],typeof S=="function"?S:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,C={};function b(S,D,ce){this.props=S,this.context=D,this.refs=C,this.updater=ce||T}b.prototype.isReactComponent={},b.prototype.setState=function(S,D){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,D,"setState")},b.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function P(){}P.prototype=b.prototype;function B(S,D,ce){this.props=S,this.context=D,this.refs=C,this.updater=ce||T}var z=B.prototype=new P;z.constructor=B,R(z,b.prototype),z.isPureReactComponent=!0;var q=Array.isArray,ae=Object.prototype.hasOwnProperty,I={current:null},J={key:!0,ref:!0,__self:!0,__source:!0};function Se(S,D,ce){var fe,ge={},ye=null,_e=null;if(D!=null)for(fe in D.ref!==void 0&&(_e=D.ref),D.key!==void 0&&(ye=""+D.key),D)ae.call(D,fe)&&!J.hasOwnProperty(fe)&&(ge[fe]=D[fe]);var we=arguments.length-2;if(we===1)ge.children=ce;else if(1<we){for(var Te=Array(we),ct=0;ct<we;ct++)Te[ct]=arguments[ct+2];ge.children=Te}if(S&&S.defaultProps)for(fe in we=S.defaultProps,we)ge[fe]===void 0&&(ge[fe]=we[fe]);return{$$typeof:i,type:S,key:ye,ref:_e,props:ge,_owner:I.current}}function A(S,D){return{$$typeof:i,type:S.type,key:D,ref:S.ref,props:S.props,_owner:S._owner}}function ie(S){return typeof S=="object"&&S!==null&&S.$$typeof===i}function ue(S){var D={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(ce){return D[ce]})}var de=/\/+/g;function je(S,D){return typeof S=="object"&&S!==null&&S.key!=null?ue(""+S.key):D.toString(36)}function ze(S,D,ce,fe,ge){var ye=typeof S;(ye==="undefined"||ye==="boolean")&&(S=null);var _e=!1;if(S===null)_e=!0;else switch(ye){case"string":case"number":_e=!0;break;case"object":switch(S.$$typeof){case i:case r:_e=!0}}if(_e)return _e=S,ge=ge(_e),S=fe===""?"."+je(_e,0):fe,q(ge)?(ce="",S!=null&&(ce=S.replace(de,"$&/")+"/"),ze(ge,D,ce,"",function(ct){return ct})):ge!=null&&(ie(ge)&&(ge=A(ge,ce+(!ge.key||_e&&_e.key===ge.key?"":(""+ge.key).replace(de,"$&/")+"/")+S)),D.push(ge)),1;if(_e=0,fe=fe===""?".":fe+":",q(S))for(var we=0;we<S.length;we++){ye=S[we];var Te=fe+je(ye,we);_e+=ze(ye,D,ce,Te,ge)}else if(Te=j(S),typeof Te=="function")for(S=Te.call(S),we=0;!(ye=S.next()).done;)ye=ye.value,Te=fe+je(ye,we++),_e+=ze(ye,D,ce,Te,ge);else if(ye==="object")throw D=String(S),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return _e}function Ye(S,D,ce){if(S==null)return S;var fe=[],ge=0;return ze(S,fe,"","",function(ye){return D.call(ce,ye,ge++)}),fe}function le(S){if(S._status===-1){var D=S._result;D=D(),D.then(function(ce){(S._status===0||S._status===-1)&&(S._status=1,S._result=ce)},function(ce){(S._status===0||S._status===-1)&&(S._status=2,S._result=ce)}),S._status===-1&&(S._status=0,S._result=D)}if(S._status===1)return S._result.default;throw S._result}var pe={current:null},F={transition:null},se={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:F,ReactCurrentOwner:I};function H(){throw Error("act(...) is not supported in production builds of React.")}return he.Children={map:Ye,forEach:function(S,D,ce){Ye(S,function(){D.apply(this,arguments)},ce)},count:function(S){var D=0;return Ye(S,function(){D++}),D},toArray:function(S){return Ye(S,function(D){return D})||[]},only:function(S){if(!ie(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},he.Component=b,he.Fragment=s,he.Profiler=u,he.PureComponent=B,he.StrictMode=a,he.Suspense=p,he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,he.act=H,he.cloneElement=function(S,D,ce){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var fe=R({},S.props),ge=S.key,ye=S.ref,_e=S._owner;if(D!=null){if(D.ref!==void 0&&(ye=D.ref,_e=I.current),D.key!==void 0&&(ge=""+D.key),S.type&&S.type.defaultProps)var we=S.type.defaultProps;for(Te in D)ae.call(D,Te)&&!J.hasOwnProperty(Te)&&(fe[Te]=D[Te]===void 0&&we!==void 0?we[Te]:D[Te])}var Te=arguments.length-2;if(Te===1)fe.children=ce;else if(1<Te){we=Array(Te);for(var ct=0;ct<Te;ct++)we[ct]=arguments[ct+2];fe.children=we}return{$$typeof:i,type:S.type,key:ge,ref:ye,props:fe,_owner:_e}},he.createContext=function(S){return S={$$typeof:f,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:c,_context:S},S.Consumer=S},he.createElement=Se,he.createFactory=function(S){var D=Se.bind(null,S);return D.type=S,D},he.createRef=function(){return{current:null}},he.forwardRef=function(S){return{$$typeof:g,render:S}},he.isValidElement=ie,he.lazy=function(S){return{$$typeof:w,_payload:{_status:-1,_result:S},_init:le}},he.memo=function(S,D){return{$$typeof:y,type:S,compare:D===void 0?null:D}},he.startTransition=function(S){var D=F.transition;F.transition={};try{S()}finally{F.transition=D}},he.unstable_act=H,he.useCallback=function(S,D){return pe.current.useCallback(S,D)},he.useContext=function(S){return pe.current.useContext(S)},he.useDebugValue=function(){},he.useDeferredValue=function(S){return pe.current.useDeferredValue(S)},he.useEffect=function(S,D){return pe.current.useEffect(S,D)},he.useId=function(){return pe.current.useId()},he.useImperativeHandle=function(S,D,ce){return pe.current.useImperativeHandle(S,D,ce)},he.useInsertionEffect=function(S,D){return pe.current.useInsertionEffect(S,D)},he.useLayoutEffect=function(S,D){return pe.current.useLayoutEffect(S,D)},he.useMemo=function(S,D){return pe.current.useMemo(S,D)},he.useReducer=function(S,D,ce){return pe.current.useReducer(S,D,ce)},he.useRef=function(S){return pe.current.useRef(S)},he.useState=function(S){return pe.current.useState(S)},he.useSyncExternalStore=function(S,D,ce){return pe.current.useSyncExternalStore(S,D,ce)},he.useTransition=function(){return pe.current.useTransition()},he.version="18.3.1",he}var ld;function sl(){return ld||(ld=1,Aa.exports=np()),Aa.exports}var ud;function sp(){if(ud)return is;ud=1;var i=sl(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(g,p,y){var w,k={},j=null,T=null;y!==void 0&&(j=""+y),p.key!==void 0&&(j=""+p.key),p.ref!==void 0&&(T=p.ref);for(w in p)a.call(p,w)&&!c.hasOwnProperty(w)&&(k[w]=p[w]);if(g&&g.defaultProps)for(w in p=g.defaultProps,p)k[w]===void 0&&(k[w]=p[w]);return{$$typeof:r,type:g,key:j,ref:T,props:k,_owner:u.current}}return is.Fragment=s,is.jsx=f,is.jsxs=f,is}var cd;function ip(){return cd||(cd=1,Pa.exports=sp()),Pa.exports}var d=ip(),Y=sl(),Ei={},Ia={exports:{}},ut={},$a={exports:{}},Da={};var dd;function op(){return dd||(dd=1,(function(i){function r(F,se){var H=F.length;F.push(se);e:for(;0<H;){var S=H-1>>>1,D=F[S];if(0<u(D,se))F[S]=se,F[H]=D,H=S;else break e}}function s(F){return F.length===0?null:F[0]}function a(F){if(F.length===0)return null;var se=F[0],H=F.pop();if(H!==se){F[0]=H;e:for(var S=0,D=F.length,ce=D>>>1;S<ce;){var fe=2*(S+1)-1,ge=F[fe],ye=fe+1,_e=F[ye];if(0>u(ge,H))ye<D&&0>u(_e,ge)?(F[S]=_e,F[ye]=H,S=ye):(F[S]=ge,F[fe]=H,S=fe);else if(ye<D&&0>u(_e,H))F[S]=_e,F[ye]=H,S=ye;else break e}}return se}function u(F,se){var H=F.sortIndex-se.sortIndex;return H!==0?H:F.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();i.unstable_now=function(){return f.now()-g}}var p=[],y=[],w=1,k=null,j=3,T=!1,R=!1,C=!1,b=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(F){for(var se=s(y);se!==null;){if(se.callback===null)a(y);else if(se.startTime<=F)a(y),se.sortIndex=se.expirationTime,r(p,se);else break;se=s(y)}}function q(F){if(C=!1,z(F),!R)if(s(p)!==null)R=!0,le(ae);else{var se=s(y);se!==null&&pe(q,se.startTime-F)}}function ae(F,se){R=!1,C&&(C=!1,P(Se),Se=-1),T=!0;var H=j;try{for(z(se),k=s(p);k!==null&&(!(k.expirationTime>se)||F&&!ue());){var S=k.callback;if(typeof S=="function"){k.callback=null,j=k.priorityLevel;var D=S(k.expirationTime<=se);se=i.unstable_now(),typeof D=="function"?k.callback=D:k===s(p)&&a(p),z(se)}else a(p);k=s(p)}if(k!==null)var ce=!0;else{var fe=s(y);fe!==null&&pe(q,fe.startTime-se),ce=!1}return ce}finally{k=null,j=H,T=!1}}var I=!1,J=null,Se=-1,A=5,ie=-1;function ue(){return!(i.unstable_now()-ie<A)}function de(){if(J!==null){var F=i.unstable_now();ie=F;var se=!0;try{se=J(!0,F)}finally{se?je():(I=!1,J=null)}}else I=!1}var je;if(typeof B=="function")je=function(){B(de)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,Ye=ze.port2;ze.port1.onmessage=de,je=function(){Ye.postMessage(null)}}else je=function(){b(de,0)};function le(F){J=F,I||(I=!0,je())}function pe(F,se){Se=b(function(){F(i.unstable_now())},se)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_continueExecution=function(){R||T||(R=!0,le(ae))},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return j},i.unstable_getFirstCallbackNode=function(){return s(p)},i.unstable_next=function(F){switch(j){case 1:case 2:case 3:var se=3;break;default:se=j}var H=j;j=se;try{return F()}finally{j=H}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(F,se){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=j;j=F;try{return se()}finally{j=H}},i.unstable_scheduleCallback=function(F,se,H){var S=i.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?S+H:S):H=S,F){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=H+D,F={id:w++,callback:se,priorityLevel:F,startTime:H,expirationTime:D,sortIndex:-1},H>S?(F.sortIndex=H,r(y,F),s(p)===null&&F===s(y)&&(C?(P(Se),Se=-1):C=!0,pe(q,H-S))):(F.sortIndex=D,r(p,F),R||T||(R=!0,le(ae))),F},i.unstable_shouldYield=ue,i.unstable_wrapCallback=function(F){var se=j;return function(){var H=j;j=se;try{return F.apply(this,arguments)}finally{j=H}}}})(Da)),Da}var hd;function ap(){return hd||(hd=1,$a.exports=op()),$a.exports}var fd;function lp(){if(fd)return ut;fd=1;var i=sl(),r=ap();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function c(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(u[e]=t,e=0;e<t.length;e++)a.add(t[e])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},k={};function j(e){return p.call(k,e)?!0:p.call(w,e)?!1:y.test(e)?k[e]=!0:(w[e]=!0,!1)}function T(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function R(e,t,n,o){if(t===null||typeof t>"u"||T(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function C(e,t,n,o,l,h,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=m}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){b[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];b[t]=new C(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){b[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){b[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){b[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){b[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){b[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){b[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){b[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function B(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(P,B);b[t]=new C(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(P,B);b[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(P,B);b[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){b[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),b.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){b[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function z(e,t,n,o){var l=b.hasOwnProperty(t)?b[t]:null;(l!==null?l.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(R(t,n,l,o)&&(n=null),o||l===null?j(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,o=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var q=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),I=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),Se=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),ue=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),ze=Symbol.for("react.suspense_list"),Ye=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),F=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var H=Object.assign,S;function D(e){if(S===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);S=t&&t[1]||""}return`
`+S+e}var ce=!1;function fe(e,t){if(!e||ce)return"";ce=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(O){var o=O}Reflect.construct(e,[],t)}else{try{t.call()}catch(O){o=O}e.call(t.prototype)}else{try{throw Error()}catch(O){o=O}e()}}catch(O){if(O&&o&&typeof O.stack=="string"){for(var l=O.stack.split(`
`),h=o.stack.split(`
`),m=l.length-1,v=h.length-1;1<=m&&0<=v&&l[m]!==h[v];)v--;for(;1<=m&&0<=v;m--,v--)if(l[m]!==h[v]){if(m!==1||v!==1)do if(m--,v--,0>v||l[m]!==h[v]){var x=`
`+l[m].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=m&&0<=v);break}}}finally{ce=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function ge(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=fe(e.type,!1),e;case 11:return e=fe(e.type.render,!1),e;case 1:return e=fe(e.type,!0),e;default:return""}}function ye(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case J:return"Fragment";case I:return"Portal";case A:return"Profiler";case Se:return"StrictMode";case je:return"Suspense";case ze:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ue:return(e.displayName||"Context")+".Consumer";case ie:return(e._context.displayName||"Context")+".Provider";case de:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ye:return t=e.displayName||null,t!==null?t:ye(e.type)||"Memo";case le:t=e._payload,e=e._init;try{return ye(e(t))}catch{}}return null}function _e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(t);case 8:return t===Se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function we(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Te(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ct(e){var t=Te(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(m){o=""+m,h.call(this,m)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(m){o=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gs(e){e._valueTracker||(e._valueTracker=ct(e))}function fl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=Te(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function ys(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ui(e,t){var n=t.checked;return H({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function pl(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=we(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ml(e,t){t=t.checked,t!=null&&z(e,"checked",t,!1)}function zi(e,t){ml(e,t);var n=we(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mi(e,t.type,n):t.hasOwnProperty("defaultValue")&&Mi(e,t.type,we(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gl(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Mi(e,t,n){(t!=="number"||ys(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var xn=Array.isArray;function Dr(e,t,n,o){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&o&&(e[n].defaultSelected=!0)}else{for(n=""+we(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,o&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Bi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return H({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yl(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(s(92));if(xn(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:we(n)}}function vl(e,t){var n=we(t.value),o=we(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function wl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xl(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xl(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vs,_l=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vs=vs||document.createElement("div"),vs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _n(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oh=["Webkit","ms","Moz","O"];Object.keys(bn).forEach(function(e){oh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bn[t]=bn[e]})});function bl(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||bn.hasOwnProperty(e)&&bn[e]?(""+t).trim():t+"px"}function kl(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,l=bl(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,l):e[n]=l}}var ah=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qi(e,t){if(t){if(ah[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function Vi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wi=null;function Hi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ki=null,Lr=null,Ur=null;function Sl(e){if(e=Vn(e)){if(typeof Ki!="function")throw Error(s(280));var t=e.stateNode;t&&(t=Bs(t),Ki(e.stateNode,e.type,t))}}function jl(e){Lr?Ur?Ur.push(e):Ur=[e]:Lr=e}function El(){if(Lr){var e=Lr,t=Ur;if(Ur=Lr=null,Sl(e),t)for(e=0;e<t.length;e++)Sl(t[e])}}function Nl(e,t){return e(t)}function Tl(){}var Gi=!1;function Cl(e,t,n){if(Gi)return e(t,n);Gi=!0;try{return Nl(e,t,n)}finally{Gi=!1,(Lr!==null||Ur!==null)&&(Tl(),El())}}function kn(e,t){var n=e.stateNode;if(n===null)return null;var o=Bs(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var Ji=!1;if(g)try{var Sn={};Object.defineProperty(Sn,"passive",{get:function(){Ji=!0}}),window.addEventListener("test",Sn,Sn),window.removeEventListener("test",Sn,Sn)}catch{Ji=!1}function lh(e,t,n,o,l,h,m,v,x){var O=Array.prototype.slice.call(arguments,3);try{t.apply(n,O)}catch(L){this.onError(L)}}var jn=!1,ws=null,xs=!1,Qi=null,uh={onError:function(e){jn=!0,ws=e}};function ch(e,t,n,o,l,h,m,v,x){jn=!1,ws=null,lh.apply(uh,arguments)}function dh(e,t,n,o,l,h,m,v,x){if(ch.apply(this,arguments),jn){if(jn){var O=ws;jn=!1,ws=null}else throw Error(s(198));xs||(xs=!0,Qi=O)}}function yr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ol(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rl(e){if(yr(e)!==e)throw Error(s(188))}function hh(e){var t=e.alternate;if(!t){if(t=yr(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,o=t;;){var l=n.return;if(l===null)break;var h=l.alternate;if(h===null){if(o=l.return,o!==null){n=o;continue}break}if(l.child===h.child){for(h=l.child;h;){if(h===n)return Rl(l),e;if(h===o)return Rl(l),t;h=h.sibling}throw Error(s(188))}if(n.return!==o.return)n=l,o=h;else{for(var m=!1,v=l.child;v;){if(v===n){m=!0,n=l,o=h;break}if(v===o){m=!0,o=l,n=h;break}v=v.sibling}if(!m){for(v=h.child;v;){if(v===n){m=!0,n=h,o=l;break}if(v===o){m=!0,o=h,n=l;break}v=v.sibling}if(!m)throw Error(s(189))}}if(n.alternate!==o)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function Pl(e){return e=hh(e),e!==null?Al(e):null}function Al(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Al(e);if(t!==null)return t;e=e.sibling}return null}var Il=r.unstable_scheduleCallback,$l=r.unstable_cancelCallback,fh=r.unstable_shouldYield,ph=r.unstable_requestPaint,$e=r.unstable_now,mh=r.unstable_getCurrentPriorityLevel,Yi=r.unstable_ImmediatePriority,Dl=r.unstable_UserBlockingPriority,_s=r.unstable_NormalPriority,gh=r.unstable_LowPriority,Ll=r.unstable_IdlePriority,bs=null,It=null;function yh(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(bs,e,void 0,(e.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:xh,vh=Math.log,wh=Math.LN2;function xh(e){return e>>>=0,e===0?32:31-(vh(e)/wh|0)|0}var ks=64,Ss=4194304;function En(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function js(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,l=e.suspendedLanes,h=e.pingedLanes,m=n&268435455;if(m!==0){var v=m&~l;v!==0?o=En(v):(h&=m,h!==0&&(o=En(h)))}else m=n&~l,m!==0?o=En(m):h!==0&&(o=En(h));if(o===0)return 0;if(t!==0&&t!==o&&(t&l)===0&&(l=o&-o,h=t&-t,l>=h||l===16&&(h&4194240)!==0))return t;if((o&4)!==0&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-St(t),l=1<<n,o|=e[n],t&=~l;return o}function _h(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bh(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,l=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-St(h),v=1<<m,x=l[m];x===-1?((v&n)===0||(v&o)!==0)&&(l[m]=_h(v,t)):x<=t&&(e.expiredLanes|=v),h&=~v}}function Xi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ul(){var e=ks;return ks<<=1,(ks&4194240)===0&&(ks=64),e}function Zi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nn(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-St(t),e[t]=n}function kh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-St(n),h=1<<l;t[l]=0,o[l]=-1,e[l]=-1,n&=~h}}function eo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-St(n),l=1<<o;l&t|e[o]&t&&(e[o]|=t),n&=~l}}var xe=0;function zl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ml,to,Bl,Fl,ql,ro=!1,Es=[],Qt=null,Yt=null,Xt=null,Tn=new Map,Cn=new Map,Zt=[],Sh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vl(e,t){switch(e){case"focusin":case"focusout":Qt=null;break;case"dragenter":case"dragleave":Yt=null;break;case"mouseover":case"mouseout":Xt=null;break;case"pointerover":case"pointerout":Tn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cn.delete(t.pointerId)}}function On(e,t,n,o,l,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:h,targetContainers:[l]},t!==null&&(t=Vn(t),t!==null&&to(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function jh(e,t,n,o,l){switch(t){case"focusin":return Qt=On(Qt,e,t,n,o,l),!0;case"dragenter":return Yt=On(Yt,e,t,n,o,l),!0;case"mouseover":return Xt=On(Xt,e,t,n,o,l),!0;case"pointerover":var h=l.pointerId;return Tn.set(h,On(Tn.get(h)||null,e,t,n,o,l)),!0;case"gotpointercapture":return h=l.pointerId,Cn.set(h,On(Cn.get(h)||null,e,t,n,o,l)),!0}return!1}function Wl(e){var t=vr(e.target);if(t!==null){var n=yr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ol(n),t!==null){e.blockedOn=t,ql(e.priority,function(){Bl(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ns(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=so(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);Wi=o,n.target.dispatchEvent(o),Wi=null}else return t=Vn(n),t!==null&&to(t),e.blockedOn=n,!1;t.shift()}return!0}function Hl(e,t,n){Ns(e)&&n.delete(t)}function Eh(){ro=!1,Qt!==null&&Ns(Qt)&&(Qt=null),Yt!==null&&Ns(Yt)&&(Yt=null),Xt!==null&&Ns(Xt)&&(Xt=null),Tn.forEach(Hl),Cn.forEach(Hl)}function Rn(e,t){e.blockedOn===t&&(e.blockedOn=null,ro||(ro=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Eh)))}function Pn(e){function t(l){return Rn(l,e)}if(0<Es.length){Rn(Es[0],e);for(var n=1;n<Es.length;n++){var o=Es[n];o.blockedOn===e&&(o.blockedOn=null)}}for(Qt!==null&&Rn(Qt,e),Yt!==null&&Rn(Yt,e),Xt!==null&&Rn(Xt,e),Tn.forEach(t),Cn.forEach(t),n=0;n<Zt.length;n++)o=Zt[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<Zt.length&&(n=Zt[0],n.blockedOn===null);)Wl(n),n.blockedOn===null&&Zt.shift()}var zr=q.ReactCurrentBatchConfig,Ts=!0;function Nh(e,t,n,o){var l=xe,h=zr.transition;zr.transition=null;try{xe=1,no(e,t,n,o)}finally{xe=l,zr.transition=h}}function Th(e,t,n,o){var l=xe,h=zr.transition;zr.transition=null;try{xe=4,no(e,t,n,o)}finally{xe=l,zr.transition=h}}function no(e,t,n,o){if(Ts){var l=so(e,t,n,o);if(l===null)bo(e,t,o,Cs,n),Vl(e,o);else if(jh(l,e,t,n,o))o.stopPropagation();else if(Vl(e,o),t&4&&-1<Sh.indexOf(e)){for(;l!==null;){var h=Vn(l);if(h!==null&&Ml(h),h=so(e,t,n,o),h===null&&bo(e,t,o,Cs,n),h===l)break;l=h}l!==null&&o.stopPropagation()}else bo(e,t,o,null,n)}}var Cs=null;function so(e,t,n,o){if(Cs=null,e=Hi(o),e=vr(e),e!==null)if(t=yr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ol(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Cs=e,null}function Kl(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mh()){case Yi:return 1;case Dl:return 4;case _s:case gh:return 16;case Ll:return 536870912;default:return 16}default:return 16}}var er=null,io=null,Os=null;function Gl(){if(Os)return Os;var e,t=io,n=t.length,o,l="value"in er?er.value:er.textContent,h=l.length;for(e=0;e<n&&t[e]===l[e];e++);var m=n-e;for(o=1;o<=m&&t[n-o]===l[h-o];o++);return Os=l.slice(e,1<o?1-o:void 0)}function Rs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ps(){return!0}function Jl(){return!1}function dt(e){function t(n,o,l,h,m){this._reactName=n,this._targetInst=l,this.type=o,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(n=e[v],this[v]=n?n(h):h[v]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ps:Jl,this.isPropagationStopped=Jl,this}return H(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),t}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oo=dt(Mr),An=H({},Mr,{view:0,detail:0}),Ch=dt(An),ao,lo,In,As=H({},An,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:co,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==In&&(In&&e.type==="mousemove"?(ao=e.screenX-In.screenX,lo=e.screenY-In.screenY):lo=ao=0,In=e),ao)},movementY:function(e){return"movementY"in e?e.movementY:lo}}),Ql=dt(As),Oh=H({},As,{dataTransfer:0}),Rh=dt(Oh),Ph=H({},An,{relatedTarget:0}),uo=dt(Ph),Ah=H({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ih=dt(Ah),$h=H({},Mr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dh=dt($h),Lh=H({},Mr,{data:0}),Yl=dt(Lh),Uh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mh[e])?!!t[e]:!1}function co(){return Bh}var Fh=H({},An,{key:function(e){if(e.key){var t=Uh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:co,charCode:function(e){return e.type==="keypress"?Rs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qh=dt(Fh),Vh=H({},As,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xl=dt(Vh),Wh=H({},An,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:co}),Hh=dt(Wh),Kh=H({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gh=dt(Kh),Jh=H({},As,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qh=dt(Jh),Yh=[9,13,27,32],ho=g&&"CompositionEvent"in window,$n=null;g&&"documentMode"in document&&($n=document.documentMode);var Xh=g&&"TextEvent"in window&&!$n,Zl=g&&(!ho||$n&&8<$n&&11>=$n),eu=" ",tu=!1;function ru(e,t){switch(e){case"keyup":return Yh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Br=!1;function Zh(e,t){switch(e){case"compositionend":return nu(t);case"keypress":return t.which!==32?null:(tu=!0,eu);case"textInput":return e=t.data,e===eu&&tu?null:e;default:return null}}function ef(e,t){if(Br)return e==="compositionend"||!ho&&ru(e,t)?(e=Gl(),Os=io=er=null,Br=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zl&&t.locale!=="ko"?null:t.data;default:return null}}var tf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function su(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tf[e.type]:t==="textarea"}function iu(e,t,n,o){jl(o),t=Us(t,"onChange"),0<t.length&&(n=new oo("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Dn=null,Ln=null;function rf(e){ku(e,0)}function Is(e){var t=Hr(e);if(fl(t))return e}function nf(e,t){if(e==="change")return t}var ou=!1;if(g){var fo;if(g){var po="oninput"in document;if(!po){var au=document.createElement("div");au.setAttribute("oninput","return;"),po=typeof au.oninput=="function"}fo=po}else fo=!1;ou=fo&&(!document.documentMode||9<document.documentMode)}function lu(){Dn&&(Dn.detachEvent("onpropertychange",uu),Ln=Dn=null)}function uu(e){if(e.propertyName==="value"&&Is(Ln)){var t=[];iu(t,Ln,e,Hi(e)),Cl(rf,t)}}function sf(e,t,n){e==="focusin"?(lu(),Dn=t,Ln=n,Dn.attachEvent("onpropertychange",uu)):e==="focusout"&&lu()}function of(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Is(Ln)}function af(e,t){if(e==="click")return Is(t)}function lf(e,t){if(e==="input"||e==="change")return Is(t)}function uf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:uf;function Un(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var l=n[o];if(!p.call(t,l)||!jt(e[l],t[l]))return!1}return!0}function cu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function du(e,t){var n=cu(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cu(n)}}function hu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fu(){for(var e=window,t=ys();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ys(e.document)}return t}function mo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cf(e){var t=fu(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hu(n.ownerDocument.documentElement,n)){if(o!==null&&mo(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,h=Math.min(o.start,l);o=o.end===void 0?h:Math.min(o.end,l),!e.extend&&h>o&&(l=o,o=h,h=l),l=du(n,h);var m=du(n,o);l&&m&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),h>o?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var df=g&&"documentMode"in document&&11>=document.documentMode,Fr=null,go=null,zn=null,yo=!1;function pu(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yo||Fr==null||Fr!==ys(o)||(o=Fr,"selectionStart"in o&&mo(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),zn&&Un(zn,o)||(zn=o,o=Us(go,"onSelect"),0<o.length&&(t=new oo("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=Fr)))}function $s(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qr={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionend:$s("Transition","TransitionEnd")},vo={},mu={};g&&(mu=document.createElement("div").style,"AnimationEvent"in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),"TransitionEvent"in window||delete qr.transitionend.transition);function Ds(e){if(vo[e])return vo[e];if(!qr[e])return e;var t=qr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in mu)return vo[e]=t[n];return e}var gu=Ds("animationend"),yu=Ds("animationiteration"),vu=Ds("animationstart"),wu=Ds("transitionend"),xu=new Map,_u="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,t){xu.set(e,t),c(t,[e])}for(var wo=0;wo<_u.length;wo++){var xo=_u[wo],hf=xo.toLowerCase(),ff=xo[0].toUpperCase()+xo.slice(1);tr(hf,"on"+ff)}tr(gu,"onAnimationEnd"),tr(yu,"onAnimationIteration"),tr(vu,"onAnimationStart"),tr("dblclick","onDoubleClick"),tr("focusin","onFocus"),tr("focusout","onBlur"),tr(wu,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mn));function bu(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,dh(o,t,void 0,e),e.currentTarget=null}function ku(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],l=o.event;o=o.listeners;e:{var h=void 0;if(t)for(var m=o.length-1;0<=m;m--){var v=o[m],x=v.instance,O=v.currentTarget;if(v=v.listener,x!==h&&l.isPropagationStopped())break e;bu(l,v,O),h=x}else for(m=0;m<o.length;m++){if(v=o[m],x=v.instance,O=v.currentTarget,v=v.listener,x!==h&&l.isPropagationStopped())break e;bu(l,v,O),h=x}}}if(xs)throw e=Qi,xs=!1,Qi=null,e}function Ee(e,t){var n=t[To];n===void 0&&(n=t[To]=new Set);var o=e+"__bubble";n.has(o)||(Su(t,e,2,!1),n.add(o))}function _o(e,t,n){var o=0;t&&(o|=4),Su(n,e,o,t)}var Ls="_reactListening"+Math.random().toString(36).slice(2);function Bn(e){if(!e[Ls]){e[Ls]=!0,a.forEach(function(n){n!=="selectionchange"&&(pf.has(n)||_o(n,!1,e),_o(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ls]||(t[Ls]=!0,_o("selectionchange",!1,t))}}function Su(e,t,n,o){switch(Kl(t)){case 1:var l=Nh;break;case 4:l=Th;break;default:l=no}n=l.bind(null,t,n,e),l=void 0,!Ji||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),o?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function bo(e,t,n,o,l){var h=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var m=o.tag;if(m===3||m===4){var v=o.stateNode.containerInfo;if(v===l||v.nodeType===8&&v.parentNode===l)break;if(m===4)for(m=o.return;m!==null;){var x=m.tag;if((x===3||x===4)&&(x=m.stateNode.containerInfo,x===l||x.nodeType===8&&x.parentNode===l))return;m=m.return}for(;v!==null;){if(m=vr(v),m===null)return;if(x=m.tag,x===5||x===6){o=h=m;continue e}v=v.parentNode}}o=o.return}Cl(function(){var O=h,L=Hi(n),U=[];e:{var $=xu.get(e);if($!==void 0){var V=oo,K=e;switch(e){case"keypress":if(Rs(n)===0)break e;case"keydown":case"keyup":V=qh;break;case"focusin":K="focus",V=uo;break;case"focusout":K="blur",V=uo;break;case"beforeblur":case"afterblur":V=uo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Hh;break;case gu:case yu:case vu:V=Ih;break;case wu:V=Gh;break;case"scroll":V=Ch;break;case"wheel":V=Qh;break;case"copy":case"cut":case"paste":V=Dh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Xl}var G=(t&4)!==0,De=!G&&e==="scroll",E=G?$!==null?$+"Capture":null:$;G=[];for(var _=O,N;_!==null;){N=_;var M=N.stateNode;if(N.tag===5&&M!==null&&(N=M,E!==null&&(M=kn(_,E),M!=null&&G.push(Fn(_,M,N)))),De)break;_=_.return}0<G.length&&($=new V($,K,null,n,L),U.push({event:$,listeners:G}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",$&&n!==Wi&&(K=n.relatedTarget||n.fromElement)&&(vr(K)||K[zt]))break e;if((V||$)&&($=L.window===L?L:($=L.ownerDocument)?$.defaultView||$.parentWindow:window,V?(K=n.relatedTarget||n.toElement,V=O,K=K?vr(K):null,K!==null&&(De=yr(K),K!==De||K.tag!==5&&K.tag!==6)&&(K=null)):(V=null,K=O),V!==K)){if(G=Ql,M="onMouseLeave",E="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(G=Xl,M="onPointerLeave",E="onPointerEnter",_="pointer"),De=V==null?$:Hr(V),N=K==null?$:Hr(K),$=new G(M,_+"leave",V,n,L),$.target=De,$.relatedTarget=N,M=null,vr(L)===O&&(G=new G(E,_+"enter",K,n,L),G.target=N,G.relatedTarget=De,M=G),De=M,V&&K)t:{for(G=V,E=K,_=0,N=G;N;N=Vr(N))_++;for(N=0,M=E;M;M=Vr(M))N++;for(;0<_-N;)G=Vr(G),_--;for(;0<N-_;)E=Vr(E),N--;for(;_--;){if(G===E||E!==null&&G===E.alternate)break t;G=Vr(G),E=Vr(E)}G=null}else G=null;V!==null&&ju(U,$,V,G,!1),K!==null&&De!==null&&ju(U,De,K,G,!0)}}e:{if($=O?Hr(O):window,V=$.nodeName&&$.nodeName.toLowerCase(),V==="select"||V==="input"&&$.type==="file")var Q=nf;else if(su($))if(ou)Q=lf;else{Q=of;var ee=sf}else(V=$.nodeName)&&V.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(Q=af);if(Q&&(Q=Q(e,O))){iu(U,Q,n,L);break e}ee&&ee(e,$,O),e==="focusout"&&(ee=$._wrapperState)&&ee.controlled&&$.type==="number"&&Mi($,"number",$.value)}switch(ee=O?Hr(O):window,e){case"focusin":(su(ee)||ee.contentEditable==="true")&&(Fr=ee,go=O,zn=null);break;case"focusout":zn=go=Fr=null;break;case"mousedown":yo=!0;break;case"contextmenu":case"mouseup":case"dragend":yo=!1,pu(U,n,L);break;case"selectionchange":if(df)break;case"keydown":case"keyup":pu(U,n,L)}var te;if(ho)e:{switch(e){case"compositionstart":var oe="onCompositionStart";break e;case"compositionend":oe="onCompositionEnd";break e;case"compositionupdate":oe="onCompositionUpdate";break e}oe=void 0}else Br?ru(e,n)&&(oe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(oe="onCompositionStart");oe&&(Zl&&n.locale!=="ko"&&(Br||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&Br&&(te=Gl()):(er=L,io="value"in er?er.value:er.textContent,Br=!0)),ee=Us(O,oe),0<ee.length&&(oe=new Yl(oe,e,null,n,L),U.push({event:oe,listeners:ee}),te?oe.data=te:(te=nu(n),te!==null&&(oe.data=te)))),(te=Xh?Zh(e,n):ef(e,n))&&(O=Us(O,"onBeforeInput"),0<O.length&&(L=new Yl("onBeforeInput","beforeinput",null,n,L),U.push({event:L,listeners:O}),L.data=te))}ku(U,t)})}function Fn(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Us(e,t){for(var n=t+"Capture",o=[];e!==null;){var l=e,h=l.stateNode;l.tag===5&&h!==null&&(l=h,h=kn(e,n),h!=null&&o.unshift(Fn(e,h,l)),h=kn(e,t),h!=null&&o.push(Fn(e,h,l))),e=e.return}return o}function Vr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ju(e,t,n,o,l){for(var h=t._reactName,m=[];n!==null&&n!==o;){var v=n,x=v.alternate,O=v.stateNode;if(x!==null&&x===o)break;v.tag===5&&O!==null&&(v=O,l?(x=kn(n,h),x!=null&&m.unshift(Fn(n,x,v))):l||(x=kn(n,h),x!=null&&m.push(Fn(n,x,v)))),n=n.return}m.length!==0&&e.push({event:t,listeners:m})}var mf=/\r\n?/g,gf=/\u0000|\uFFFD/g;function Eu(e){return(typeof e=="string"?e:""+e).replace(mf,`
`).replace(gf,"")}function zs(e,t,n){if(t=Eu(t),Eu(e)!==t&&n)throw Error(s(425))}function Ms(){}var ko=null,So=null;function jo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Eo=typeof setTimeout=="function"?setTimeout:void 0,yf=typeof clearTimeout=="function"?clearTimeout:void 0,Nu=typeof Promise=="function"?Promise:void 0,vf=typeof queueMicrotask=="function"?queueMicrotask:typeof Nu<"u"?function(e){return Nu.resolve(null).then(e).catch(wf)}:Eo;function wf(e){setTimeout(function(){throw e})}function No(e,t){var n=t,o=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(o===0){e.removeChild(l),Pn(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=l}while(n);Pn(t)}function rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wr=Math.random().toString(36).slice(2),$t="__reactFiber$"+Wr,qn="__reactProps$"+Wr,zt="__reactContainer$"+Wr,To="__reactEvents$"+Wr,xf="__reactListeners$"+Wr,_f="__reactHandles$"+Wr;function vr(e){var t=e[$t];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zt]||n[$t]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Tu(e);e!==null;){if(n=e[$t])return n;e=Tu(e)}return t}e=n,n=e.parentNode}return null}function Vn(e){return e=e[$t]||e[zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Bs(e){return e[qn]||null}var Co=[],Kr=-1;function nr(e){return{current:e}}function Ne(e){0>Kr||(e.current=Co[Kr],Co[Kr]=null,Kr--)}function be(e,t){Kr++,Co[Kr]=e.current,e.current=t}var sr={},Xe=nr(sr),st=nr(!1),wr=sr;function Gr(e,t){var n=e.type.contextTypes;if(!n)return sr;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var l={},h;for(h in n)l[h]=t[h];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function it(e){return e=e.childContextTypes,e!=null}function Fs(){Ne(st),Ne(Xe)}function Cu(e,t,n){if(Xe.current!==sr)throw Error(s(168));be(Xe,t),be(st,n)}function Ou(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var l in o)if(!(l in t))throw Error(s(108,_e(e)||"Unknown",l));return H({},n,o)}function qs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sr,wr=Xe.current,be(Xe,e),be(st,st.current),!0}function Ru(e,t,n){var o=e.stateNode;if(!o)throw Error(s(169));n?(e=Ou(e,t,wr),o.__reactInternalMemoizedMergedChildContext=e,Ne(st),Ne(Xe),be(Xe,e)):Ne(st),be(st,n)}var Mt=null,Vs=!1,Oo=!1;function Pu(e){Mt===null?Mt=[e]:Mt.push(e)}function bf(e){Vs=!0,Pu(e)}function ir(){if(!Oo&&Mt!==null){Oo=!0;var e=0,t=xe;try{var n=Mt;for(xe=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}Mt=null,Vs=!1}catch(l){throw Mt!==null&&(Mt=Mt.slice(e+1)),Il(Yi,ir),l}finally{xe=t,Oo=!1}}return null}var Jr=[],Qr=0,Ws=null,Hs=0,vt=[],wt=0,xr=null,Bt=1,Ft="";function _r(e,t){Jr[Qr++]=Hs,Jr[Qr++]=Ws,Ws=e,Hs=t}function Au(e,t,n){vt[wt++]=Bt,vt[wt++]=Ft,vt[wt++]=xr,xr=e;var o=Bt;e=Ft;var l=32-St(o)-1;o&=~(1<<l),n+=1;var h=32-St(t)+l;if(30<h){var m=l-l%5;h=(o&(1<<m)-1).toString(32),o>>=m,l-=m,Bt=1<<32-St(t)+l|n<<l|o,Ft=h+e}else Bt=1<<h|n<<l|o,Ft=e}function Ro(e){e.return!==null&&(_r(e,1),Au(e,1,0))}function Po(e){for(;e===Ws;)Ws=Jr[--Qr],Jr[Qr]=null,Hs=Jr[--Qr],Jr[Qr]=null;for(;e===xr;)xr=vt[--wt],vt[wt]=null,Ft=vt[--wt],vt[wt]=null,Bt=vt[--wt],vt[wt]=null}var ht=null,ft=null,Ce=!1,Et=null;function Iu(e,t){var n=kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function $u(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ht=e,ft=rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ht=e,ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=xr!==null?{id:Bt,overflow:Ft}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ht=e,ft=null,!0):!1;default:return!1}}function Ao(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Io(e){if(Ce){var t=ft;if(t){var n=t;if(!$u(e,t)){if(Ao(e))throw Error(s(418));t=rr(n.nextSibling);var o=ht;t&&$u(e,t)?Iu(o,n):(e.flags=e.flags&-4097|2,Ce=!1,ht=e)}}else{if(Ao(e))throw Error(s(418));e.flags=e.flags&-4097|2,Ce=!1,ht=e}}}function Du(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ht=e}function Ks(e){if(e!==ht)return!1;if(!Ce)return Du(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!jo(e.type,e.memoizedProps)),t&&(t=ft)){if(Ao(e))throw Lu(),Error(s(418));for(;t;)Iu(e,t),t=rr(t.nextSibling)}if(Du(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ft=rr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ft=null}}else ft=ht?rr(e.stateNode.nextSibling):null;return!0}function Lu(){for(var e=ft;e;)e=rr(e.nextSibling)}function Yr(){ft=ht=null,Ce=!1}function $o(e){Et===null?Et=[e]:Et.push(e)}var kf=q.ReactCurrentBatchConfig;function Wn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(s(309));var o=n.stateNode}if(!o)throw Error(s(147,e));var l=o,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(m){var v=l.refs;m===null?delete v[h]:v[h]=m},t._stringRef=h,t)}if(typeof e!="string")throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Uu(e){var t=e._init;return t(e._payload)}function zu(e){function t(E,_){if(e){var N=E.deletions;N===null?(E.deletions=[_],E.flags|=16):N.push(_)}}function n(E,_){if(!e)return null;for(;_!==null;)t(E,_),_=_.sibling;return null}function o(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function l(E,_){return E=fr(E,_),E.index=0,E.sibling=null,E}function h(E,_,N){return E.index=N,e?(N=E.alternate,N!==null?(N=N.index,N<_?(E.flags|=2,_):N):(E.flags|=2,_)):(E.flags|=1048576,_)}function m(E){return e&&E.alternate===null&&(E.flags|=2),E}function v(E,_,N,M){return _===null||_.tag!==6?(_=Ea(N,E.mode,M),_.return=E,_):(_=l(_,N),_.return=E,_)}function x(E,_,N,M){var Q=N.type;return Q===J?L(E,_,N.props.children,M,N.key):_!==null&&(_.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===le&&Uu(Q)===_.type)?(M=l(_,N.props),M.ref=Wn(E,_,N),M.return=E,M):(M=vi(N.type,N.key,N.props,null,E.mode,M),M.ref=Wn(E,_,N),M.return=E,M)}function O(E,_,N,M){return _===null||_.tag!==4||_.stateNode.containerInfo!==N.containerInfo||_.stateNode.implementation!==N.implementation?(_=Na(N,E.mode,M),_.return=E,_):(_=l(_,N.children||[]),_.return=E,_)}function L(E,_,N,M,Q){return _===null||_.tag!==7?(_=Cr(N,E.mode,M,Q),_.return=E,_):(_=l(_,N),_.return=E,_)}function U(E,_,N){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ea(""+_,E.mode,N),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ae:return N=vi(_.type,_.key,_.props,null,E.mode,N),N.ref=Wn(E,null,_),N.return=E,N;case I:return _=Na(_,E.mode,N),_.return=E,_;case le:var M=_._init;return U(E,M(_._payload),N)}if(xn(_)||se(_))return _=Cr(_,E.mode,N,null),_.return=E,_;Gs(E,_)}return null}function $(E,_,N,M){var Q=_!==null?_.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return Q!==null?null:v(E,_,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ae:return N.key===Q?x(E,_,N,M):null;case I:return N.key===Q?O(E,_,N,M):null;case le:return Q=N._init,$(E,_,Q(N._payload),M)}if(xn(N)||se(N))return Q!==null?null:L(E,_,N,M,null);Gs(E,N)}return null}function V(E,_,N,M,Q){if(typeof M=="string"&&M!==""||typeof M=="number")return E=E.get(N)||null,v(_,E,""+M,Q);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ae:return E=E.get(M.key===null?N:M.key)||null,x(_,E,M,Q);case I:return E=E.get(M.key===null?N:M.key)||null,O(_,E,M,Q);case le:var ee=M._init;return V(E,_,N,ee(M._payload),Q)}if(xn(M)||se(M))return E=E.get(N)||null,L(_,E,M,Q,null);Gs(_,M)}return null}function K(E,_,N,M){for(var Q=null,ee=null,te=_,oe=_=0,We=null;te!==null&&oe<N.length;oe++){te.index>oe?(We=te,te=null):We=te.sibling;var ve=$(E,te,N[oe],M);if(ve===null){te===null&&(te=We);break}e&&te&&ve.alternate===null&&t(E,te),_=h(ve,_,oe),ee===null?Q=ve:ee.sibling=ve,ee=ve,te=We}if(oe===N.length)return n(E,te),Ce&&_r(E,oe),Q;if(te===null){for(;oe<N.length;oe++)te=U(E,N[oe],M),te!==null&&(_=h(te,_,oe),ee===null?Q=te:ee.sibling=te,ee=te);return Ce&&_r(E,oe),Q}for(te=o(E,te);oe<N.length;oe++)We=V(te,E,oe,N[oe],M),We!==null&&(e&&We.alternate!==null&&te.delete(We.key===null?oe:We.key),_=h(We,_,oe),ee===null?Q=We:ee.sibling=We,ee=We);return e&&te.forEach(function(pr){return t(E,pr)}),Ce&&_r(E,oe),Q}function G(E,_,N,M){var Q=se(N);if(typeof Q!="function")throw Error(s(150));if(N=Q.call(N),N==null)throw Error(s(151));for(var ee=Q=null,te=_,oe=_=0,We=null,ve=N.next();te!==null&&!ve.done;oe++,ve=N.next()){te.index>oe?(We=te,te=null):We=te.sibling;var pr=$(E,te,ve.value,M);if(pr===null){te===null&&(te=We);break}e&&te&&pr.alternate===null&&t(E,te),_=h(pr,_,oe),ee===null?Q=pr:ee.sibling=pr,ee=pr,te=We}if(ve.done)return n(E,te),Ce&&_r(E,oe),Q;if(te===null){for(;!ve.done;oe++,ve=N.next())ve=U(E,ve.value,M),ve!==null&&(_=h(ve,_,oe),ee===null?Q=ve:ee.sibling=ve,ee=ve);return Ce&&_r(E,oe),Q}for(te=o(E,te);!ve.done;oe++,ve=N.next())ve=V(te,E,oe,ve.value,M),ve!==null&&(e&&ve.alternate!==null&&te.delete(ve.key===null?oe:ve.key),_=h(ve,_,oe),ee===null?Q=ve:ee.sibling=ve,ee=ve);return e&&te.forEach(function(rp){return t(E,rp)}),Ce&&_r(E,oe),Q}function De(E,_,N,M){if(typeof N=="object"&&N!==null&&N.type===J&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case ae:e:{for(var Q=N.key,ee=_;ee!==null;){if(ee.key===Q){if(Q=N.type,Q===J){if(ee.tag===7){n(E,ee.sibling),_=l(ee,N.props.children),_.return=E,E=_;break e}}else if(ee.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===le&&Uu(Q)===ee.type){n(E,ee.sibling),_=l(ee,N.props),_.ref=Wn(E,ee,N),_.return=E,E=_;break e}n(E,ee);break}else t(E,ee);ee=ee.sibling}N.type===J?(_=Cr(N.props.children,E.mode,M,N.key),_.return=E,E=_):(M=vi(N.type,N.key,N.props,null,E.mode,M),M.ref=Wn(E,_,N),M.return=E,E=M)}return m(E);case I:e:{for(ee=N.key;_!==null;){if(_.key===ee)if(_.tag===4&&_.stateNode.containerInfo===N.containerInfo&&_.stateNode.implementation===N.implementation){n(E,_.sibling),_=l(_,N.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else t(E,_);_=_.sibling}_=Na(N,E.mode,M),_.return=E,E=_}return m(E);case le:return ee=N._init,De(E,_,ee(N._payload),M)}if(xn(N))return K(E,_,N,M);if(se(N))return G(E,_,N,M);Gs(E,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,_!==null&&_.tag===6?(n(E,_.sibling),_=l(_,N),_.return=E,E=_):(n(E,_),_=Ea(N,E.mode,M),_.return=E,E=_),m(E)):n(E,_)}return De}var Xr=zu(!0),Mu=zu(!1),Js=nr(null),Qs=null,Zr=null,Do=null;function Lo(){Do=Zr=Qs=null}function Uo(e){var t=Js.current;Ne(Js),e._currentValue=t}function zo(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function en(e,t){Qs=e,Do=Zr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ot=!0),e.firstContext=null)}function xt(e){var t=e._currentValue;if(Do!==e)if(e={context:e,memoizedValue:t,next:null},Zr===null){if(Qs===null)throw Error(s(308));Zr=e,Qs.dependencies={lanes:0,firstContext:e}}else Zr=Zr.next=e;return t}var br=null;function Mo(e){br===null?br=[e]:br.push(e)}function Bu(e,t,n,o){var l=t.interleaved;return l===null?(n.next=n,Mo(t)):(n.next=l.next,l.next=n),t.interleaved=n,qt(e,o)}function qt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var or=!1;function Bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ar(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(me&2)!==0){var l=o.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),o.pending=t,qt(e,n)}return l=o.interleaved,l===null?(t.next=t,Mo(o)):(t.next=l.next,l.next=t),o.interleaved=t,qt(e,n)}function Ys(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,eo(e,n)}}function qu(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var l=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var m={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?l=h=m:h=h.next=m,n=n.next}while(n!==null);h===null?l=h=t:h=h.next=t}else l=h=t;n={baseState:o.baseState,firstBaseUpdate:l,lastBaseUpdate:h,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xs(e,t,n,o){var l=e.updateQueue;or=!1;var h=l.firstBaseUpdate,m=l.lastBaseUpdate,v=l.shared.pending;if(v!==null){l.shared.pending=null;var x=v,O=x.next;x.next=null,m===null?h=O:m.next=O,m=x;var L=e.alternate;L!==null&&(L=L.updateQueue,v=L.lastBaseUpdate,v!==m&&(v===null?L.firstBaseUpdate=O:v.next=O,L.lastBaseUpdate=x))}if(h!==null){var U=l.baseState;m=0,L=O=x=null,v=h;do{var $=v.lane,V=v.eventTime;if((o&$)===$){L!==null&&(L=L.next={eventTime:V,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var K=e,G=v;switch($=t,V=n,G.tag){case 1:if(K=G.payload,typeof K=="function"){U=K.call(V,U,$);break e}U=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=G.payload,$=typeof K=="function"?K.call(V,U,$):K,$==null)break e;U=H({},U,$);break e;case 2:or=!0}}v.callback!==null&&v.lane!==0&&(e.flags|=64,$=l.effects,$===null?l.effects=[v]:$.push(v))}else V={eventTime:V,lane:$,tag:v.tag,payload:v.payload,callback:v.callback,next:null},L===null?(O=L=V,x=U):L=L.next=V,m|=$;if(v=v.next,v===null){if(v=l.shared.pending,v===null)break;$=v,v=$.next,$.next=null,l.lastBaseUpdate=$,l.shared.pending=null}}while(!0);if(L===null&&(x=U),l.baseState=x,l.firstBaseUpdate=O,l.lastBaseUpdate=L,t=l.shared.interleaved,t!==null){l=t;do m|=l.lane,l=l.next;while(l!==t)}else h===null&&(l.shared.lanes=0);jr|=m,e.lanes=m,e.memoizedState=U}}function Vu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],l=o.callback;if(l!==null){if(o.callback=null,o=n,typeof l!="function")throw Error(s(191,l));l.call(o)}}}var Hn={},Dt=nr(Hn),Kn=nr(Hn),Gn=nr(Hn);function kr(e){if(e===Hn)throw Error(s(174));return e}function Fo(e,t){switch(be(Gn,t),be(Kn,e),be(Dt,Hn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fi(t,e)}Ne(Dt),be(Dt,t)}function tn(){Ne(Dt),Ne(Kn),Ne(Gn)}function Wu(e){kr(Gn.current);var t=kr(Dt.current),n=Fi(t,e.type);t!==n&&(be(Kn,e),be(Dt,n))}function qo(e){Kn.current===e&&(Ne(Dt),Ne(Kn))}var Oe=nr(0);function Zs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vo=[];function Wo(){for(var e=0;e<Vo.length;e++)Vo[e]._workInProgressVersionPrimary=null;Vo.length=0}var ei=q.ReactCurrentDispatcher,Ho=q.ReactCurrentBatchConfig,Sr=0,Re=null,Me=null,qe=null,ti=!1,Jn=!1,Qn=0,Sf=0;function Ze(){throw Error(s(321))}function Ko(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jt(e[n],t[n]))return!1;return!0}function Go(e,t,n,o,l,h){if(Sr=h,Re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ei.current=e===null||e.memoizedState===null?Tf:Cf,e=n(o,l),Jn){h=0;do{if(Jn=!1,Qn=0,25<=h)throw Error(s(301));h+=1,qe=Me=null,t.updateQueue=null,ei.current=Of,e=n(o,l)}while(Jn)}if(ei.current=si,t=Me!==null&&Me.next!==null,Sr=0,qe=Me=Re=null,ti=!1,t)throw Error(s(300));return e}function Jo(){var e=Qn!==0;return Qn=0,e}function Lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Re.memoizedState=qe=e:qe=qe.next=e,qe}function _t(){if(Me===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=qe===null?Re.memoizedState:qe.next;if(t!==null)qe=t,Me=e;else{if(e===null)throw Error(s(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},qe===null?Re.memoizedState=qe=e:qe=qe.next=e}return qe}function Yn(e,t){return typeof t=="function"?t(e):t}function Qo(e){var t=_t(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var o=Me,l=o.baseQueue,h=n.pending;if(h!==null){if(l!==null){var m=l.next;l.next=h.next,h.next=m}o.baseQueue=l=h,n.pending=null}if(l!==null){h=l.next,o=o.baseState;var v=m=null,x=null,O=h;do{var L=O.lane;if((Sr&L)===L)x!==null&&(x=x.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),o=O.hasEagerState?O.eagerState:e(o,O.action);else{var U={lane:L,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};x===null?(v=x=U,m=o):x=x.next=U,Re.lanes|=L,jr|=L}O=O.next}while(O!==null&&O!==h);x===null?m=o:x.next=v,jt(o,t.memoizedState)||(ot=!0),t.memoizedState=o,t.baseState=m,t.baseQueue=x,n.lastRenderedState=o}if(e=n.interleaved,e!==null){l=e;do h=l.lane,Re.lanes|=h,jr|=h,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Yo(e){var t=_t(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var o=n.dispatch,l=n.pending,h=t.memoizedState;if(l!==null){n.pending=null;var m=l=l.next;do h=e(h,m.action),m=m.next;while(m!==l);jt(h,t.memoizedState)||(ot=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,o]}function Hu(){}function Ku(e,t){var n=Re,o=_t(),l=t(),h=!jt(o.memoizedState,l);if(h&&(o.memoizedState=l,ot=!0),o=o.queue,Xo(Qu.bind(null,n,o,e),[e]),o.getSnapshot!==t||h||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,Xn(9,Ju.bind(null,n,o,l,t),void 0,null),Ve===null)throw Error(s(349));(Sr&30)!==0||Gu(n,t,l)}return l}function Gu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ju(e,t,n,o){t.value=n,t.getSnapshot=o,Yu(t)&&Xu(e)}function Qu(e,t,n){return n(function(){Yu(t)&&Xu(e)})}function Yu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jt(e,n)}catch{return!0}}function Xu(e){var t=qt(e,1);t!==null&&Ot(t,e,1,-1)}function Zu(e){var t=Lt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:e},t.queue=e,e=e.dispatch=Nf.bind(null,Re,e),[t.memoizedState,e]}function Xn(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function ec(){return _t().memoizedState}function ri(e,t,n,o){var l=Lt();Re.flags|=e,l.memoizedState=Xn(1|t,n,void 0,o===void 0?null:o)}function ni(e,t,n,o){var l=_t();o=o===void 0?null:o;var h=void 0;if(Me!==null){var m=Me.memoizedState;if(h=m.destroy,o!==null&&Ko(o,m.deps)){l.memoizedState=Xn(t,n,h,o);return}}Re.flags|=e,l.memoizedState=Xn(1|t,n,h,o)}function tc(e,t){return ri(8390656,8,e,t)}function Xo(e,t){return ni(2048,8,e,t)}function rc(e,t){return ni(4,2,e,t)}function nc(e,t){return ni(4,4,e,t)}function sc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ic(e,t,n){return n=n!=null?n.concat([e]):null,ni(4,4,sc.bind(null,t,e),n)}function Zo(){}function oc(e,t){var n=_t();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&Ko(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function ac(e,t){var n=_t();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&Ko(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function lc(e,t,n){return(Sr&21)===0?(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=n):(jt(n,t)||(n=Ul(),Re.lanes|=n,jr|=n,e.baseState=!0),t)}function jf(e,t){var n=xe;xe=n!==0&&4>n?n:4,e(!0);var o=Ho.transition;Ho.transition={};try{e(!1),t()}finally{xe=n,Ho.transition=o}}function uc(){return _t().memoizedState}function Ef(e,t,n){var o=dr(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},cc(e))dc(t,n);else if(n=Bu(e,t,n,o),n!==null){var l=nt();Ot(n,e,o,l),hc(n,t,o)}}function Nf(e,t,n){var o=dr(e),l={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(cc(e))dc(t,l);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var m=t.lastRenderedState,v=h(m,n);if(l.hasEagerState=!0,l.eagerState=v,jt(v,m)){var x=t.interleaved;x===null?(l.next=l,Mo(t)):(l.next=x.next,x.next=l),t.interleaved=l;return}}catch{}n=Bu(e,t,l,o),n!==null&&(l=nt(),Ot(n,e,o,l),hc(n,t,o))}}function cc(e){var t=e.alternate;return e===Re||t!==null&&t===Re}function dc(e,t){Jn=ti=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hc(e,t,n){if((n&4194240)!==0){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,eo(e,n)}}var si={readContext:xt,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},Tf={readContext:xt,useCallback:function(e,t){return Lt().memoizedState=[e,t===void 0?null:t],e},useContext:xt,useEffect:tc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ri(4194308,4,sc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ri(4194308,4,e,t)},useInsertionEffect:function(e,t){return ri(4,2,e,t)},useMemo:function(e,t){var n=Lt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=Lt();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Ef.bind(null,Re,e),[o.memoizedState,e]},useRef:function(e){var t=Lt();return e={current:e},t.memoizedState=e},useState:Zu,useDebugValue:Zo,useDeferredValue:function(e){return Lt().memoizedState=e},useTransition:function(){var e=Zu(!1),t=e[0];return e=jf.bind(null,e[1]),Lt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=Re,l=Lt();if(Ce){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),Ve===null)throw Error(s(349));(Sr&30)!==0||Gu(o,t,n)}l.memoizedState=n;var h={value:n,getSnapshot:t};return l.queue=h,tc(Qu.bind(null,o,h,e),[e]),o.flags|=2048,Xn(9,Ju.bind(null,o,h,n,t),void 0,null),n},useId:function(){var e=Lt(),t=Ve.identifierPrefix;if(Ce){var n=Ft,o=Bt;n=(o&~(1<<32-St(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=Qn++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Sf++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Cf={readContext:xt,useCallback:oc,useContext:xt,useEffect:Xo,useImperativeHandle:ic,useInsertionEffect:rc,useLayoutEffect:nc,useMemo:ac,useReducer:Qo,useRef:ec,useState:function(){return Qo(Yn)},useDebugValue:Zo,useDeferredValue:function(e){var t=_t();return lc(t,Me.memoizedState,e)},useTransition:function(){var e=Qo(Yn)[0],t=_t().memoizedState;return[e,t]},useMutableSource:Hu,useSyncExternalStore:Ku,useId:uc,unstable_isNewReconciler:!1},Of={readContext:xt,useCallback:oc,useContext:xt,useEffect:Xo,useImperativeHandle:ic,useInsertionEffect:rc,useLayoutEffect:nc,useMemo:ac,useReducer:Yo,useRef:ec,useState:function(){return Yo(Yn)},useDebugValue:Zo,useDeferredValue:function(e){var t=_t();return Me===null?t.memoizedState=e:lc(t,Me.memoizedState,e)},useTransition:function(){var e=Yo(Yn)[0],t=_t().memoizedState;return[e,t]},useMutableSource:Hu,useSyncExternalStore:Ku,useId:uc,unstable_isNewReconciler:!1};function Nt(e,t){if(e&&e.defaultProps){t=H({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ea(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:H({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ii={isMounted:function(e){return(e=e._reactInternals)?yr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=nt(),l=dr(e),h=Vt(o,l);h.payload=t,n!=null&&(h.callback=n),t=ar(e,h,l),t!==null&&(Ot(t,e,l,o),Ys(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=nt(),l=dr(e),h=Vt(o,l);h.tag=1,h.payload=t,n!=null&&(h.callback=n),t=ar(e,h,l),t!==null&&(Ot(t,e,l,o),Ys(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nt(),o=dr(e),l=Vt(n,o);l.tag=2,t!=null&&(l.callback=t),t=ar(e,l,o),t!==null&&(Ot(t,e,o,n),Ys(t,e,o))}};function fc(e,t,n,o,l,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,m):t.prototype&&t.prototype.isPureReactComponent?!Un(n,o)||!Un(l,h):!0}function pc(e,t,n){var o=!1,l=sr,h=t.contextType;return typeof h=="object"&&h!==null?h=xt(h):(l=it(t)?wr:Xe.current,o=t.contextTypes,h=(o=o!=null)?Gr(e,l):sr),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ii,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=h),t}function mc(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&ii.enqueueReplaceState(t,t.state,null)}function ta(e,t,n,o){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Bo(e);var h=t.contextType;typeof h=="object"&&h!==null?l.context=xt(h):(h=it(t)?wr:Xe.current,l.context=Gr(e,h)),l.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(ea(e,t,h,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ii.enqueueReplaceState(l,l.state,null),Xs(e,n,l,o),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function rn(e,t){try{var n="",o=t;do n+=ge(o),o=o.return;while(o);var l=n}catch(h){l=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:l,digest:null}}function ra(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function na(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Rf=typeof WeakMap=="function"?WeakMap:Map;function gc(e,t,n){n=Vt(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){hi||(hi=!0,va=o),na(e,t)},n}function yc(e,t,n){n=Vt(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var l=t.value;n.payload=function(){return o(l)},n.callback=function(){na(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){na(e,t),typeof o!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),n}function vc(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new Rf;var l=new Set;o.set(t,l)}else l=o.get(t),l===void 0&&(l=new Set,o.set(t,l));l.has(n)||(l.add(n),e=Wf.bind(null,e,t,n),t.then(e,e))}function wc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xc(e,t,n,o,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vt(-1,1),t.tag=2,ar(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var Pf=q.ReactCurrentOwner,ot=!1;function rt(e,t,n,o){t.child=e===null?Mu(t,null,n,o):Xr(t,e.child,n,o)}function _c(e,t,n,o,l){n=n.render;var h=t.ref;return en(t,l),o=Go(e,t,n,o,h,l),n=Jo(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Wt(e,t,l)):(Ce&&n&&Ro(t),t.flags|=1,rt(e,t,o,l),t.child)}function bc(e,t,n,o,l){if(e===null){var h=n.type;return typeof h=="function"&&!ja(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,kc(e,t,h,o,l)):(e=vi(n.type,null,o,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&l)===0){var m=h.memoizedProps;if(n=n.compare,n=n!==null?n:Un,n(m,o)&&e.ref===t.ref)return Wt(e,t,l)}return t.flags|=1,e=fr(h,o),e.ref=t.ref,e.return=t,t.child=e}function kc(e,t,n,o,l){if(e!==null){var h=e.memoizedProps;if(Un(h,o)&&e.ref===t.ref)if(ot=!1,t.pendingProps=o=h,(e.lanes&l)!==0)(e.flags&131072)!==0&&(ot=!0);else return t.lanes=e.lanes,Wt(e,t,l)}return sa(e,t,n,o,l)}function Sc(e,t,n){var o=t.pendingProps,l=o.children,h=e!==null?e.memoizedState:null;if(o.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(sn,pt),pt|=n;else{if((n&1073741824)===0)return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(sn,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=h!==null?h.baseLanes:n,be(sn,pt),pt|=o}else h!==null?(o=h.baseLanes|n,t.memoizedState=null):o=n,be(sn,pt),pt|=o;return rt(e,t,l,n),t.child}function jc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function sa(e,t,n,o,l){var h=it(n)?wr:Xe.current;return h=Gr(t,h),en(t,l),n=Go(e,t,n,o,h,l),o=Jo(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Wt(e,t,l)):(Ce&&o&&Ro(t),t.flags|=1,rt(e,t,n,l),t.child)}function Ec(e,t,n,o,l){if(it(n)){var h=!0;qs(t)}else h=!1;if(en(t,l),t.stateNode===null)ai(e,t),pc(t,n,o),ta(t,n,o,l),o=!0;else if(e===null){var m=t.stateNode,v=t.memoizedProps;m.props=v;var x=m.context,O=n.contextType;typeof O=="object"&&O!==null?O=xt(O):(O=it(n)?wr:Xe.current,O=Gr(t,O));var L=n.getDerivedStateFromProps,U=typeof L=="function"||typeof m.getSnapshotBeforeUpdate=="function";U||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==o||x!==O)&&mc(t,m,o,O),or=!1;var $=t.memoizedState;m.state=$,Xs(t,o,m,l),x=t.memoizedState,v!==o||$!==x||st.current||or?(typeof L=="function"&&(ea(t,n,L,o),x=t.memoizedState),(v=or||fc(t,n,v,o,$,x,O))?(U||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=x),m.props=o,m.state=x,m.context=O,o=v):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{m=t.stateNode,Fu(e,t),v=t.memoizedProps,O=t.type===t.elementType?v:Nt(t.type,v),m.props=O,U=t.pendingProps,$=m.context,x=n.contextType,typeof x=="object"&&x!==null?x=xt(x):(x=it(n)?wr:Xe.current,x=Gr(t,x));var V=n.getDerivedStateFromProps;(L=typeof V=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==U||$!==x)&&mc(t,m,o,x),or=!1,$=t.memoizedState,m.state=$,Xs(t,o,m,l);var K=t.memoizedState;v!==U||$!==K||st.current||or?(typeof V=="function"&&(ea(t,n,V,o),K=t.memoizedState),(O=or||fc(t,n,O,o,$,K,x)||!1)?(L||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,K,x),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,K,x)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=K),m.props=o,m.state=K,m.context=x,o=O):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),o=!1)}return ia(e,t,n,o,h,l)}function ia(e,t,n,o,l,h){jc(e,t);var m=(t.flags&128)!==0;if(!o&&!m)return l&&Ru(t,n,!1),Wt(e,t,h);o=t.stateNode,Pf.current=t;var v=m&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&m?(t.child=Xr(t,e.child,null,h),t.child=Xr(t,null,v,h)):rt(e,t,v,h),t.memoizedState=o.state,l&&Ru(t,n,!0),t.child}function Nc(e){var t=e.stateNode;t.pendingContext?Cu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cu(e,t.context,!1),Fo(e,t.containerInfo)}function Tc(e,t,n,o,l){return Yr(),$o(l),t.flags|=256,rt(e,t,n,o),t.child}var oa={dehydrated:null,treeContext:null,retryLane:0};function aa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Cc(e,t,n){var o=t.pendingProps,l=Oe.current,h=!1,m=(t.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(l&2)!==0),v?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),be(Oe,l&1),e===null)return Io(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=o.children,e=o.fallback,h?(o=t.mode,h=t.child,m={mode:"hidden",children:m},(o&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=m):h=wi(m,o,0,null),e=Cr(e,o,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=aa(n),t.memoizedState=oa,e):la(t,m));if(l=e.memoizedState,l!==null&&(v=l.dehydrated,v!==null))return Af(e,t,m,o,v,l,n);if(h){h=o.fallback,m=t.mode,l=e.child,v=l.sibling;var x={mode:"hidden",children:o.children};return(m&1)===0&&t.child!==l?(o=t.child,o.childLanes=0,o.pendingProps=x,t.deletions=null):(o=fr(l,x),o.subtreeFlags=l.subtreeFlags&14680064),v!==null?h=fr(v,h):(h=Cr(h,m,n,null),h.flags|=2),h.return=t,o.return=t,o.sibling=h,t.child=o,o=h,h=t.child,m=e.child.memoizedState,m=m===null?aa(n):{baseLanes:m.baseLanes|n,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~n,t.memoizedState=oa,o}return h=e.child,e=h.sibling,o=fr(h,{mode:"visible",children:o.children}),(t.mode&1)===0&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function la(e,t){return t=wi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function oi(e,t,n,o){return o!==null&&$o(o),Xr(t,e.child,null,n),e=la(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Af(e,t,n,o,l,h,m){if(n)return t.flags&256?(t.flags&=-257,o=ra(Error(s(422))),oi(e,t,m,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=o.fallback,l=t.mode,o=wi({mode:"visible",children:o.children},l,0,null),h=Cr(h,l,m,null),h.flags|=2,o.return=t,h.return=t,o.sibling=h,t.child=o,(t.mode&1)!==0&&Xr(t,e.child,null,m),t.child.memoizedState=aa(m),t.memoizedState=oa,h);if((t.mode&1)===0)return oi(e,t,m,null);if(l.data==="$!"){if(o=l.nextSibling&&l.nextSibling.dataset,o)var v=o.dgst;return o=v,h=Error(s(419)),o=ra(h,o,void 0),oi(e,t,m,o)}if(v=(m&e.childLanes)!==0,ot||v){if(o=Ve,o!==null){switch(m&-m){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(o.suspendedLanes|m))!==0?0:l,l!==0&&l!==h.retryLane&&(h.retryLane=l,qt(e,l),Ot(o,e,l,-1))}return Sa(),o=ra(Error(s(421))),oi(e,t,m,o)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Hf.bind(null,e),l._reactRetry=t,null):(e=h.treeContext,ft=rr(l.nextSibling),ht=t,Ce=!0,Et=null,e!==null&&(vt[wt++]=Bt,vt[wt++]=Ft,vt[wt++]=xr,Bt=e.id,Ft=e.overflow,xr=t),t=la(t,o.children),t.flags|=4096,t)}function Oc(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),zo(e.return,t,n)}function ua(e,t,n,o,l){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:l}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=o,h.tail=n,h.tailMode=l)}function Rc(e,t,n){var o=t.pendingProps,l=o.revealOrder,h=o.tail;if(rt(e,t,o.children,n),o=Oe.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oc(e,n,t);else if(e.tag===19)Oc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(be(Oe,o),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Zs(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),ua(t,!1,l,n,h);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Zs(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}ua(t,!0,n,null,h);break;case"together":ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ai(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jr|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=fr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function If(e,t,n){switch(t.tag){case 3:Nc(t),Yr();break;case 5:Wu(t);break;case 1:it(t.type)&&qs(t);break;case 4:Fo(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,l=t.memoizedProps.value;be(Js,o._currentValue),o._currentValue=l;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(be(Oe,Oe.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Cc(e,t,n):(be(Oe,Oe.current&1),e=Wt(e,t,n),e!==null?e.sibling:null);be(Oe,Oe.current&1);break;case 19:if(o=(n&t.childLanes)!==0,(e.flags&128)!==0){if(o)return Rc(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),be(Oe,Oe.current),o)break;return null;case 22:case 23:return t.lanes=0,Sc(e,t,n)}return Wt(e,t,n)}var Pc,ca,Ac,Ic;Pc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ca=function(){},Ac=function(e,t,n,o){var l=e.memoizedProps;if(l!==o){e=t.stateNode,kr(Dt.current);var h=null;switch(n){case"input":l=Ui(e,l),o=Ui(e,o),h=[];break;case"select":l=H({},l,{value:void 0}),o=H({},o,{value:void 0}),h=[];break;case"textarea":l=Bi(e,l),o=Bi(e,o),h=[];break;default:typeof l.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Ms)}qi(n,o);var m;n=null;for(O in l)if(!o.hasOwnProperty(O)&&l.hasOwnProperty(O)&&l[O]!=null)if(O==="style"){var v=l[O];for(m in v)v.hasOwnProperty(m)&&(n||(n={}),n[m]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(u.hasOwnProperty(O)?h||(h=[]):(h=h||[]).push(O,null));for(O in o){var x=o[O];if(v=l?.[O],o.hasOwnProperty(O)&&x!==v&&(x!=null||v!=null))if(O==="style")if(v){for(m in v)!v.hasOwnProperty(m)||x&&x.hasOwnProperty(m)||(n||(n={}),n[m]="");for(m in x)x.hasOwnProperty(m)&&v[m]!==x[m]&&(n||(n={}),n[m]=x[m])}else n||(h||(h=[]),h.push(O,n)),n=x;else O==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,v=v?v.__html:void 0,x!=null&&v!==x&&(h=h||[]).push(O,x)):O==="children"?typeof x!="string"&&typeof x!="number"||(h=h||[]).push(O,""+x):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(u.hasOwnProperty(O)?(x!=null&&O==="onScroll"&&Ee("scroll",e),h||v===x||(h=[])):(h=h||[]).push(O,x))}n&&(h=h||[]).push("style",n);var O=h;(t.updateQueue=O)&&(t.flags|=4)}},Ic=function(e,t,n,o){n!==o&&(t.flags|=4)};function Zn(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,o|=l.subtreeFlags&14680064,o|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,o|=l.subtreeFlags,o|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function $f(e,t,n){var o=t.pendingProps;switch(Po(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return it(t.type)&&Fs(),et(t),null;case 3:return o=t.stateNode,tn(),Ne(st),Ne(Xe),Wo(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Ks(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Et!==null&&(_a(Et),Et=null))),ca(e,t),et(t),null;case 5:qo(t);var l=kr(Gn.current);if(n=t.type,e!==null&&t.stateNode!=null)Ac(e,t,n,o,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(s(166));return et(t),null}if(e=kr(Dt.current),Ks(t)){o=t.stateNode,n=t.type;var h=t.memoizedProps;switch(o[$t]=t,o[qn]=h,e=(t.mode&1)!==0,n){case"dialog":Ee("cancel",o),Ee("close",o);break;case"iframe":case"object":case"embed":Ee("load",o);break;case"video":case"audio":for(l=0;l<Mn.length;l++)Ee(Mn[l],o);break;case"source":Ee("error",o);break;case"img":case"image":case"link":Ee("error",o),Ee("load",o);break;case"details":Ee("toggle",o);break;case"input":pl(o,h),Ee("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!h.multiple},Ee("invalid",o);break;case"textarea":yl(o,h),Ee("invalid",o)}qi(n,h),l=null;for(var m in h)if(h.hasOwnProperty(m)){var v=h[m];m==="children"?typeof v=="string"?o.textContent!==v&&(h.suppressHydrationWarning!==!0&&zs(o.textContent,v,e),l=["children",v]):typeof v=="number"&&o.textContent!==""+v&&(h.suppressHydrationWarning!==!0&&zs(o.textContent,v,e),l=["children",""+v]):u.hasOwnProperty(m)&&v!=null&&m==="onScroll"&&Ee("scroll",o)}switch(n){case"input":gs(o),gl(o,h,!0);break;case"textarea":gs(o),wl(o);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(o.onclick=Ms)}o=l,t.updateQueue=o,o!==null&&(t.flags|=4)}else{m=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xl(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=m.createElement(n,{is:o.is}):(e=m.createElement(n),n==="select"&&(m=e,o.multiple?m.multiple=!0:o.size&&(m.size=o.size))):e=m.createElementNS(e,n),e[$t]=t,e[qn]=o,Pc(e,t,!1,!1),t.stateNode=e;e:{switch(m=Vi(n,o),n){case"dialog":Ee("cancel",e),Ee("close",e),l=o;break;case"iframe":case"object":case"embed":Ee("load",e),l=o;break;case"video":case"audio":for(l=0;l<Mn.length;l++)Ee(Mn[l],e);l=o;break;case"source":Ee("error",e),l=o;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),l=o;break;case"details":Ee("toggle",e),l=o;break;case"input":pl(e,o),l=Ui(e,o),Ee("invalid",e);break;case"option":l=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},l=H({},o,{value:void 0}),Ee("invalid",e);break;case"textarea":yl(e,o),l=Bi(e,o),Ee("invalid",e);break;default:l=o}qi(n,l),v=l;for(h in v)if(v.hasOwnProperty(h)){var x=v[h];h==="style"?kl(e,x):h==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&_l(e,x)):h==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&_n(e,x):typeof x=="number"&&_n(e,""+x):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(u.hasOwnProperty(h)?x!=null&&h==="onScroll"&&Ee("scroll",e):x!=null&&z(e,h,x,m))}switch(n){case"input":gs(e),gl(e,o,!1);break;case"textarea":gs(e),wl(e);break;case"option":o.value!=null&&e.setAttribute("value",""+we(o.value));break;case"select":e.multiple=!!o.multiple,h=o.value,h!=null?Dr(e,!!o.multiple,h,!1):o.defaultValue!=null&&Dr(e,!!o.multiple,o.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Ms)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return et(t),null;case 6:if(e&&t.stateNode!=null)Ic(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(n=kr(Gn.current),kr(Dt.current),Ks(t)){if(o=t.stateNode,n=t.memoizedProps,o[$t]=t,(h=o.nodeValue!==n)&&(e=ht,e!==null))switch(e.tag){case 3:zs(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zs(o.nodeValue,n,(e.mode&1)!==0)}h&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[$t]=t,t.stateNode=o}return et(t),null;case 13:if(Ne(Oe),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&ft!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Lu(),Yr(),t.flags|=98560,h=!1;else if(h=Ks(t),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[$t]=t}else Yr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;et(t),h=!1}else Et!==null&&(_a(Et),Et=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Oe.current&1)!==0?Be===0&&(Be=3):Sa())),t.updateQueue!==null&&(t.flags|=4),et(t),null);case 4:return tn(),ca(e,t),e===null&&Bn(t.stateNode.containerInfo),et(t),null;case 10:return Uo(t.type._context),et(t),null;case 17:return it(t.type)&&Fs(),et(t),null;case 19:if(Ne(Oe),h=t.memoizedState,h===null)return et(t),null;if(o=(t.flags&128)!==0,m=h.rendering,m===null)if(o)Zn(h,!1);else{if(Be!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=Zs(e),m!==null){for(t.flags|=128,Zn(h,!1),o=m.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)h=n,e=o,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return be(Oe,Oe.current&1|2),t.child}e=e.sibling}h.tail!==null&&$e()>on&&(t.flags|=128,o=!0,Zn(h,!1),t.lanes=4194304)}else{if(!o)if(e=Zs(m),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zn(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!Ce)return et(t),null}else 2*$e()-h.renderingStartTime>on&&n!==1073741824&&(t.flags|=128,o=!0,Zn(h,!1),t.lanes=4194304);h.isBackwards?(m.sibling=t.child,t.child=m):(n=h.last,n!==null?n.sibling=m:t.child=m,h.last=m)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=$e(),t.sibling=null,n=Oe.current,be(Oe,o?n&1|2:n&1),t):(et(t),null);case 22:case 23:return ka(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&(t.mode&1)!==0?(pt&1073741824)!==0&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function Df(e,t){switch(Po(t),t.tag){case 1:return it(t.type)&&Fs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return tn(),Ne(st),Ne(Xe),Wo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return qo(t),null;case 13:if(Ne(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Yr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(Oe),null;case 4:return tn(),null;case 10:return Uo(t.type._context),null;case 22:case 23:return ka(),null;case 24:return null;default:return null}}var li=!1,tt=!1,Lf=typeof WeakSet=="function"?WeakSet:Set,W=null;function nn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){Ae(e,t,o)}else n.current=null}function da(e,t,n){try{n()}catch(o){Ae(e,t,o)}}var $c=!1;function Uf(e,t){if(ko=Ts,e=fu(),mo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var l=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var m=0,v=-1,x=-1,O=0,L=0,U=e,$=null;t:for(;;){for(var V;U!==n||l!==0&&U.nodeType!==3||(v=m+l),U!==h||o!==0&&U.nodeType!==3||(x=m+o),U.nodeType===3&&(m+=U.nodeValue.length),(V=U.firstChild)!==null;)$=U,U=V;for(;;){if(U===e)break t;if($===n&&++O===l&&(v=m),$===h&&++L===o&&(x=m),(V=U.nextSibling)!==null)break;U=$,$=U.parentNode}U=V}n=v===-1||x===-1?null:{start:v,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for(So={focusedElem:e,selectionRange:n},Ts=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var K=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(K!==null){var G=K.memoizedProps,De=K.memoizedState,E=t.stateNode,_=E.getSnapshotBeforeUpdate(t.elementType===t.type?G:Nt(t.type,G),De);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(M){Ae(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return K=$c,$c=!1,K}function es(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&e)===e){var h=l.destroy;l.destroy=void 0,h!==void 0&&da(t,n,h)}l=l.next}while(l!==o)}}function ui(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function ha(e){var t=e.ref;if(t!==null){var n=e.stateNode;e.tag,e=n,typeof t=="function"?t(e):t.current=e}}function Dc(e){var t=e.alternate;t!==null&&(e.alternate=null,Dc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$t],delete t[qn],delete t[To],delete t[xf],delete t[_f])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lc(e){return e.tag===5||e.tag===3||e.tag===4}function Uc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fa(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ms));else if(o!==4&&(e=e.child,e!==null))for(fa(e,t,n),e=e.sibling;e!==null;)fa(e,t,n),e=e.sibling}function pa(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(pa(e,t,n),e=e.sibling;e!==null;)pa(e,t,n),e=e.sibling}var Ke=null,Tt=!1;function lr(e,t,n){for(n=n.child;n!==null;)zc(e,t,n),n=n.sibling}function zc(e,t,n){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(bs,n)}catch{}switch(n.tag){case 5:tt||nn(n,t);case 6:var o=Ke,l=Tt;Ke=null,lr(e,t,n),Ke=o,Tt=l,Ke!==null&&(Tt?(e=Ke,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(Tt?(e=Ke,n=n.stateNode,e.nodeType===8?No(e.parentNode,n):e.nodeType===1&&No(e,n),Pn(e)):No(Ke,n.stateNode));break;case 4:o=Ke,l=Tt,Ke=n.stateNode.containerInfo,Tt=!0,lr(e,t,n),Ke=o,Tt=l;break;case 0:case 11:case 14:case 15:if(!tt&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){l=o=o.next;do{var h=l,m=h.destroy;h=h.tag,m!==void 0&&((h&2)!==0||(h&4)!==0)&&da(n,t,m),l=l.next}while(l!==o)}lr(e,t,n);break;case 1:if(!tt&&(nn(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(v){Ae(n,t,v)}lr(e,t,n);break;case 21:lr(e,t,n);break;case 22:n.mode&1?(tt=(o=tt)||n.memoizedState!==null,lr(e,t,n),tt=o):lr(e,t,n);break;default:lr(e,t,n)}}function Mc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Lf),t.forEach(function(o){var l=Kf.bind(null,e,o);n.has(o)||(n.add(o),o.then(l,l))})}}function Ct(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var l=n[o];try{var h=e,m=t,v=m;e:for(;v!==null;){switch(v.tag){case 5:Ke=v.stateNode,Tt=!1;break e;case 3:Ke=v.stateNode.containerInfo,Tt=!0;break e;case 4:Ke=v.stateNode.containerInfo,Tt=!0;break e}v=v.return}if(Ke===null)throw Error(s(160));zc(h,m,l),Ke=null,Tt=!1;var x=l.alternate;x!==null&&(x.return=null),l.return=null}catch(O){Ae(l,t,O)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Bc(t,e),t=t.sibling}function Bc(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ct(t,e),Ut(e),o&4){try{es(3,e,e.return),ui(3,e)}catch(G){Ae(e,e.return,G)}try{es(5,e,e.return)}catch(G){Ae(e,e.return,G)}}break;case 1:Ct(t,e),Ut(e),o&512&&n!==null&&nn(n,n.return);break;case 5:if(Ct(t,e),Ut(e),o&512&&n!==null&&nn(n,n.return),e.flags&32){var l=e.stateNode;try{_n(l,"")}catch(G){Ae(e,e.return,G)}}if(o&4&&(l=e.stateNode,l!=null)){var h=e.memoizedProps,m=n!==null?n.memoizedProps:h,v=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{v==="input"&&h.type==="radio"&&h.name!=null&&ml(l,h),Vi(v,m);var O=Vi(v,h);for(m=0;m<x.length;m+=2){var L=x[m],U=x[m+1];L==="style"?kl(l,U):L==="dangerouslySetInnerHTML"?_l(l,U):L==="children"?_n(l,U):z(l,L,U,O)}switch(v){case"input":zi(l,h);break;case"textarea":vl(l,h);break;case"select":var $=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!h.multiple;var V=h.value;V!=null?Dr(l,!!h.multiple,V,!1):$!==!!h.multiple&&(h.defaultValue!=null?Dr(l,!!h.multiple,h.defaultValue,!0):Dr(l,!!h.multiple,h.multiple?[]:"",!1))}l[qn]=h}catch(G){Ae(e,e.return,G)}}break;case 6:if(Ct(t,e),Ut(e),o&4){if(e.stateNode===null)throw Error(s(162));l=e.stateNode,h=e.memoizedProps;try{l.nodeValue=h}catch(G){Ae(e,e.return,G)}}break;case 3:if(Ct(t,e),Ut(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{Pn(t.containerInfo)}catch(G){Ae(e,e.return,G)}break;case 4:Ct(t,e),Ut(e);break;case 13:Ct(t,e),Ut(e),l=e.child,l.flags&8192&&(h=l.memoizedState!==null,l.stateNode.isHidden=h,!h||l.alternate!==null&&l.alternate.memoizedState!==null||(ya=$e())),o&4&&Mc(e);break;case 22:if(L=n!==null&&n.memoizedState!==null,e.mode&1?(tt=(O=tt)||L,Ct(t,e),tt=O):Ct(t,e),Ut(e),o&8192){if(O=e.memoizedState!==null,(e.stateNode.isHidden=O)&&!L&&(e.mode&1)!==0)for(W=e,L=e.child;L!==null;){for(U=W=L;W!==null;){switch($=W,V=$.child,$.tag){case 0:case 11:case 14:case 15:es(4,$,$.return);break;case 1:nn($,$.return);var K=$.stateNode;if(typeof K.componentWillUnmount=="function"){o=$,n=$.return;try{t=o,K.props=t.memoizedProps,K.state=t.memoizedState,K.componentWillUnmount()}catch(G){Ae(o,n,G)}}break;case 5:nn($,$.return);break;case 22:if($.memoizedState!==null){Vc(U);continue}}V!==null?(V.return=$,W=V):Vc(U)}L=L.sibling}e:for(L=null,U=e;;){if(U.tag===5){if(L===null){L=U;try{l=U.stateNode,O?(h=l.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(v=U.stateNode,x=U.memoizedProps.style,m=x!=null&&x.hasOwnProperty("display")?x.display:null,v.style.display=bl("display",m))}catch(G){Ae(e,e.return,G)}}}else if(U.tag===6){if(L===null)try{U.stateNode.nodeValue=O?"":U.memoizedProps}catch(G){Ae(e,e.return,G)}}else if((U.tag!==22&&U.tag!==23||U.memoizedState===null||U===e)&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===e)break e;for(;U.sibling===null;){if(U.return===null||U.return===e)break e;L===U&&(L=null),U=U.return}L===U&&(L=null),U.sibling.return=U.return,U=U.sibling}}break;case 19:Ct(t,e),Ut(e),o&4&&Mc(e);break;case 21:break;default:Ct(t,e),Ut(e)}}function Ut(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Lc(n)){var o=n;break e}n=n.return}throw Error(s(160))}switch(o.tag){case 5:var l=o.stateNode;o.flags&32&&(_n(l,""),o.flags&=-33);var h=Uc(e);pa(e,h,l);break;case 3:case 4:var m=o.stateNode.containerInfo,v=Uc(e);fa(e,v,m);break;default:throw Error(s(161))}}catch(x){Ae(e,e.return,x)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zf(e,t,n){W=e,Fc(e)}function Fc(e,t,n){for(var o=(e.mode&1)!==0;W!==null;){var l=W,h=l.child;if(l.tag===22&&o){var m=l.memoizedState!==null||li;if(!m){var v=l.alternate,x=v!==null&&v.memoizedState!==null||tt;v=li;var O=tt;if(li=m,(tt=x)&&!O)for(W=l;W!==null;)m=W,x=m.child,m.tag===22&&m.memoizedState!==null?Wc(l):x!==null?(x.return=m,W=x):Wc(l);for(;h!==null;)W=h,Fc(h),h=h.sibling;W=l,li=v,tt=O}qc(e)}else(l.subtreeFlags&8772)!==0&&h!==null?(h.return=l,W=h):qc(e)}}function qc(e){for(;W!==null;){var t=W;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:tt||ui(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!tt)if(n===null)o.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Nt(t.type,n.memoizedProps);o.componentDidUpdate(l,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&Vu(t,h,o);break;case 3:var m=t.updateQueue;if(m!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Vu(t,m,n)}break;case 5:var v=t.stateNode;if(n===null&&t.flags&4){n=v;var x=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&n.focus();break;case"img":x.src&&(n.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var O=t.alternate;if(O!==null){var L=O.memoizedState;if(L!==null){var U=L.dehydrated;U!==null&&Pn(U)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}tt||t.flags&512&&ha(t)}catch($){Ae(t,t.return,$)}}if(t===e){W=null;break}if(n=t.sibling,n!==null){n.return=t.return,W=n;break}W=t.return}}function Vc(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var n=t.sibling;if(n!==null){n.return=t.return,W=n;break}W=t.return}}function Wc(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ui(4,t)}catch(x){Ae(t,n,x)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var l=t.return;try{o.componentDidMount()}catch(x){Ae(t,l,x)}}var h=t.return;try{ha(t)}catch(x){Ae(t,h,x)}break;case 5:var m=t.return;try{ha(t)}catch(x){Ae(t,m,x)}}}catch(x){Ae(t,t.return,x)}if(t===e){W=null;break}var v=t.sibling;if(v!==null){v.return=t.return,W=v;break}W=t.return}}var Mf=Math.ceil,ci=q.ReactCurrentDispatcher,ma=q.ReactCurrentOwner,bt=q.ReactCurrentBatchConfig,me=0,Ve=null,Le=null,Ge=0,pt=0,sn=nr(0),Be=0,ts=null,jr=0,di=0,ga=0,rs=null,at=null,ya=0,on=1/0,Ht=null,hi=!1,va=null,ur=null,fi=!1,cr=null,pi=0,ns=0,wa=null,mi=-1,gi=0;function nt(){return(me&6)!==0?$e():mi!==-1?mi:mi=$e()}function dr(e){return(e.mode&1)===0?1:(me&2)!==0&&Ge!==0?Ge&-Ge:kf.transition!==null?(gi===0&&(gi=Ul()),gi):(e=xe,e!==0||(e=window.event,e=e===void 0?16:Kl(e.type)),e)}function Ot(e,t,n,o){if(50<ns)throw ns=0,wa=null,Error(s(185));Nn(e,n,o),((me&2)===0||e!==Ve)&&(e===Ve&&((me&2)===0&&(di|=n),Be===4&&hr(e,Ge)),lt(e,o),n===1&&me===0&&(t.mode&1)===0&&(on=$e()+500,Vs&&ir()))}function lt(e,t){var n=e.callbackNode;bh(e,t);var o=js(e,e===Ve?Ge:0);if(o===0)n!==null&&$l(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&$l(n),t===1)e.tag===0?bf(Kc.bind(null,e)):Pu(Kc.bind(null,e)),vf(function(){(me&6)===0&&ir()}),n=null;else{switch(zl(o)){case 1:n=Yi;break;case 4:n=Dl;break;case 16:n=_s;break;case 536870912:n=Ll;break;default:n=_s}n=td(n,Hc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Hc(e,t){if(mi=-1,gi=0,(me&6)!==0)throw Error(s(327));var n=e.callbackNode;if(an()&&e.callbackNode!==n)return null;var o=js(e,e===Ve?Ge:0);if(o===0)return null;if((o&30)!==0||(o&e.expiredLanes)!==0||t)t=yi(e,o);else{t=o;var l=me;me|=2;var h=Jc();(Ve!==e||Ge!==t)&&(Ht=null,on=$e()+500,Nr(e,t));do try{qf();break}catch(v){Gc(e,v)}while(!0);Lo(),ci.current=h,me=l,Le!==null?t=0:(Ve=null,Ge=0,t=Be)}if(t!==0){if(t===2&&(l=Xi(e),l!==0&&(o=l,t=xa(e,l))),t===1)throw n=ts,Nr(e,0),hr(e,o),lt(e,$e()),n;if(t===6)hr(e,o);else{if(l=e.current.alternate,(o&30)===0&&!Bf(l)&&(t=yi(e,o),t===2&&(h=Xi(e),h!==0&&(o=h,t=xa(e,h))),t===1))throw n=ts,Nr(e,0),hr(e,o),lt(e,$e()),n;switch(e.finishedWork=l,e.finishedLanes=o,t){case 0:case 1:throw Error(s(345));case 2:Tr(e,at,Ht);break;case 3:if(hr(e,o),(o&130023424)===o&&(t=ya+500-$e(),10<t)){if(js(e,0)!==0)break;if(l=e.suspendedLanes,(l&o)!==o){nt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Eo(Tr.bind(null,e,at,Ht),t);break}Tr(e,at,Ht);break;case 4:if(hr(e,o),(o&4194240)===o)break;for(t=e.eventTimes,l=-1;0<o;){var m=31-St(o);h=1<<m,m=t[m],m>l&&(l=m),o&=~h}if(o=l,o=$e()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Mf(o/1960))-o,10<o){e.timeoutHandle=Eo(Tr.bind(null,e,at,Ht),o);break}Tr(e,at,Ht);break;case 5:Tr(e,at,Ht);break;default:throw Error(s(329))}}}return lt(e,$e()),e.callbackNode===n?Hc.bind(null,e):null}function xa(e,t){var n=rs;return e.current.memoizedState.isDehydrated&&(Nr(e,t).flags|=256),e=yi(e,t),e!==2&&(t=at,at=n,t!==null&&_a(t)),e}function _a(e){at===null?at=e:at.push.apply(at,e)}function Bf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var l=n[o],h=l.getSnapshot;l=l.value;try{if(!jt(h(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hr(e,t){for(t&=~ga,t&=~di,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-St(t),o=1<<n;e[n]=-1,t&=~o}}function Kc(e){if((me&6)!==0)throw Error(s(327));an();var t=js(e,0);if((t&1)===0)return lt(e,$e()),null;var n=yi(e,t);if(e.tag!==0&&n===2){var o=Xi(e);o!==0&&(t=o,n=xa(e,o))}if(n===1)throw n=ts,Nr(e,0),hr(e,t),lt(e,$e()),n;if(n===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tr(e,at,Ht),lt(e,$e()),null}function ba(e,t){var n=me;me|=1;try{return e(t)}finally{me=n,me===0&&(on=$e()+500,Vs&&ir())}}function Er(e){cr!==null&&cr.tag===0&&(me&6)===0&&an();var t=me;me|=1;var n=bt.transition,o=xe;try{if(bt.transition=null,xe=1,e)return e()}finally{xe=o,bt.transition=n,me=t,(me&6)===0&&ir()}}function ka(){pt=sn.current,Ne(sn)}function Nr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,yf(n)),Le!==null)for(n=Le.return;n!==null;){var o=n;switch(Po(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Fs();break;case 3:tn(),Ne(st),Ne(Xe),Wo();break;case 5:qo(o);break;case 4:tn();break;case 13:Ne(Oe);break;case 19:Ne(Oe);break;case 10:Uo(o.type._context);break;case 22:case 23:ka()}n=n.return}if(Ve=e,Le=e=fr(e.current,null),Ge=pt=t,Be=0,ts=null,ga=di=jr=0,at=rs=null,br!==null){for(t=0;t<br.length;t++)if(n=br[t],o=n.interleaved,o!==null){n.interleaved=null;var l=o.next,h=n.pending;if(h!==null){var m=h.next;h.next=l,o.next=m}n.pending=o}br=null}return e}function Gc(e,t){do{var n=Le;try{if(Lo(),ei.current=si,ti){for(var o=Re.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}ti=!1}if(Sr=0,qe=Me=Re=null,Jn=!1,Qn=0,ma.current=null,n===null||n.return===null){Be=1,ts=t,Le=null;break}e:{var h=e,m=n.return,v=n,x=t;if(t=Ge,v.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var O=x,L=v,U=L.tag;if((L.mode&1)===0&&(U===0||U===11||U===15)){var $=L.alternate;$?(L.updateQueue=$.updateQueue,L.memoizedState=$.memoizedState,L.lanes=$.lanes):(L.updateQueue=null,L.memoizedState=null)}var V=wc(m);if(V!==null){V.flags&=-257,xc(V,m,v,h,t),V.mode&1&&vc(h,O,t),t=V,x=O;var K=t.updateQueue;if(K===null){var G=new Set;G.add(x),t.updateQueue=G}else K.add(x);break e}else{if((t&1)===0){vc(h,O,t),Sa();break e}x=Error(s(426))}}else if(Ce&&v.mode&1){var De=wc(m);if(De!==null){(De.flags&65536)===0&&(De.flags|=256),xc(De,m,v,h,t),$o(rn(x,v));break e}}h=x=rn(x,v),Be!==4&&(Be=2),rs===null?rs=[h]:rs.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var E=gc(h,x,t);qu(h,E);break e;case 1:v=x;var _=h.type,N=h.stateNode;if((h.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ur===null||!ur.has(N)))){h.flags|=65536,t&=-t,h.lanes|=t;var M=yc(h,v,t);qu(h,M);break e}}h=h.return}while(h!==null)}Yc(n)}catch(Q){t=Q,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function Jc(){var e=ci.current;return ci.current=si,e===null?si:e}function Sa(){(Be===0||Be===3||Be===2)&&(Be=4),Ve===null||(jr&268435455)===0&&(di&268435455)===0||hr(Ve,Ge)}function yi(e,t){var n=me;me|=2;var o=Jc();(Ve!==e||Ge!==t)&&(Ht=null,Nr(e,t));do try{Ff();break}catch(l){Gc(e,l)}while(!0);if(Lo(),me=n,ci.current=o,Le!==null)throw Error(s(261));return Ve=null,Ge=0,Be}function Ff(){for(;Le!==null;)Qc(Le)}function qf(){for(;Le!==null&&!fh();)Qc(Le)}function Qc(e){var t=ed(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?Yc(e):Le=t,ma.current=null}function Yc(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=$f(n,t,pt),n!==null){Le=n;return}}else{if(n=Df(n,t),n!==null){n.flags&=32767,Le=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Be=6,Le=null;return}}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);Be===0&&(Be=5)}function Tr(e,t,n){var o=xe,l=bt.transition;try{bt.transition=null,xe=1,Vf(e,t,n,o)}finally{bt.transition=l,xe=o}return null}function Vf(e,t,n,o){do an();while(cr!==null);if((me&6)!==0)throw Error(s(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(kh(e,h),e===Ve&&(Le=Ve=null,Ge=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||fi||(fi=!0,td(_s,function(){return an(),null})),h=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||h){h=bt.transition,bt.transition=null;var m=xe;xe=1;var v=me;me|=4,ma.current=null,Uf(e,n),Bc(n,e),cf(So),Ts=!!ko,So=ko=null,e.current=n,zf(n),ph(),me=v,xe=m,bt.transition=h}else e.current=n;if(fi&&(fi=!1,cr=e,pi=l),h=e.pendingLanes,h===0&&(ur=null),yh(n.stateNode),lt(e,$e()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],o(l.value,{componentStack:l.stack,digest:l.digest});if(hi)throw hi=!1,e=va,va=null,e;return(pi&1)!==0&&e.tag!==0&&an(),h=e.pendingLanes,(h&1)!==0?e===wa?ns++:(ns=0,wa=e):ns=0,ir(),null}function an(){if(cr!==null){var e=zl(pi),t=bt.transition,n=xe;try{if(bt.transition=null,xe=16>e?16:e,cr===null)var o=!1;else{if(e=cr,cr=null,pi=0,(me&6)!==0)throw Error(s(331));var l=me;for(me|=4,W=e.current;W!==null;){var h=W,m=h.child;if((W.flags&16)!==0){var v=h.deletions;if(v!==null){for(var x=0;x<v.length;x++){var O=v[x];for(W=O;W!==null;){var L=W;switch(L.tag){case 0:case 11:case 15:es(8,L,h)}var U=L.child;if(U!==null)U.return=L,W=U;else for(;W!==null;){L=W;var $=L.sibling,V=L.return;if(Dc(L),L===O){W=null;break}if($!==null){$.return=V,W=$;break}W=V}}}var K=h.alternate;if(K!==null){var G=K.child;if(G!==null){K.child=null;do{var De=G.sibling;G.sibling=null,G=De}while(G!==null)}}W=h}}if((h.subtreeFlags&2064)!==0&&m!==null)m.return=h,W=m;else e:for(;W!==null;){if(h=W,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:es(9,h,h.return)}var E=h.sibling;if(E!==null){E.return=h.return,W=E;break e}W=h.return}}var _=e.current;for(W=_;W!==null;){m=W;var N=m.child;if((m.subtreeFlags&2064)!==0&&N!==null)N.return=m,W=N;else e:for(m=_;W!==null;){if(v=W,(v.flags&2048)!==0)try{switch(v.tag){case 0:case 11:case 15:ui(9,v)}}catch(Q){Ae(v,v.return,Q)}if(v===m){W=null;break e}var M=v.sibling;if(M!==null){M.return=v.return,W=M;break e}W=v.return}}if(me=l,ir(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(bs,e)}catch{}o=!0}return o}finally{xe=n,bt.transition=t}}return!1}function Xc(e,t,n){t=rn(n,t),t=gc(e,t,1),e=ar(e,t,1),t=nt(),e!==null&&(Nn(e,1,t),lt(e,t))}function Ae(e,t,n){if(e.tag===3)Xc(e,e,n);else for(;t!==null;){if(t.tag===3){Xc(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ur===null||!ur.has(o))){e=rn(n,e),e=yc(t,e,1),t=ar(t,e,1),e=nt(),t!==null&&(Nn(t,1,e),lt(t,e));break}}t=t.return}}function Wf(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=nt(),e.pingedLanes|=e.suspendedLanes&n,Ve===e&&(Ge&n)===n&&(Be===4||Be===3&&(Ge&130023424)===Ge&&500>$e()-ya?Nr(e,0):ga|=n),lt(e,t)}function Zc(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ss,Ss<<=1,(Ss&130023424)===0&&(Ss=4194304)));var n=nt();e=qt(e,t),e!==null&&(Nn(e,t,n),lt(e,n))}function Hf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zc(e,n)}function Kf(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(s(314))}o!==null&&o.delete(t),Zc(e,n)}var ed;ed=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||st.current)ot=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return ot=!1,If(e,t,n);ot=(e.flags&131072)!==0}else ot=!1,Ce&&(t.flags&1048576)!==0&&Au(t,Hs,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;ai(e,t),e=t.pendingProps;var l=Gr(t,Xe.current);en(t,n),l=Go(null,t,o,e,l,n);var h=Jo();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,it(o)?(h=!0,qs(t)):h=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Bo(t),l.updater=ii,t.stateNode=l,l._reactInternals=t,ta(t,o,e,n),t=ia(null,t,o,!0,h,n)):(t.tag=0,Ce&&h&&Ro(t),rt(null,t,l,n),t=t.child),t;case 16:o=t.elementType;e:{switch(ai(e,t),e=t.pendingProps,l=o._init,o=l(o._payload),t.type=o,l=t.tag=Jf(o),e=Nt(o,e),l){case 0:t=sa(null,t,o,e,n);break e;case 1:t=Ec(null,t,o,e,n);break e;case 11:t=_c(null,t,o,e,n);break e;case 14:t=bc(null,t,o,Nt(o.type,e),n);break e}throw Error(s(306,o,""))}return t;case 0:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Nt(o,l),sa(e,t,o,l,n);case 1:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Nt(o,l),Ec(e,t,o,l,n);case 3:e:{if(Nc(t),e===null)throw Error(s(387));o=t.pendingProps,h=t.memoizedState,l=h.element,Fu(e,t),Xs(t,o,null,n);var m=t.memoizedState;if(o=m.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){l=rn(Error(s(423)),t),t=Tc(e,t,o,n,l);break e}else if(o!==l){l=rn(Error(s(424)),t),t=Tc(e,t,o,n,l);break e}else for(ft=rr(t.stateNode.containerInfo.firstChild),ht=t,Ce=!0,Et=null,n=Mu(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yr(),o===l){t=Wt(e,t,n);break e}rt(e,t,o,n)}t=t.child}return t;case 5:return Wu(t),e===null&&Io(t),o=t.type,l=t.pendingProps,h=e!==null?e.memoizedProps:null,m=l.children,jo(o,l)?m=null:h!==null&&jo(o,h)&&(t.flags|=32),jc(e,t),rt(e,t,m,n),t.child;case 6:return e===null&&Io(t),null;case 13:return Cc(e,t,n);case 4:return Fo(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Xr(t,null,o,n):rt(e,t,o,n),t.child;case 11:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Nt(o,l),_c(e,t,o,l,n);case 7:return rt(e,t,t.pendingProps,n),t.child;case 8:return rt(e,t,t.pendingProps.children,n),t.child;case 12:return rt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,l=t.pendingProps,h=t.memoizedProps,m=l.value,be(Js,o._currentValue),o._currentValue=m,h!==null)if(jt(h.value,m)){if(h.children===l.children&&!st.current){t=Wt(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var v=h.dependencies;if(v!==null){m=h.child;for(var x=v.firstContext;x!==null;){if(x.context===o){if(h.tag===1){x=Vt(-1,n&-n),x.tag=2;var O=h.updateQueue;if(O!==null){O=O.shared;var L=O.pending;L===null?x.next=x:(x.next=L.next,L.next=x),O.pending=x}}h.lanes|=n,x=h.alternate,x!==null&&(x.lanes|=n),zo(h.return,n,t),v.lanes|=n;break}x=x.next}}else if(h.tag===10)m=h.type===t.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(s(341));m.lanes|=n,v=m.alternate,v!==null&&(v.lanes|=n),zo(m,n,t),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===t){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}rt(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,o=t.pendingProps.children,en(t,n),l=xt(l),o=o(l),t.flags|=1,rt(e,t,o,n),t.child;case 14:return o=t.type,l=Nt(o,t.pendingProps),l=Nt(o.type,l),bc(e,t,o,l,n);case 15:return kc(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Nt(o,l),ai(e,t),t.tag=1,it(o)?(e=!0,qs(t)):e=!1,en(t,n),pc(t,o,l),ta(t,o,l,n),ia(null,t,o,!0,e,n);case 19:return Rc(e,t,n);case 22:return Sc(e,t,n)}throw Error(s(156,t.tag))};function td(e,t){return Il(e,t)}function Gf(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,n,o){return new Gf(e,t,n,o)}function ja(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jf(e){if(typeof e=="function")return ja(e)?1:0;if(e!=null){if(e=e.$$typeof,e===de)return 11;if(e===Ye)return 14}return 2}function fr(e,t){var n=e.alternate;return n===null?(n=kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function vi(e,t,n,o,l,h){var m=2;if(o=e,typeof e=="function")ja(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case J:return Cr(n.children,l,h,t);case Se:m=8,l|=8;break;case A:return e=kt(12,n,t,l|2),e.elementType=A,e.lanes=h,e;case je:return e=kt(13,n,t,l),e.elementType=je,e.lanes=h,e;case ze:return e=kt(19,n,t,l),e.elementType=ze,e.lanes=h,e;case pe:return wi(n,l,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ie:m=10;break e;case ue:m=9;break e;case de:m=11;break e;case Ye:m=14;break e;case le:m=16,o=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=kt(m,n,t,l),t.elementType=e,t.type=o,t.lanes=h,t}function Cr(e,t,n,o){return e=kt(7,e,o,t),e.lanes=n,e}function wi(e,t,n,o){return e=kt(22,e,o,t),e.elementType=pe,e.lanes=n,e.stateNode={isHidden:!1},e}function Ea(e,t,n){return e=kt(6,e,null,t),e.lanes=n,e}function Na(e,t,n){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qf(e,t,n,o,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zi(0),this.expirationTimes=Zi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zi(0),this.identifierPrefix=o,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Ta(e,t,n,o,l,h,m,v,x){return e=new Qf(e,t,n,v,x),t===1?(t=1,h===!0&&(t|=8)):t=0,h=kt(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bo(h),e}function Yf(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function rd(e){if(!e)return sr;e=e._reactInternals;e:{if(yr(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(it(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var n=e.type;if(it(n))return Ou(e,n,t)}return t}function nd(e,t,n,o,l,h,m,v,x){return e=Ta(n,o,!0,e,l,h,m,v,x),e.context=rd(null),n=e.current,o=nt(),l=dr(n),h=Vt(o,l),h.callback=t??null,ar(n,h,l),e.current.lanes=l,Nn(e,l,o),lt(e,o),e}function xi(e,t,n,o){var l=t.current,h=nt(),m=dr(l);return n=rd(n),t.context===null?t.context=n:t.pendingContext=n,t=Vt(h,m),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=ar(l,t,m),e!==null&&(Ot(e,l,m,h),Ys(e,l,m)),m}function _i(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function sd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ca(e,t){sd(e,t),(e=e.alternate)&&sd(e,t)}function Xf(){return null}var id=typeof reportError=="function"?reportError:function(e){console.error(e)};function Oa(e){this._internalRoot=e}bi.prototype.render=Oa.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));xi(e,t,null,null)},bi.prototype.unmount=Oa.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Er(function(){xi(null,e,null,null)}),t[zt]=null}};function bi(e){this._internalRoot=e}bi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fl();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zt.length&&t!==0&&t<Zt[n].priority;n++);Zt.splice(n,0,e),n===0&&Wl(e)}};function Ra(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ki(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function od(){}function Zf(e,t,n,o,l){if(l){if(typeof o=="function"){var h=o;o=function(){var O=_i(m);h.call(O)}}var m=nd(t,o,e,0,null,!1,!1,"",od);return e._reactRootContainer=m,e[zt]=m.current,Bn(e.nodeType===8?e.parentNode:e),Er(),m}for(;l=e.lastChild;)e.removeChild(l);if(typeof o=="function"){var v=o;o=function(){var O=_i(x);v.call(O)}}var x=Ta(e,0,!1,null,null,!1,!1,"",od);return e._reactRootContainer=x,e[zt]=x.current,Bn(e.nodeType===8?e.parentNode:e),Er(function(){xi(t,x,n,o)}),x}function Si(e,t,n,o,l){var h=n._reactRootContainer;if(h){var m=h;if(typeof l=="function"){var v=l;l=function(){var x=_i(m);v.call(x)}}xi(t,m,e,l)}else m=Zf(n,t,e,l,o);return _i(m)}Ml=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=En(t.pendingLanes);n!==0&&(eo(t,n|1),lt(t,$e()),(me&6)===0&&(on=$e()+500,ir()))}break;case 13:Er(function(){var o=qt(e,1);if(o!==null){var l=nt();Ot(o,e,1,l)}}),Ca(e,1)}},to=function(e){if(e.tag===13){var t=qt(e,134217728);if(t!==null){var n=nt();Ot(t,e,134217728,n)}Ca(e,134217728)}},Bl=function(e){if(e.tag===13){var t=dr(e),n=qt(e,t);if(n!==null){var o=nt();Ot(n,e,t,o)}Ca(e,t)}},Fl=function(){return xe},ql=function(e,t){var n=xe;try{return xe=e,t()}finally{xe=n}},Ki=function(e,t,n){switch(t){case"input":if(zi(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var l=Bs(o);if(!l)throw Error(s(90));fl(o),zi(o,l)}}}break;case"textarea":vl(e,n);break;case"select":t=n.value,t!=null&&Dr(e,!!n.multiple,t,!1)}},Nl=ba,Tl=Er;var ep={usingClientEntryPoint:!1,Events:[Vn,Hr,Bs,jl,El,ba]},ss={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tp={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Pl(e),e===null?null:e.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||Xf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ji=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ji.isDisabled&&ji.supportsFiber)try{bs=ji.inject(tp),It=ji}catch{}}return ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ep,ut.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ra(t))throw Error(s(200));return Yf(e,t,null,n)},ut.createRoot=function(e,t){if(!Ra(e))throw Error(s(299));var n=!1,o="",l=id;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Ta(e,1,!1,null,null,n,!1,o,l),e[zt]=t.current,Bn(e.nodeType===8?e.parentNode:e),new Oa(t)},ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Pl(t),e=e===null?null:e.stateNode,e},ut.flushSync=function(e){return Er(e)},ut.hydrate=function(e,t,n){if(!ki(t))throw Error(s(200));return Si(null,e,t,!0,n)},ut.hydrateRoot=function(e,t,n){if(!Ra(e))throw Error(s(405));var o=n!=null&&n.hydratedSources||null,l=!1,h="",m=id;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),t=nd(t,null,e,1,n??null,l,!1,h,m),e[zt]=t.current,Bn(e),o)for(e=0;e<o.length;e++)n=o[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new bi(t)},ut.render=function(e,t,n){if(!ki(t))throw Error(s(200));return Si(null,e,t,!1,n)},ut.unmountComponentAtNode=function(e){if(!ki(e))throw Error(s(40));return e._reactRootContainer?(Er(function(){Si(null,null,e,!1,function(){e._reactRootContainer=null,e[zt]=null})}),!0):!1},ut.unstable_batchedUpdates=ba,ut.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!ki(n))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Si(e,t,n,!1,o)},ut.version="18.3.1-next-f1338f8080-20240426",ut}var pd;function up(){if(pd)return Ia.exports;pd=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),Ia.exports=lp(),Ia.exports}var md;function cp(){if(md)return Ei;md=1;var i=up();return Ei.createRoot=i.createRoot,Ei.hydrateRoot=i.hydrateRoot,Ei}var dp=cp();function $i(i,r){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&r.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(i);u<a.length;u++)r.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(i,a[u])&&(s[a[u]]=i[a[u]]);return s}function hp(i,r,s,a){function u(c){return c instanceof s?c:new s(function(f){f(c)})}return new(s||(s=Promise))(function(c,f){function g(w){try{y(a.next(w))}catch(k){f(k)}}function p(w){try{y(a.throw(w))}catch(k){f(k)}}function y(w){w.done?c(w.value):u(w.value).then(g,p)}y((a=a.apply(i,r||[])).next())})}const fp=i=>i?(...r)=>i(...r):(...r)=>fetch(...r);class il extends Error{constructor(r,s="FunctionsError",a){super(r),this.name=s,this.context=a}}class pp extends il{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class gd extends il{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class yd extends il{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Ha;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Ha||(Ha={}));class mp{constructor(r,{headers:s={},customFetch:a,region:u=Ha.Any}={}){this.url=r,this.headers=s,this.region=u,this.fetch=fp(a)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return hp(this,arguments,void 0,function*(s,a={}){var u;let c,f;try{const{headers:g,method:p,body:y,signal:w,timeout:k}=a;let j={},{region:T}=a;T||(T=this.region);const R=new URL(`${this.url}/${s}`);T&&T!=="any"&&(j["x-region"]=T,R.searchParams.set("forceFunctionRegion",T));let C;y&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(j["Content-Type"]="application/octet-stream",C=y):typeof y=="string"?(j["Content-Type"]="text/plain",C=y):typeof FormData<"u"&&y instanceof FormData?C=y:(j["Content-Type"]="application/json",C=JSON.stringify(y)):y&&typeof y!="string"&&!(typeof Blob<"u"&&y instanceof Blob)&&!(y instanceof ArrayBuffer)&&!(typeof FormData<"u"&&y instanceof FormData)?C=JSON.stringify(y):C=y;let b=w;k&&(f=new AbortController,c=setTimeout(()=>f.abort(),k),w?(b=f.signal,w.addEventListener("abort",()=>f.abort())):b=f.signal);const P=yield this.fetch(R.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},j),this.headers),g),body:C,signal:b}).catch(ae=>{throw new pp(ae)}),B=P.headers.get("x-relay-error");if(B&&B==="true")throw new gd(P);if(!P.ok)throw new yd(P);let z=((u=P.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),q;return z==="application/json"?q=yield P.json():z==="application/octet-stream"||z==="application/pdf"?q=yield P.blob():z==="text/event-stream"?q=P:z==="multipart/form-data"?q=yield P.formData():q=yield P.text(),{data:q,error:null,response:P}}catch(g){return{data:null,error:g,response:g instanceof yd||g instanceof gd?g.context:void 0}}finally{c&&clearTimeout(c)}})}}var gp=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},yp=class{constructor(i){var r,s;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(r=i.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=i.signal,this.isMaybeSingle=(s=i.isMaybeSingle)!==null&&s!==void 0?s:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,r){return this.headers=new Headers(this.headers),this.headers.set(i,r),this}then(i,r){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let u=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let f=null,g=null,p=null,y=c.status,w=c.statusText;if(c.ok){var k,j;if(s.method!=="HEAD"){var T;const P=await c.text();P===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((T=s.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?g=P:g=JSON.parse(P))}const C=(k=s.headers.get("Prefer"))===null||k===void 0?void 0:k.match(/count=(exact|planned|estimated)/),b=(j=c.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");C&&b&&b.length>1&&(p=parseInt(b[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,p=null,y=406,w="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var R;const C=await c.text();try{f=JSON.parse(C),Array.isArray(f)&&c.status===404&&(g=[],f=null,y=200,w="OK")}catch{c.status===404&&C===""?(y=204,w="No Content"):f={message:C}}if(f&&s.isMaybeSingle&&(!(f==null||(R=f.details)===null||R===void 0)&&R.includes("0 rows"))&&(f=null,y=200,w="OK"),f&&s.shouldThrowOnError)throw new gp(f)}return{error:f,data:g,count:p,status:y,statusText:w}});return this.shouldThrowOnError||(u=u.catch(c=>{var f;let g="";const p=c?.cause;if(p){var y,w,k,j;const R=(y=p?.message)!==null&&y!==void 0?y:"",C=(w=p?.code)!==null&&w!==void 0?w:"";g=`${(k=c?.name)!==null&&k!==void 0?k:"FetchError"}: ${c?.message}`,g+=`

Caused by: ${(j=p?.name)!==null&&j!==void 0?j:"Error"}: ${R}`,C&&(g+=` (${C})`),p?.stack&&(g+=`
${p.stack}`)}else{var T;g=(T=c?.stack)!==null&&T!==void 0?T:""}return{error:{message:`${(f=c?.name)!==null&&f!==void 0?f:"FetchError"}: ${c?.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),u.then(i,r)}returns(){return this}overrideTypes(){return this}},vp=class extends yp{select(i){let r=!1;const s=(i??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:r=!0,nullsFirst:s,foreignTable:a,referencedTable:u=a}={}){const c=u?`${u}.order`:"order",f=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${f?`${f},`:""}${i}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,r,{foreignTable:s,referencedTable:a=s}={}){const u=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(c,`${r-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:r=!1,settings:s=!1,buffers:a=!1,wal:u=!1,format:c="text"}={}){var f;const g=[i?"analyze":null,r?"verbose":null,s?"settings":null,a?"buffers":null,u?"wal":null].filter(Boolean).join("|"),p=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${g};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const vd=new RegExp("[,()]");var pn=class extends vp{eq(i,r){return this.url.searchParams.append(i,`eq.${r}`),this}neq(i,r){return this.url.searchParams.append(i,`neq.${r}`),this}gt(i,r){return this.url.searchParams.append(i,`gt.${r}`),this}gte(i,r){return this.url.searchParams.append(i,`gte.${r}`),this}lt(i,r){return this.url.searchParams.append(i,`lt.${r}`),this}lte(i,r){return this.url.searchParams.append(i,`lte.${r}`),this}like(i,r){return this.url.searchParams.append(i,`like.${r}`),this}likeAllOf(i,r){return this.url.searchParams.append(i,`like(all).{${r.join(",")}}`),this}likeAnyOf(i,r){return this.url.searchParams.append(i,`like(any).{${r.join(",")}}`),this}ilike(i,r){return this.url.searchParams.append(i,`ilike.${r}`),this}ilikeAllOf(i,r){return this.url.searchParams.append(i,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(i,r){return this.url.searchParams.append(i,`ilike(any).{${r.join(",")}}`),this}regexMatch(i,r){return this.url.searchParams.append(i,`match.${r}`),this}regexIMatch(i,r){return this.url.searchParams.append(i,`imatch.${r}`),this}is(i,r){return this.url.searchParams.append(i,`is.${r}`),this}isDistinct(i,r){return this.url.searchParams.append(i,`isdistinct.${r}`),this}in(i,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&vd.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${s})`),this}notIn(i,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&vd.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`not.in.(${s})`),this}contains(i,r){return typeof r=="string"?this.url.searchParams.append(i,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(i,`cs.{${r.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(r)}`),this}containedBy(i,r){return typeof r=="string"?this.url.searchParams.append(i,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(i,`cd.{${r.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(r)}`),this}rangeGt(i,r){return this.url.searchParams.append(i,`sr.${r}`),this}rangeGte(i,r){return this.url.searchParams.append(i,`nxl.${r}`),this}rangeLt(i,r){return this.url.searchParams.append(i,`sl.${r}`),this}rangeLte(i,r){return this.url.searchParams.append(i,`nxr.${r}`),this}rangeAdjacent(i,r){return this.url.searchParams.append(i,`adj.${r}`),this}overlaps(i,r){return typeof r=="string"?this.url.searchParams.append(i,`ov.${r}`):this.url.searchParams.append(i,`ov.{${r.join(",")}}`),this}textSearch(i,r,{config:s,type:a}={}){let u="";a==="plain"?u="pl":a==="phrase"?u="ph":a==="websearch"&&(u="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(i,`${u}fts${c}.${r}`),this}match(i){return Object.entries(i).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(i,r,s){return this.url.searchParams.append(i,`not.${r}.${s}`),this}or(i,{foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,r,s){return this.url.searchParams.append(i,`${r}.${s}`),this}},wp=class{constructor(i,{headers:r={},schema:s,fetch:a}){this.url=i,this.headers=new Headers(r),this.schema=s,this.fetch=a}select(i,r){const{head:s=!1,count:a}=r??{},u=s?"HEAD":"GET";let c=!1;const f=(i??"*").split("").map(g=>/\s/.test(g)&&!c?"":(g==='"'&&(c=!c),g)).join("");return this.url.searchParams.set("select",f),a&&this.headers.append("Prefer",`count=${a}`),new pn({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:r,defaultToNull:s=!0}={}){var a;const u="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(c.length>0){const f=[...new Set(c)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new pn({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:u=!0}={}){var c;const f="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const g=i.reduce((p,y)=>p.concat(Object.keys(y)),[]);if(g.length>0){const p=[...new Set(g)].map(y=>`"${y}"`);this.url.searchParams.set("columns",p.join(","))}}return new pn({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:r}={}){var s;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new pn({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var r;const s="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new pn({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},xp=class Md{constructor(r,{headers:s={},schema:a,fetch:u}={}){this.url=r,this.headers=new Headers(s),this.schemaName=a,this.fetch=u}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new wp(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new Md(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,s={},{head:a=!1,get:u=!1,count:c}={}){var f;let g;const p=new URL(`${this.url}/rpc/${r}`);let y;const w=T=>T!==null&&typeof T=="object"&&(!Array.isArray(T)||T.some(w)),k=a&&Object.values(s).some(w);k?(g="POST",y=s):a||u?(g=a?"HEAD":"GET",Object.entries(s).filter(([T,R])=>R!==void 0).map(([T,R])=>[T,Array.isArray(R)?`{${R.join(",")}}`:`${R}`]).forEach(([T,R])=>{p.searchParams.append(T,R)})):(g="POST",y=s);const j=new Headers(this.headers);return k?j.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&j.set("Prefer",`count=${c}`),new pn({method:g,url:p,headers:j,schema:this.schemaName,body:y,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class _p{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const a=s.versions;if(a&&a.node){const u=a.node,c=parseInt(u.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let s=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(s+=`

Suggested solution: ${r.workaround}`),new Error(s)}static createWebSocket(r,s){const a=this.getWebSocketConstructor();return new a(r,s)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const bp="2.90.0",kp=`realtime-js/${bp}`,Bd="1.0.0",Sp="2.0.0",wd=Bd,Ka=1e4,jp=1e3,Ep=100;var mr;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(mr||(mr={}));var Fe;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Fe||(Fe={}));var At;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(At||(At={}));var Ga;(function(i){i.websocket="websocket"})(Ga||(Ga={}));var Ar;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Ar||(Ar={}));class Np{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,s){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(r));let a=[r.join_ref,r.ref,r.topic,r.event,r.payload];return s(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(r){var s;return this._isArrayBuffer((s=r.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var s,a;const u=(a=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(r){var s,a;const u=(a=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:{},f=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(r,s,a){var u,c;const f=r.topic,g=(u=r.ref)!==null&&u!==void 0?u:"",p=(c=r.join_ref)!==null&&c!==void 0?c:"",y=r.payload.event,w=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},k=Object.keys(w).length===0?"":JSON.stringify(w);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(k.length>255)throw new Error(`metadata length ${k.length} exceeds maximum of 255`);const j=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+g.length+f.length+y.length+k.length,T=new ArrayBuffer(this.HEADER_LENGTH+j);let R=new DataView(T),C=0;R.setUint8(C++,this.KINDS.userBroadcastPush),R.setUint8(C++,p.length),R.setUint8(C++,g.length),R.setUint8(C++,f.length),R.setUint8(C++,y.length),R.setUint8(C++,k.length),R.setUint8(C++,s),Array.from(p,P=>R.setUint8(C++,P.charCodeAt(0))),Array.from(g,P=>R.setUint8(C++,P.charCodeAt(0))),Array.from(f,P=>R.setUint8(C++,P.charCodeAt(0))),Array.from(y,P=>R.setUint8(C++,P.charCodeAt(0))),Array.from(k,P=>R.setUint8(C++,P.charCodeAt(0)));var b=new Uint8Array(T.byteLength+a.byteLength);return b.set(new Uint8Array(T),0),b.set(new Uint8Array(a),T.byteLength),b.buffer}decode(r,s){if(this._isArrayBuffer(r)){let a=this._binaryDecode(r);return s(a)}if(typeof r=="string"){const a=JSON.parse(r),[u,c,f,g,p]=a;return s({join_ref:u,ref:c,topic:f,event:g,payload:p})}return s({})}_binaryDecode(r){const s=new DataView(r),a=s.getUint8(0),u=new TextDecoder;if(a===this.KINDS.userBroadcast)return this._decodeUserBroadcast(r,s,u)}_decodeUserBroadcast(r,s,a){const u=s.getUint8(1),c=s.getUint8(2),f=s.getUint8(3),g=s.getUint8(4);let p=this.HEADER_LENGTH+4;const y=a.decode(r.slice(p,p+u));p=p+u;const w=a.decode(r.slice(p,p+c));p=p+c;const k=a.decode(r.slice(p,p+f));p=p+f;const j=r.slice(p,r.byteLength),T=g===this.JSON_ENCODING?JSON.parse(a.decode(j)):j,R={type:this.BROADCAST_EVENT,event:w,payload:T};return f>0&&(R.meta=JSON.parse(k)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:R}}_isArrayBuffer(r){var s;return r instanceof ArrayBuffer||((s=r?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(r,s){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([a])=>s.includes(a)))}}class Fd{constructor(r,s){this.callback=r,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ke;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(ke||(ke={}));const xd=(i,r,s={})=>{var a;const u=(a=s.skipTypes)!==null&&a!==void 0?a:[];return r?Object.keys(r).reduce((c,f)=>(c[f]=Tp(f,i,r,u),c),{}):{}},Tp=(i,r,s,a)=>{const u=r.find(g=>g.name===i),c=u?.type,f=s[i];return c&&!a.includes(c)?qd(c,f):Ja(f)},qd=(i,r)=>{if(i.charAt(0)==="_"){const s=i.slice(1,i.length);return Pp(r,s)}switch(i){case ke.bool:return Cp(r);case ke.float4:case ke.float8:case ke.int2:case ke.int4:case ke.int8:case ke.numeric:case ke.oid:return Op(r);case ke.json:case ke.jsonb:return Rp(r);case ke.timestamp:return Ap(r);case ke.abstime:case ke.date:case ke.daterange:case ke.int4range:case ke.int8range:case ke.money:case ke.reltime:case ke.text:case ke.time:case ke.timestamptz:case ke.timetz:case ke.tsrange:case ke.tstzrange:return Ja(r);default:return Ja(r)}},Ja=i=>i,Cp=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Op=i=>{if(typeof i=="string"){const r=parseFloat(i);if(!Number.isNaN(r))return r}return i},Rp=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},Pp=(i,r)=>{if(typeof i!="string")return i;const s=i.length-1,a=i[s];if(i[0]==="{"&&a==="}"){let c;const f=i.slice(1,s);try{c=JSON.parse("["+f+"]")}catch{c=f?f.split(","):[]}return c.map(g=>qd(r,g))}return i},Ap=i=>typeof i=="string"?i.replace(" ","T"):i,Vd=i=>{const r=new URL(i);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class La{constructor(r,s,a={},u=Ka){this.channel=r,this.event=s,this.payload=a,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,s){var a;return this._hasReceived(r)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:r,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:s}){this.recHooks.filter(a=>a.status===r).forEach(a=>a.callback(s))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var _d;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(_d||(_d={}));class as{constructor(r,s){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},u=>{const{onJoin:c,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=as.syncState(this.state,u,c,f),this.pendingDiffs.forEach(p=>{this.state=as.syncDiff(this.state,p,c,f)}),this.pendingDiffs=[],g()}),this.channel._on(a.diff,{},u=>{const{onJoin:c,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=as.syncDiff(this.state,u,c,f),g())}),this.onJoin((u,c,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:c,newPresences:f})}),this.onLeave((u,c,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:c,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,s,a,u){const c=this.cloneDeep(r),f=this.transformState(s),g={},p={};return this.map(c,(y,w)=>{f[y]||(p[y]=w)}),this.map(f,(y,w)=>{const k=c[y];if(k){const j=w.map(b=>b.presence_ref),T=k.map(b=>b.presence_ref),R=w.filter(b=>T.indexOf(b.presence_ref)<0),C=k.filter(b=>j.indexOf(b.presence_ref)<0);R.length>0&&(g[y]=R),C.length>0&&(p[y]=C)}else g[y]=w}),this.syncDiff(c,{joins:g,leaves:p},a,u)}static syncDiff(r,s,a,u){const{joins:c,leaves:f}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),u||(u=()=>{}),this.map(c,(g,p)=>{var y;const w=(y=r[g])!==null&&y!==void 0?y:[];if(r[g]=this.cloneDeep(p),w.length>0){const k=r[g].map(T=>T.presence_ref),j=w.filter(T=>k.indexOf(T.presence_ref)<0);r[g].unshift(...j)}a(g,w,p)}),this.map(f,(g,p)=>{let y=r[g];if(!y)return;const w=p.map(k=>k.presence_ref);y=y.filter(k=>w.indexOf(k.presence_ref)<0),r[g]=y,u(g,y,p),y.length===0&&delete r[g]}),r}static map(r,s){return Object.getOwnPropertyNames(r).map(a=>s(a,r[a]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((s,a)=>{const u=r[a];return"metas"in u?s[a]=u.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[a]=u,s},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bd;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(bd||(bd={}));var ls;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(ls||(ls={}));var Kt;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Kt||(Kt={}));class yn{constructor(r,s={config:{}},a){var u,c;if(this.topic=r,this.params=s,this.socket=a,this.bindings={},this.state=Fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new La(this,At.join,this.params,this.timeout),this.rejoinTimer=new Fd(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fe.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(At.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new as(this),this.broadcastEndpointURL=Vd(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,s=this.timeout){var a,u,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Fe.closed){const{config:{broadcast:f,presence:g,private:p}}=this.params,y=(u=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(T=>T.filter))!==null&&u!==void 0?u:[],w=!!this.bindings[ls.PRESENCE]&&this.bindings[ls.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,k={},j={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:w}),postgres_changes:y,private:p};this.socket.accessTokenValue&&(k.access_token=this.socket.accessTokenValue),this._onError(T=>r?.(Kt.CHANNEL_ERROR,T)),this._onClose(()=>r?.(Kt.CLOSED)),this.updateJoinPayload(Object.assign({config:j},k)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:T})=>{var R;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){r?.(Kt.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,b=(R=C?.length)!==null&&R!==void 0?R:0,P=[];for(let B=0;B<b;B++){const z=C[B],{filter:{event:q,schema:ae,table:I,filter:J}}=z,Se=T&&T[B];if(Se&&Se.event===q&&yn.isFilterValueEqual(Se.schema,ae)&&yn.isFilterValueEqual(Se.table,I)&&yn.isFilterValueEqual(Se.filter,J))P.push(Object.assign(Object.assign({},z),{id:Se.id}));else{this.unsubscribe(),this.state=Fe.errored,r?.(Kt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,r&&r(Kt.SUBSCRIBED);return}}).receive("error",T=>{this.state=Fe.errored,r?.(Kt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{r?.(Kt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,s={}){return await this.send({type:"presence",event:"track",payload:r},s.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,s,a){return this.state===Fe.joined&&r===ls.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,s,a)}async httpSend(r,s,a={}){var u;if(s==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:s,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=a.timeout)!==null&&u!==void 0?u:this.timeout);if(g.status===202)return{success:!0};let p=g.statusText;try{const y=await g.json();p=y.error||y.message||p}catch{}return Promise.reject(new Error(p))}async send(r,s={}){var a,u;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:f}=r,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:f,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((u=y.body)===null||u===void 0?void 0:u.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var f,g,p;const y=this._push(r.type,r,s.timeout||this.timeout);r.type==="broadcast"&&!(!((p=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||p===void 0)&&p.ack)&&c("ok"),y.receive("ok",()=>c("ok")),y.receive("error",()=>c("error")),y.receive("timeout",()=>c("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Fe.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(At.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(u=>{a=new La(this,At.leave,{},r),a.receive("ok",()=>{s(),u("ok")}).receive("timeout",()=>{s(),u("timed out")}).receive("error",()=>{u("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fe.closed,this.bindings={}}async _fetchWithTimeout(r,s,a){const u=new AbortController,c=setTimeout(()=>u.abort(),a),f=await this.socket.fetch(r,Object.assign(Object.assign({},s),{signal:u.signal}));return clearTimeout(c),f}_push(r,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new La(this,r,s,a);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Ep){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(r,s,a){return s}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,s,a){var u,c;const f=r.toLocaleLowerCase(),{close:g,error:p,leave:y,join:w}=At;if(a&&[g,p,y,w].indexOf(f)>=0&&a!==this._joinRef())return;let j=this._onMessage(f,s,a);if(s&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(T=>{var R,C,b;return((R=T.filter)===null||R===void 0?void 0:R.event)==="*"||((b=(C=T.filter)===null||C===void 0?void 0:C.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===f}).map(T=>T.callback(j,a)):(c=this.bindings[f])===null||c===void 0||c.filter(T=>{var R,C,b,P,B,z;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in T){const q=T.id,ae=(R=T.filter)===null||R===void 0?void 0:R.event;return q&&((C=s.ids)===null||C===void 0?void 0:C.includes(q))&&(ae==="*"||ae?.toLocaleLowerCase()===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const q=(B=(P=T?.filter)===null||P===void 0?void 0:P.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return q==="*"||q===((z=s?.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===f}).map(T=>{if(typeof j=="object"&&"ids"in j){const R=j.data,{schema:C,table:b,commit_timestamp:P,type:B,errors:z}=R;j=Object.assign(Object.assign({},{schema:C,table:b,commit_timestamp:P,eventType:B,new:{},old:{},errors:z}),this._getPayloadRecords(R))}T.callback(j,a)})}_isClosed(){return this.state===Fe.closed}_isJoined(){return this.state===Fe.joined}_isJoining(){return this.state===Fe.joining}_isLeaving(){return this.state===Fe.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,s,a){const u=r.toLocaleLowerCase(),c={type:u,filter:s,callback:a};return this.bindings[u]?this.bindings[u].push(c):this.bindings[u]=[c],this}_off(r,s){const a=r.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(u=>{var c;return!(((c=u.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&yn.isEqual(u.filter,s))})),this}static isEqual(r,s){if(Object.keys(r).length!==Object.keys(s).length)return!1;for(const a in r)if(r[a]!==s[a])return!1;return!0}static isFilterValueEqual(r,s){return(r??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(At.close,{},r)}_onError(r){this._on(At.error,{},s=>r(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fe.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const s={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(s.new=xd(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(s.old=xd(r.columns,r.old_record)),s}}const Ua=()=>{},Ni={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ip=[1e3,2e3,5e3,1e4],$p=1e4,Dp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Lp{constructor(r,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ka,this.transport=null,this.heartbeatIntervalMs=Ni.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ua,this.ref=0,this.reconnectTimer=null,this.vsn=wd,this.logger=Ua,this.conn=null,this.sendBuffer=[],this.serializer=new Np,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...c)=>u(...c):(...c)=>fetch(...c),!(!((a=s?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${r}/${Ga.websocket}`,this.httpEndpoint=Vd(r),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_p.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const s=r.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const s=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const r=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,s,a){this.logger(r,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case mr.connecting:return Ar.Connecting;case mr.open:return Ar.Open;case mr.closing:return Ar.Closing;default:return Ar.Closed}}isConnected(){return this.connectionState()===Ar.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,s={config:{}}){const a=`realtime:${r}`,u=this.getChannels().find(c=>c.topic===a);if(u)return u;{const c=new yn(`realtime:${r}`,s,this);return this.channels.push(c),c}}push(r){const{topic:s,event:a,payload:u,ref:c}=r,f=()=>{this.encode(r,g=>{var p;(p=this.conn)===null||p===void 0||p.send(g)})};this.log("push",`${s} ${a} (${c})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(jp,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Ni.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let s=this.channels.find(a=>a.topic===r&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${r}"`),s.unsubscribe())}_remove(r){this.channels=this.channels.filter(s=>s.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const y=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",y)}catch(w){this.log("error","error in heartbeat callback",w)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:u,payload:c,ref:f}=s,g=f?`(${f})`:"",p=c.status||"";this.log("receive",`${p} ${a} ${u} ${g}`.trim(),c),this.channels.filter(y=>y._isMember(a)).forEach(y=>y._trigger(u,c,f)),this._triggerStateCallbacks("message",s)})}_clearTimer(r){var s;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===mr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===mr.open||this.conn.readyState===mr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var s;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(At.error))}_appendParams(r,s){if(Object.keys(s).length===0)return r;const a=r.match(/\?/)?"&":"?",u=new URLSearchParams(s);return`${r}${a}${u}`}_workerObjectUrl(r){let s;if(r)s=r;else{const a=new Blob([Dp],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(r,s=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(r=null){let s,a=!1;if(r)s=r,a=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),s=this.accessTokenValue}else s=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(u=>{const c={access_token:s,version:kp};s&&u.updateJoinPayload(c),u.joinedOnce&&u._isJoined()&&u._push(At.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${r}`,s)})}_triggerStateCallbacks(r,s){try{this.stateChangeCallbacks[r].forEach(a=>{try{a(s)}catch(u){this.log("error",`error in ${r} callback`,u)}})}catch(a){this.log("error",`error triggering ${r} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Fd(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ni.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var s,a,u,c,f,g,p,y,w,k,j,T;switch(this.transport=(s=r?.transport)!==null&&s!==void 0?s:null,this.timeout=(a=r?.timeout)!==null&&a!==void 0?a:Ka,this.heartbeatIntervalMs=(u=r?.heartbeatIntervalMs)!==null&&u!==void 0?u:Ni.HEARTBEAT_INTERVAL,this.worker=(c=r?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(f=r?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=r?.heartbeatCallback)!==null&&g!==void 0?g:Ua,this.vsn=(p=r?.vsn)!==null&&p!==void 0?p:wd,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=r?.reconnectAfterMs)!==null&&y!==void 0?y:(R=>Ip[R-1]||$p),this.vsn){case Bd:this.encode=(w=r?.encode)!==null&&w!==void 0?w:((R,C)=>C(JSON.stringify(R))),this.decode=(k=r?.decode)!==null&&k!==void 0?k:((R,C)=>C(JSON.parse(R)));break;case Sp:this.encode=(j=r?.encode)!==null&&j!==void 0?j:this.serializer.encode.bind(this.serializer),this.decode=(T=r?.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var us=class extends Error{constructor(i,r){super(i),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Up(i,r,s){const a=new URL(r,i);if(s)for(const[u,c]of Object.entries(s))c!==void 0&&a.searchParams.set(u,c);return a.toString()}async function zp(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function Mp(i){const r=i.fetchImpl??globalThis.fetch;return{async request({method:s,path:a,query:u,body:c,headers:f}){const g=Up(i.baseUrl,a,u),p=await zp(i.auth),y=await r(g,{method:s,headers:{...c?{"Content-Type":"application/json"}:{},...p,...f},body:c?JSON.stringify(c):void 0}),w=await y.text(),k=(y.headers.get("content-type")||"").includes("application/json"),j=k&&w?JSON.parse(w):w;if(!y.ok){const T=k?j:void 0,R=T?.error;throw new us(R?.message??`Request failed with status ${y.status}`,{status:y.status,icebergType:R?.type,icebergCode:R?.code,details:T})}return{status:y.status,headers:y.headers,data:j}}}}function Ti(i){return i.join("")}var Bp=class{constructor(i,r=""){this.client=i,this.prefix=r}async listNamespaces(i){const r=i?{parent:Ti(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(i,r){const s={namespace:i.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ti(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ti(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ti(i.namespace)}`}),!0}catch(r){if(r instanceof us&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(i,r){try{return await this.createNamespace(i,r)}catch(s){if(s instanceof us&&s.status===409)return;throw s}}};function ln(i){return i.join("")}var Fp=class{constructor(i,r="",s){this.client=i,this.prefix=r,this.accessDelegation=s}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ln(i.namespace)}/tables`})).data.identifiers}async createTable(i,r){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ln(i.namespace)}/tables`,body:r,headers:s})).data.metadata}async updateTable(i,r){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ln(i.namespace)}/tables/${i.name}`,body:r});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(i,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ln(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(i){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ln(i.namespace)}/tables/${i.name}`,headers:r})).data.metadata}async tableExists(i){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ln(i.namespace)}/tables/${i.name}`,headers:r}),!0}catch(s){if(s instanceof us&&s.status===404)return!1;throw s}}async createTableIfNotExists(i,r){try{return await this.createTable(i,r)}catch(s){if(s instanceof us&&s.status===409)return await this.loadTable({namespace:i.namespace,name:r.name});throw s}}},qp=class{constructor(i){let r="v1";i.catalogName&&(r+=`/${i.catalogName}`);const s=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=Mp({baseUrl:s,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=i.accessDelegation?.join(","),this.namespaceOps=new Bp(this.client,r),this.tableOps=new Fp(this.client,r,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,r){return this.namespaceOps.createNamespace(i,r)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,r){return this.tableOps.createTable(i,r)}async updateTable(i,r){return this.tableOps.updateTable(i,r)}async dropTable(i,r){await this.tableOps.dropTable(i,r)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,r){return this.namespaceOps.createNamespaceIfNotExists(i,r)}async createTableIfNotExists(i,r){return this.tableOps.createTableIfNotExists(i,r)}},Di=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function Pe(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var Vp=class extends Di{constructor(i,r,s){super(i),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Qa=class extends Di{constructor(i,r){super(i),this.name="StorageUnknownError",this.originalError=r}};const ol=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Wp=()=>Response,Ya=i=>{if(Array.isArray(i))return i.map(s=>Ya(s));if(typeof i=="function"||i!==Object(i))return i;const r={};return Object.entries(i).forEach(([s,a])=>{const u=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));r[u]=Ya(a)}),r},Hp=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Kp=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function cs(i){"@babel/helpers - typeof";return cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},cs(i)}function Gp(i,r){if(cs(i)!="object"||!i)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var a=s.call(i,r);if(cs(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}function Jp(i){var r=Gp(i,"string");return cs(r)=="symbol"?r:r+""}function Qp(i,r,s){return(r=Jp(r))in i?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s,i}function kd(i,r){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);r&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),s.push.apply(s,a)}return s}function ne(i){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?kd(Object(s),!0).forEach(function(a){Qp(i,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):kd(Object(s)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(s,a))})}return i}const za=i=>{var r;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(r=i.error)===null||r===void 0?void 0:r.message)||JSON.stringify(i)},Yp=async(i,r,s)=>{i instanceof await Wp()&&!s?.noResolveJson?i.json().then(a=>{const u=i.status||500,c=a?.statusCode||u+"";r(new Vp(za(a),u,c))}).catch(a=>{r(new Qa(za(a),a))}):r(new Qa(za(i),i))},Xp=(i,r,s,a)=>{const u={method:i,headers:r?.headers||{}};return i==="GET"||!a?u:(Hp(a)?(u.headers=ne({"Content-Type":"application/json"},r?.headers),u.body=JSON.stringify(a)):u.body=a,r?.duplex&&(u.duplex=r.duplex),ne(ne({},u),s))};async function ms(i,r,s,a,u,c){return new Promise((f,g)=>{i(s,Xp(r,a,u,c)).then(p=>{if(!p.ok)throw p;return a?.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>Yp(p,g,a))})}async function ds(i,r,s,a){return ms(i,"GET",r,s,a)}async function Pt(i,r,s,a,u){return ms(i,"POST",r,a,u,s)}async function Xa(i,r,s,a,u){return ms(i,"PUT",r,a,u,s)}async function Zp(i,r,s,a){return ms(i,"HEAD",r,ne(ne({},s),{},{noResolveJson:!0}),a)}async function al(i,r,s,a,u){return ms(i,"DELETE",r,a,u,s)}var em=class{constructor(i,r){this.downloadFn=i,this.shouldThrowOnError=r}then(i,r){return this.execute().then(i,r)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Pe(r))return{data:null,error:r};throw r}}};let Wd;Wd=Symbol.toStringTag;var tm=class{constructor(i,r){this.downloadFn=i,this.shouldThrowOnError=r,this[Wd]="BlobDownloadBuilder",this.promise=null}asStream(){return new em(this.downloadFn,this.shouldThrowOnError)}then(i,r){return this.getPromise().then(i,r)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Pe(r))return{data:null,error:r};throw r}}};const rm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var nm=class{constructor(i,r={},s,a){this.shouldThrowOnError=!1,this.url=i,this.headers=r,this.bucketId=s,this.fetch=ol(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(i,r,s,a){var u=this;try{let c;const f=ne(ne({},Sd),a);let g=ne(ne({},u.headers),i==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),p&&c.append("metadata",u.encodeMetadata(p)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.has("cacheControl")||c.append("cacheControl",f.cacheControl),p&&!c.has("metadata")&&c.append("metadata",u.encodeMetadata(p))):(c=s,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,p&&(g["x-metadata"]=u.toBase64(u.encodeMetadata(p))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!f.duplex&&(f.duplex="half")),a?.headers&&(g=ne(ne({},g),a.headers));const y=u._removeEmptyFolders(r),w=u._getFinalPath(y),k=await(i=="PUT"?Xa:Pt)(u.fetch,`${u.url}/object/${w}`,c,ne({headers:g},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:y,id:k.Id,fullPath:k.Key},error:null}}catch(c){if(u.shouldThrowOnError)throw c;if(Pe(c))return{data:null,error:c};throw c}}async upload(i,r,s){return this.uploadOrUpdate("POST",i,r,s)}async uploadToSignedUrl(i,r,s,a){var u=this;const c=u._removeEmptyFolders(i),f=u._getFinalPath(c),g=new URL(u.url+`/object/upload/sign/${f}`);g.searchParams.set("token",r);try{let p;const y=ne({upsert:Sd.upsert},a),w=ne(ne({},u.headers),{"x-upsert":String(y.upsert)});return typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",y.cacheControl),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.append("cacheControl",y.cacheControl)):(p=s,w["cache-control"]=`max-age=${y.cacheControl}`,w["content-type"]=y.contentType),{data:{path:c,fullPath:(await Xa(u.fetch,g.toString(),p,{headers:w})).Key},error:null}}catch(p){if(u.shouldThrowOnError)throw p;if(Pe(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(i,r){var s=this;try{let a=s._getFinalPath(i);const u=ne({},s.headers);r?.upsert&&(u["x-upsert"]="true");const c=await Pt(s.fetch,`${s.url}/object/upload/sign/${a}`,{},{headers:u}),f=new URL(s.url+c.url),g=f.searchParams.get("token");if(!g)throw new Di("No token returned by API");return{data:{signedUrl:f.toString(),path:i,token:g},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Pe(a))return{data:null,error:a};throw a}}async update(i,r,s){return this.uploadOrUpdate("PUT",i,r,s)}async move(i,r,s){var a=this;try{return{data:await Pt(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:i,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:a.headers}),error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(Pe(u))return{data:null,error:u};throw u}}async copy(i,r,s){var a=this;try{return{data:{path:(await Pt(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:i,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:a.headers})).Key},error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(Pe(u))return{data:null,error:u};throw u}}async createSignedUrl(i,r,s){var a=this;try{let u=a._getFinalPath(i),c=await Pt(a.fetch,`${a.url}/object/sign/${u}`,ne({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:a.headers});const f=s?.download?`&download=${s.download===!0?"":s.download}`:"";return c={signedUrl:encodeURI(`${a.url}${c.signedURL}${f}`)},{data:c,error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(Pe(u))return{data:null,error:u};throw u}}async createSignedUrls(i,r,s){var a=this;try{const u=await Pt(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:r,paths:i},{headers:a.headers}),c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:u.map(f=>ne(ne({},f),{},{signedUrl:f.signedURL?encodeURI(`${a.url}${f.signedURL}${c}`):null})),error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(Pe(u))return{data:null,error:u};throw u}}download(i,r){const s=typeof r?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(r?.transform||{}),u=a?`?${a}`:"",c=this._getFinalPath(i),f=()=>ds(this.fetch,`${this.url}/${s}/${c}${u}`,{headers:this.headers,noResolveJson:!0});return new tm(f,this.shouldThrowOnError)}async info(i){var r=this;const s=r._getFinalPath(i);try{return{data:Ya(await ds(r.fetch,`${r.url}/object/info/${s}`,{headers:r.headers})),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Pe(a))return{data:null,error:a};throw a}}async exists(i){var r=this;const s=r._getFinalPath(i);try{return await Zp(r.fetch,`${r.url}/object/${s}`,{headers:r.headers}),{data:!0,error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Pe(a)&&a instanceof Qa){const u=a.originalError;if([400,404].includes(u?.status))return{data:!1,error:a}}throw a}}getPublicUrl(i,r){const s=this._getFinalPath(i),a=[],u=r?.download?`download=${r.download===!0?"":r.download}`:"";u!==""&&a.push(u);const c=typeof r?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(r?.transform||{});f!==""&&a.push(f);let g=a.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${s}${g}`)}}}async remove(i){var r=this;try{return{data:await al(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:i},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Pe(s))return{data:null,error:s};throw s}}async list(i,r,s){var a=this;try{const u=ne(ne(ne({},rm),r),{},{prefix:i||""});return{data:await Pt(a.fetch,`${a.url}/object/list/${a.bucketId}`,u,{headers:a.headers},s),error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(Pe(u))return{data:null,error:u};throw u}}async listV2(i,r){var s=this;try{const a=ne({},i);return{data:await Pt(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,a,{headers:s.headers},r),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Pe(a))return{data:null,error:a};throw a}}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const r=[];return i.width&&r.push(`width=${i.width}`),i.height&&r.push(`height=${i.height}`),i.resize&&r.push(`resize=${i.resize}`),i.format&&r.push(`format=${i.format}`),i.quality&&r.push(`quality=${i.quality}`),r.join("&")}};const Hd="2.90.0",Kd={"X-Client-Info":`storage-js/${Hd}`};var sm=class{constructor(i,r={},s,a){this.shouldThrowOnError=!1;const u=new URL(i);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=ne(ne({},Kd),r),this.fetch=ol(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(i){var r=this;try{const s=r.listBucketOptionsToQueryString(i);return{data:await ds(r.fetch,`${r.url}/bucket${s}`,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Pe(s))return{data:null,error:s};throw s}}async getBucket(i){var r=this;try{return{data:await ds(r.fetch,`${r.url}/bucket/${i}`,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Pe(s))return{data:null,error:s};throw s}}async createBucket(i,r={public:!1}){var s=this;try{return{data:await Pt(s.fetch,`${s.url}/bucket`,{id:i,name:i,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Pe(a))return{data:null,error:a};throw a}}async updateBucket(i,r){var s=this;try{return{data:await Xa(s.fetch,`${s.url}/bucket/${i}`,{id:i,name:i,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Pe(a))return{data:null,error:a};throw a}}async emptyBucket(i){var r=this;try{return{data:await Pt(r.fetch,`${r.url}/bucket/${i}/empty`,{},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Pe(s))return{data:null,error:s};throw s}}async deleteBucket(i){var r=this;try{return{data:await al(r.fetch,`${r.url}/bucket/${i}`,{},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Pe(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(i){const r={};return i&&("limit"in i&&(r.limit=String(i.limit)),"offset"in i&&(r.offset=String(i.offset)),i.search&&(r.search=i.search),i.sortColumn&&(r.sortColumn=i.sortColumn),i.sortOrder&&(r.sortOrder=i.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},im=class{constructor(i,r={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=ne(ne({},Kd),r),this.fetch=ol(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var r=this;try{return{data:await Pt(r.fetch,`${r.url}/bucket`,{name:i},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Pe(s))return{data:null,error:s};throw s}}async listBuckets(i){var r=this;try{const s=new URLSearchParams;i?.limit!==void 0&&s.set("limit",i.limit.toString()),i?.offset!==void 0&&s.set("offset",i.offset.toString()),i?.sortColumn&&s.set("sortColumn",i.sortColumn),i?.sortOrder&&s.set("sortOrder",i.sortOrder),i?.search&&s.set("search",i.search);const a=s.toString(),u=a?`${r.url}/bucket?${a}`:`${r.url}/bucket`;return{data:await ds(r.fetch,u,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Pe(s))return{data:null,error:s};throw s}}async deleteBucket(i){var r=this;try{return{data:await al(r.fetch,`${r.url}/bucket/${i}`,{},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Pe(s))return{data:null,error:s};throw s}}from(i){var r=this;if(!Kp(i))throw new Di("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new qp({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(s,{get(u,c){const f=u[c];return typeof f!="function"?f:async(...g)=>{try{return{data:await f.apply(u,g),error:null}}catch(p){if(a)throw p;return{data:null,error:p}}}}})}};const ll={"X-Client-Info":`storage-js/${Hd}`,"Content-Type":"application/json"};var Gd=class extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function gt(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}var Ma=class extends Gd{constructor(i,r,s){super(i),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},om=class extends Gd{constructor(i,r){super(i),this.name="StorageVectorsUnknownError",this.originalError=r}};const ul=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),am=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},jd=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),lm=async(i,r,s)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!s?.noResolveJson){const a=i.status||500,u=i;if(typeof u.json=="function")u.json().then(c=>{const f=c?.statusCode||c?.code||a+"";r(new Ma(jd(c),a,f))}).catch(()=>{const c=a+"";r(new Ma(u.statusText||`HTTP ${a} error`,a,c))});else{const c=a+"";r(new Ma(u.statusText||`HTTP ${a} error`,a,c))}}else r(new om(jd(i),i))},um=(i,r,s,a)=>{const u={method:i,headers:r?.headers||{}};return a?(am(a)?(u.headers=ne({"Content-Type":"application/json"},r?.headers),u.body=JSON.stringify(a)):u.body=a,ne(ne({},u),s)):u};async function cm(i,r,s,a,u,c){return new Promise((f,g)=>{i(s,um(r,a,u,c)).then(p=>{if(!p.ok)throw p;if(a?.noResolveJson)return p;const y=p.headers.get("content-type");return!y||!y.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>lm(p,g,a))})}async function yt(i,r,s,a,u){return cm(i,"POST",r,a,u,s)}var dm=class{constructor(i,r={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=ne(ne({},ll),r),this.fetch=ul(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(i){var r=this;try{return{data:await yt(r.fetch,`${r.url}/CreateIndex`,i,{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async getIndex(i,r){var s=this;try{return{data:await yt(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:i,indexName:r},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}}async listIndexes(i){var r=this;try{return{data:await yt(r.fetch,`${r.url}/ListIndexes`,i,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async deleteIndex(i,r){var s=this;try{return{data:await yt(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:i,indexName:r},{headers:s.headers})||{},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}}},hm=class{constructor(i,r={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=ne(ne({},ll),r),this.fetch=ul(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(i){var r=this;try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await yt(r.fetch,`${r.url}/PutVectors`,i,{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async getVectors(i){var r=this;try{return{data:await yt(r.fetch,`${r.url}/GetVectors`,i,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async listVectors(i){var r=this;try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:await yt(r.fetch,`${r.url}/ListVectors`,i,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async queryVectors(i){var r=this;try{return{data:await yt(r.fetch,`${r.url}/QueryVectors`,i,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async deleteVectors(i){var r=this;try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await yt(r.fetch,`${r.url}/DeleteVectors`,i,{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}},fm=class{constructor(i,r={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=ne(ne({},ll),r),this.fetch=ul(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var r=this;try{return{data:await yt(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async getBucket(i){var r=this;try{return{data:await yt(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:i},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async listBuckets(i={}){var r=this;try{return{data:await yt(r.fetch,`${r.url}/ListVectorBuckets`,i,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async deleteBucket(i){var r=this;try{return{data:await yt(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}},pm=class extends fm{constructor(i,r={}){super(i,r.headers||{},r.fetch)}from(i){return new mm(this.url,this.headers,i,this.fetch)}async createBucket(i){var r=()=>super.createBucket,s=this;return r().call(s,i)}async getBucket(i){var r=()=>super.getBucket,s=this;return r().call(s,i)}async listBuckets(i={}){var r=()=>super.listBuckets,s=this;return r().call(s,i)}async deleteBucket(i){var r=()=>super.deleteBucket,s=this;return r().call(s,i)}},mm=class extends dm{constructor(i,r,s,a){super(i,r,a),this.vectorBucketName=s}async createIndex(i){var r=()=>super.createIndex,s=this;return r().call(s,ne(ne({},i),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(i={}){var r=()=>super.listIndexes,s=this;return r().call(s,ne(ne({},i),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(i){var r=()=>super.getIndex,s=this;return r().call(s,s.vectorBucketName,i)}async deleteIndex(i){var r=()=>super.deleteIndex,s=this;return r().call(s,s.vectorBucketName,i)}index(i){return new gm(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},gm=class extends hm{constructor(i,r,s,a,u){super(i,r,u),this.vectorBucketName=s,this.indexName=a}async putVectors(i){var r=()=>super.putVectors,s=this;return r().call(s,ne(ne({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(i){var r=()=>super.getVectors,s=this;return r().call(s,ne(ne({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(i={}){var r=()=>super.listVectors,s=this;return r().call(s,ne(ne({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(i){var r=()=>super.queryVectors,s=this;return r().call(s,ne(ne({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(i){var r=()=>super.deleteVectors,s=this;return r().call(s,ne(ne({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},ym=class extends sm{constructor(i,r={},s,a){super(i,r,s,a)}from(i){return new nm(this.url,this.headers,i,this.fetch)}get vectors(){return new pm(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new im(this.url+"/iceberg",this.headers,this.fetch)}};const Jd="2.90.0",mn=30*1e3,Za=3,Ba=Za*mn,vm="http://localhost:9999",wm="supabase.auth.token",xm={"X-Client-Info":`gotrue-js/${Jd}`},el="X-Supabase-Api-Version",Qd={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_m=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bm=600*1e3;class hs extends Error{constructor(r,s,a){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function X(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class km extends hs{constructor(r,s,a){super(r,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function Sm(i){return X(i)&&i.name==="AuthApiError"}class Ir extends hs{constructor(r,s){super(r),this.name="AuthUnknownError",this.originalError=s}}class Gt extends hs{constructor(r,s,a,u){super(r,a,u),this.name=s,this.status=a}}class mt extends Gt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jm(i){return X(i)&&i.name==="AuthSessionMissingError"}class un extends Gt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ci extends Gt{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Oi extends Gt{constructor(r,s=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Em(i){return X(i)&&i.name==="AuthImplicitGrantRedirectError"}class Ed extends Gt{constructor(r,s=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nm extends Gt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class tl extends Gt{constructor(r,s){super(r,"AuthRetryableFetchError",s,void 0)}}function Fa(i){return X(i)&&i.name==="AuthRetryableFetchError"}class Nd extends Gt{constructor(r,s,a){super(r,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class rl extends Gt{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Td=` 	
\r=`.split(""),Tm=(()=>{const i=new Array(128);for(let r=0;r<i.length;r+=1)i[r]=-1;for(let r=0;r<Td.length;r+=1)i[Td[r].charCodeAt(0)]=-2;for(let r=0;r<Ri.length;r+=1)i[Ri[r].charCodeAt(0)]=r;return i})();function Cd(i,r,s){if(i!==null)for(r.queue=r.queue<<8|i,r.queuedBits+=8;r.queuedBits>=6;){const a=r.queue>>r.queuedBits-6&63;s(Ri[a]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const a=r.queue>>r.queuedBits-6&63;s(Ri[a]),r.queuedBits-=6}}function Yd(i,r,s){const a=Tm[i];if(a>-1)for(r.queue=r.queue<<6|a,r.queuedBits+=6;r.queuedBits>=8;)s(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Od(i){const r=[],s=f=>{r.push(String.fromCodePoint(f))},a={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},c=f=>{Rm(f,a,s)};for(let f=0;f<i.length;f+=1)Yd(i.charCodeAt(f),u,c);return r.join("")}function Cm(i,r){if(i<=127){r(i);return}else if(i<=2047){r(192|i>>6),r(128|i&63);return}else if(i<=65535){r(224|i>>12),r(128|i>>6&63),r(128|i&63);return}else if(i<=1114111){r(240|i>>18),r(128|i>>12&63),r(128|i>>6&63),r(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Om(i,r){for(let s=0;s<i.length;s+=1){let a=i.charCodeAt(s);if(a>55295&&a<=56319){const u=(a-55296)*1024&65535;a=(i.charCodeAt(s+1)-56320&65535|u)+65536,s+=1}Cm(a,r)}}function Rm(i,r,s){if(r.utf8seq===0){if(i<=127){s(i);return}for(let a=1;a<6;a+=1)if((i>>7-a&1)===0){r.utf8seq=a;break}if(r.utf8seq===2)r.codepoint=i&31;else if(r.utf8seq===3)r.codepoint=i&15;else if(r.utf8seq===4)r.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|i&63,r.utf8seq-=1,r.utf8seq===0&&s(r.codepoint)}}function vn(i){const r=[],s={queue:0,queuedBits:0},a=u=>{r.push(u)};for(let u=0;u<i.length;u+=1)Yd(i.charCodeAt(u),s,a);return new Uint8Array(r)}function Pm(i){const r=[];return Om(i,s=>r.push(s)),new Uint8Array(r)}function $r(i){const r=[],s={queue:0,queuedBits:0},a=u=>{r.push(u)};return i.forEach(u=>Cd(u,s,a)),Cd(null,s,a),r.join("")}function Am(i){return Math.round(Date.now()/1e3)+i}function Im(){return Symbol("auth-callback")}const Qe=()=>typeof window<"u"&&typeof document<"u",Or={tested:!1,writable:!1},Xd=()=>{if(!Qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Or.tested)return Or.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Or.tested=!0,Or.writable=!0}catch{Or.tested=!0,Or.writable=!1}return Or.writable};function $m(i){const r={},s=new URL(i);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((u,c)=>{r[c]=u})}catch{}return s.searchParams.forEach((a,u)=>{r[u]=a}),r}const Zd=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Dm=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",gn=async(i,r,s)=>{await i.setItem(r,JSON.stringify(s))},Rr=async(i,r)=>{const s=await i.getItem(r);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Je=async(i,r)=>{await i.removeItem(r)};class Li{constructor(){this.promise=new Li.promiseConstructor((r,s)=>{this.resolve=r,this.reject=s})}}Li.promiseConstructor=Promise;function qa(i){const r=i.split(".");if(r.length!==3)throw new rl("Invalid JWT structure");for(let a=0;a<r.length;a++)if(!_m.test(r[a]))throw new rl("JWT not in base64url format");return{header:JSON.parse(Od(r[0])),payload:JSON.parse(Od(r[1])),signature:vn(r[2]),raw:{header:r[0],payload:r[1]}}}async function Lm(i){return await new Promise(r=>{setTimeout(()=>r(null),i)})}function Um(i,r){return new Promise((a,u)=>{(async()=>{for(let c=0;c<1/0;c++)try{const f=await i(c);if(!r(c,null,f)){a(f);return}}catch(f){if(!r(c,f)){u(f);return}}})()})}function zm(i){return("0"+i.toString(16)).substr(-2)}function Mm(){const r=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let u="";for(let c=0;c<56;c++)u+=s.charAt(Math.floor(Math.random()*a));return u}return crypto.getRandomValues(r),Array.from(r,zm).join("")}async function Bm(i){const s=new TextEncoder().encode(i),a=await crypto.subtle.digest("SHA-256",s),u=new Uint8Array(a);return Array.from(u).map(c=>String.fromCharCode(c)).join("")}async function Fm(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const s=await Bm(i);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function cn(i,r,s=!1){const a=Mm();let u=a;s&&(u+="/PASSWORD_RECOVERY"),await gn(i,`${r}-code-verifier`,u);const c=await Fm(a);return[c,a===c?"plain":"s256"]}const qm=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vm(i){const r=i.headers.get(el);if(!r||!r.match(qm))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Wm(i){if(!i)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(i<=r)throw new Error("JWT has expired")}function Hm(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Km=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function dn(i){if(!Km.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Va(){const i={};return new Proxy(i,{get:(r,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Gm(i,r){return new Proxy(i,{get:(s,a,u)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,a,u)}return!r.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(s,a,u)}})}function Rd(i){return JSON.parse(JSON.stringify(i))}const Pr=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Jm=[502,503,504];async function Pd(i){var r;if(!Dm(i))throw new tl(Pr(i),0);if(Jm.includes(i.status))throw new tl(Pr(i),i.status);let s;try{s=await i.json()}catch(c){throw new Ir(Pr(c),c)}let a;const u=Vm(i);if(u&&u.getTime()>=Qd["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new Nd(Pr(s),i.status,((r=s.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(a==="session_not_found")throw new mt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,f)=>c&&typeof f=="string",!0))throw new Nd(Pr(s),i.status,s.weak_password.reasons);throw new km(Pr(s),i.status||500,a)}const Qm=(i,r,s,a)=>{const u={method:i,headers:r?.headers||{}};return i==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),u.body=JSON.stringify(a),Object.assign(Object.assign({},u),s))};async function re(i,r,s,a){var u;const c=Object.assign({},a?.headers);c[el]||(c[el]=Qd["2024-01-01"].name),a?.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const f=(u=a?.query)!==null&&u!==void 0?u:{};a?.redirectTo&&(f.redirect_to=a.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await Ym(i,r,s+g,{headers:c,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(p):{data:Object.assign({},p),error:null}}async function Ym(i,r,s,a,u,c){const f=Qm(r,a,u,c);let g;try{g=await i(s,Object.assign({},f))}catch(p){throw console.error(p),new tl(Pr(p),0)}if(g.ok||await Pd(g),a?.noResolveJson)return g;try{return await g.json()}catch(p){await Pd(p)}}function Rt(i){var r;let s=null;eg(i)&&(s=Object.assign({},i),i.expires_at||(s.expires_at=Am(i.expires_in)));const a=(r=i.user)!==null&&r!==void 0?r:i;return{data:{session:s,user:a},error:null}}function Ad(i){const r=Rt(i);return!r.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(r.data.weak_password=i.weak_password),r}function gr(i){var r;return{data:{user:(r=i.user)!==null&&r!==void 0?r:i},error:null}}function Xm(i){return{data:i,error:null}}function Zm(i){const{action_link:r,email_otp:s,hashed_token:a,redirect_to:u,verification_type:c}=i,f=$i(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:r,email_otp:s,hashed_token:a,redirect_to:u,verification_type:c},p=Object.assign({},f);return{data:{properties:g,user:p},error:null}}function Id(i){return i}function eg(i){return i.access_token&&i.refresh_token&&i.expires_in}const Wa=["global","local","others"];class tg{constructor({url:r="",headers:s={},fetch:a}){this.url=r,this.headers=s,this.fetch=Zd(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,s=Wa[0]){if(Wa.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wa.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}}async inviteUserByEmail(r,s={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:gr})}catch(a){if(X(a))return{data:{user:null},error:a};throw a}}async generateLink(r){try{const{options:s}=r,a=$i(r,["options"]),u=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(u.new_email=a?.newEmail,delete u.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Zm,redirectTo:s?.redirectTo})}catch(s){if(X(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(r){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:gr})}catch(s){if(X(s))return{data:{user:null},error:s};throw s}}async listUsers(r){var s,a,u,c,f,g,p;try{const y={nextPage:null,lastPage:0,total:0},w=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(c=(u=r?.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Id});if(w.error)throw w.error;const k=await w.json(),j=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,T=(p=(g=w.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return T.length>0&&(T.forEach(R=>{const C=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(R.split(";")[1].split("=")[1]);y[`${b}Page`]=C}),y.total=parseInt(j)),{data:Object.assign(Object.assign({},k),y),error:null}}catch(y){if(X(y))return{data:{users:[]},error:y};throw y}}async getUserById(r){dn(r);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:gr})}catch(s){if(X(s))return{data:{user:null},error:s};throw s}}async updateUserById(r,s){dn(r);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:s,headers:this.headers,xform:gr})}catch(a){if(X(a))return{data:{user:null},error:a};throw a}}async deleteUser(r,s=!1){dn(r);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:s},xform:gr})}catch(a){if(X(a))return{data:{user:null},error:a};throw a}}async _listFactors(r){dn(r.userId);try{const{data:s,error:a}=await re(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:s,error:a}}catch(s){if(X(s))return{data:null,error:s};throw s}}async _deleteFactor(r){dn(r.userId),dn(r.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(s){if(X(s))return{data:null,error:s};throw s}}async _listOAuthClients(r){var s,a,u,c,f,g,p;try{const y={nextPage:null,lastPage:0,total:0},w=await re(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(c=(u=r?.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Id});if(w.error)throw w.error;const k=await w.json(),j=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,T=(p=(g=w.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return T.length>0&&(T.forEach(R=>{const C=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(R.split(";")[1].split("=")[1]);y[`${b}Page`]=C}),y.total=parseInt(j)),{data:Object.assign(Object.assign({},k),y),error:null}}catch(y){if(X(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(r){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(X(s))return{data:null,error:s};throw s}}async _getOAuthClient(r){try{return await re(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(X(s))return{data:null,error:s};throw s}}async _updateOAuthClient(r,s){try{return await re(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:s,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(X(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(r){try{return await re(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(X(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(r){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(X(s))return{data:null,error:s};throw s}}}function $d(i={}){return{getItem:r=>i[r]||null,setItem:(r,s)=>{i[r]=s},removeItem:r=>{delete i[r]}}}const hn={debug:!!(globalThis&&Xd()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class eh extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class rg extends eh{}async function ng(i,r,s){hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,r);const a=new globalThis.AbortController;return r>0&&setTimeout(()=>{a.abort(),hn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async u=>{if(u){hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,u.name);try{return await s()}finally{hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,u.name)}}else{if(r===0)throw hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new rg(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(hn.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function sg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function th(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function ig(i){return parseInt(i,16)}function og(i){const r=new TextEncoder().encode(i);return"0x"+Array.from(r,a=>a.toString(16).padStart(2,"0")).join("")}function ag(i){var r;const{chainId:s,domain:a,expirationTime:u,issuedAt:c=new Date,nonce:f,notBefore:g,requestId:p,resources:y,scheme:w,uri:k,version:j}=i;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!k)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(j!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${j}`);if(!((r=i.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const T=th(i.address),R=w?`${w}://${a}`:a,C=i.statement?`${i.statement}
`:"",b=`${R} wants you to sign in with your Ethereum account:
${T}

${C}`;let P=`URI: ${k}
Version: ${j}
Chain ID: ${s}${f?`
Nonce: ${f}`:""}
Issued At: ${c.toISOString()}`;if(u&&(P+=`
Expiration Time: ${u.toISOString()}`),g&&(P+=`
Not Before: ${g.toISOString()}`),p&&(P+=`
Request ID: ${p}`),y){let B=`
Resources:`;for(const z of y){if(!z||typeof z!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${z}`);B+=`
- ${z}`}P+=B}return`${b}
${P}`}class Ue extends Error{constructor({message:r,code:s,cause:a,name:u}){var c;super(r,{cause:a}),this.__isWebAuthnError=!0,this.name=(c=u??(a instanceof Error?a.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=s}}class Pi extends Ue{constructor(r,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:r}),this.name="WebAuthnUnknownError",this.originalError=s}}function lg({error:i,options:r}){var s,a,u;const{publicKey:c}=r;if(!c)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Ue({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((s=c.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Ue({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(r.mediation==="conditional"&&((a=c.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ue({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((u=c.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Ue({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Ue({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Ue({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return c.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Ue({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Ue({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const f=window.location.hostname;if(rh(f)){if(c.rp.id!==f)return new Ue({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Ue({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Ue({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function ug({error:i,options:r}){const{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Ue({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Ue({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const a=window.location.hostname;if(rh(a)){if(s.rpId!==a)return new Ue({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Ue({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class cg{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const dg=new cg;function hg(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:r,user:s,excludeCredentials:a}=i,u=$i(i,["challenge","user","excludeCredentials"]),c=vn(r).buffer,f=Object.assign(Object.assign({},s),{id:vn(s.id).buffer}),g=Object.assign(Object.assign({},u),{challenge:c,user:f});if(a&&a.length>0){g.excludeCredentials=new Array(a.length);for(let p=0;p<a.length;p++){const y=a[p];g.excludeCredentials[p]=Object.assign(Object.assign({},y),{id:vn(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return g}function fg(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:r,allowCredentials:s}=i,a=$i(i,["challenge","allowCredentials"]),u=vn(r).buffer,c=Object.assign(Object.assign({},a),{challenge:u});if(s&&s.length>0){c.allowCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const g=s[f];c.allowCredentials[f]=Object.assign(Object.assign({},g),{id:vn(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return c}function pg(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const s=i;return{id:i.id,rawId:i.id,response:{attestationObject:$r(new Uint8Array(i.response.attestationObject)),clientDataJSON:$r(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function mg(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const s=i,a=i.getClientExtensionResults(),u=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:$r(new Uint8Array(u.authenticatorData)),clientDataJSON:$r(new Uint8Array(u.clientDataJSON)),signature:$r(new Uint8Array(u.signature)),userHandle:u.userHandle?$r(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function rh(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Dd(){var i,r;return!!(Qe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function gg(i){try{const r=await navigator.credentials.create(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Pi("Browser returned unexpected credential type",r)}:{data:null,error:new Pi("Empty credential response",r)}}catch(r){return{data:null,error:lg({error:r,options:i})}}}async function yg(i){try{const r=await navigator.credentials.get(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Pi("Browser returned unexpected credential type",r)}:{data:null,error:new Pi("Empty credential response",r)}}catch(r){return{data:null,error:ug({error:r,options:i})}}}const vg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},wg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ai(...i){const r=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),s=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),a={};for(const u of i)if(u)for(const c in u){const f=u[c];if(f!==void 0)if(Array.isArray(f))a[c]=f;else if(s(f))a[c]=f;else if(r(f)){const g=a[c];r(g)?a[c]=Ai(g,f):a[c]=Ai(f)}else a[c]=f}return a}function xg(i,r){return Ai(vg,i,r||{})}function _g(i,r){return Ai(wg,i,r||{})}class bg{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:s,friendlyName:a,signal:u},c){try{const{data:f,error:g}=await this.client.mfa.challenge({factorId:r,webauthn:s});if(!f)return{data:null,error:g};const p=u??dg.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:y}=f.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${a}`),y.displayName||(y.displayName=y.name)}switch(f.webauthn.type){case"create":{const y=xg(f.webauthn.credential_options.publicKey,c?.create),{data:w,error:k}=await gg({publicKey:y,signal:p});return w?{data:{factorId:r,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:w}},error:null}:{data:null,error:k}}case"request":{const y=_g(f.webauthn.credential_options.publicKey,c?.request),{data:w,error:k}=await yg(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:y,signal:p}));return w?{data:{factorId:r,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:w}},error:null}:{data:null,error:k}}}}catch(f){return X(f)?{data:null,error:f}:{data:null,error:new Ir("Unexpected error in challenge",f)}}}async _verify({challengeId:r,factorId:s,webauthn:a}){return this.client.mfa.verify({factorId:s,challengeId:r,webauthn:a})}async _authenticate({factorId:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!s)return{data:null,error:new hs("rpId is required for WebAuthn authentication")};try{if(!Dd())return{data:null,error:new Ir("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:r,webauthn:{rpId:s,rpOrigins:a},signal:u},{request:c});if(!f)return{data:null,error:g};const{webauthn:p}=f;return this._verify({factorId:r,challengeId:f.challengeId,webauthn:{type:p.type,rpId:s,rpOrigins:a,credential_response:p.credential_response}})}catch(f){return X(f)?{data:null,error:f}:{data:null,error:new Ir("Unexpected error in authenticate",f)}}}async _register({friendlyName:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!s)return{data:null,error:new hs("rpId is required for WebAuthn registration")};try{if(!Dd())return{data:null,error:new Ir("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:r});if(!f)return await this.client.mfa.listFactors().then(w=>{var k;return(k=w.data)===null||k===void 0?void 0:k.all.find(j=>j.factor_type==="webauthn"&&j.friendly_name===r&&j.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w?.id}):void 0),{data:null,error:g};const{data:p,error:y}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:s,rpOrigins:a},signal:u},{create:c});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:s,rpOrigins:a,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:y}}catch(f){return X(f)?{data:null,error:f}:{data:null,error:new Ir("Unexpected error in register",f)}}}}sg();const kg={url:vm,storageKey:wm,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xm,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ld(i,r,s){return await s()}const fn={};class fs{get jwks(){var r,s;return(s=(r=fn[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(r){fn[this.storageKey]=Object.assign(Object.assign({},fn[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,s;return(s=(r=fn[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){fn[this.storageKey]=Object.assign(Object.assign({},fn[this.storageKey]),{cachedAt:r})}constructor(r){var s,a,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},kg),r);if(this.storageKey=c.storageKey,this.instanceID=(s=fs.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,fs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&Qe()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new tg({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Zd(c.fetch),this.lock=c.lock||Ld,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&Qe()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=ng:this.lock=Ld,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new bg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Xd()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$d(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=$d(this.memoryStorage)),Qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Jd}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let s={},a="none";if(Qe()&&(s=$m(window.location.href),this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce")),Qe()&&this.detectSessionInUrl&&a!=="none"){const{data:u,error:c}=await this._getSessionFromURL(s,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Em(c)){const p=(r=c.details)===null||r===void 0?void 0:r.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:f,redirectType:g}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return X(s)?this._returnResult({error:s}):this._returnResult({error:new Ir("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var s,a,u;try{const c=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=r?.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(u=r?.options)===null||u===void 0?void 0:u.captchaToken}},xform:Rt}),{data:f,error:g}=c;if(g||!f)return this._returnResult({data:{user:null,session:null},error:g});const p=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:y,session:p},error:null})}catch(c){if(X(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(r){var s,a,u;try{let c;if("email"in r){const{email:w,password:k,options:j}=r;let T=null,R=null;this.flowType==="pkce"&&([T,R]=await cn(this.storage,this.storageKey)),c=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j?.emailRedirectTo,body:{email:w,password:k,data:(s=j?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:j?.captchaToken},code_challenge:T,code_challenge_method:R},xform:Rt})}else if("phone"in r){const{phone:w,password:k,options:j}=r;c=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:k,data:(a=j?.data)!==null&&a!==void 0?a:{},channel:(u=j?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:j?.captchaToken}},xform:Rt})}else throw new Ci("You must provide either an email or phone number and a password");const{data:f,error:g}=c;if(g||!f)return await Je(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const p=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:y,session:p},error:null})}catch(c){if(await Je(this.storage,`${this.storageKey}-code-verifier`),X(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(r){try{let s;if("email"in r){const{email:c,password:f,options:g}=r;s=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Ad})}else if("phone"in r){const{phone:c,password:f,options:g}=r;s=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Ad})}else throw new Ci("You must provide either an email or phone number and a password");const{data:a,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!a||!a.session||!a.user){const c=new un;return this._returnResult({data:{user:null,session:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:u})}catch(s){if(X(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(r){var s,a,u,c;return await this._handleProviderSignIn(r.provider,{redirectTo:(s=r.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=r.options)===null||a===void 0?void 0:a.scopes,queryParams:(u=r.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(c=r.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:s}=r;switch(s){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(r){var s,a,u,c,f,g,p,y,w,k,j;let T,R;if("message"in r)T=r.message,R=r.signature;else{const{chain:C,wallet:b,statement:P,options:B}=r;let z;if(Qe())if(typeof b=="object")z=b;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")z=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=b}const q=new URL((s=B?.url)!==null&&s!==void 0?s:window.location.href),ae=await z.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ae||ae.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=th(ae[0]);let J=(a=B?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!J){const A=await z.request({method:"eth_chainId"});J=ig(A)}const Se={domain:q.host,address:I,statement:P,uri:q.href,version:"1",chainId:J,nonce:(u=B?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(c=B?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=B?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(p=B?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(y=B?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(w=B?.signInWithEthereum)===null||w===void 0?void 0:w.resources};T=ag(Se),R=await z.request({method:"personal_sign",params:[og(T),I]})}try{const{data:C,error:b}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:R},!((k=r.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(j=r.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:Rt});if(b)throw b;if(!C||!C.session||!C.user){const P=new un;return this._returnResult({data:{user:null,session:null},error:P})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:b})}catch(C){if(X(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(r){var s,a,u,c,f,g,p,y,w,k,j,T;let R,C;if("message"in r)R=r.message,C=r.signature;else{const{chain:b,wallet:P,statement:B,options:z}=r;let q;if(Qe())if(typeof P=="object")q=P;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))q=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=P}const ae=new URL((s=z?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in q&&q.signIn){const I=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},z?.signInWithSolana),{version:"1",domain:ae.host,uri:ae.href}),B?{statement:B}:null));let J;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")J=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)J=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)R=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),C=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");R=[`${ae.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${ae.href}`,`Issued At: ${(u=(a=z?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((c=z?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${z.signInWithSolana.notBefore}`]:[],...!((f=z?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${z.signInWithSolana.expirationTime}`]:[],...!((g=z?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${z.signInWithSolana.chainId}`]:[],...!((p=z?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${z.signInWithSolana.nonce}`]:[],...!((y=z?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${z.signInWithSolana.requestId}`]:[],...!((k=(w=z?.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||k===void 0)&&k.length?["Resources",...z.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const I=await q.signMessage(new TextEncoder().encode(R),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=I}}try{const{data:b,error:P}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:R,signature:$r(C)},!((j=r.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(T=r.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Rt});if(P)throw P;if(!b||!b.session||!b.user){const B=new un;return this._returnResult({data:{user:null,session:null},error:B})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:P})}catch(b){if(X(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(r){const s=await Rr(this.storage,`${this.storageKey}-code-verifier`),[a,u]=(s??"").split("/");try{if(!a&&this.flowType==="pkce")throw new Nm;const{data:c,error:f}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:a},xform:Rt});if(await Je(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!c||!c.session||!c.user){const g=new un;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:u??null}),error:f})}catch(c){if(await Je(this.storage,`${this.storageKey}-code-verifier`),X(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(r){try{const{options:s,provider:a,token:u,access_token:c,nonce:f}=r,g=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:u,access_token:c,nonce:f,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Rt}),{data:p,error:y}=g;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!p||!p.session||!p.user){const w=new un;return this._returnResult({data:{user:null,session:null},error:w})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:y})}catch(s){if(X(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(r){var s,a,u,c,f;try{if("email"in r){const{email:g,options:p}=r;let y=null,w=null;this.flowType==="pkce"&&([y,w]=await cn(this.storage,this.storageKey));const{error:k}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(s=p?.data)!==null&&s!==void 0?s:{},create_user:(a=p?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:y,code_challenge_method:w},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:k})}if("phone"in r){const{phone:g,options:p}=r,{data:y,error:w}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(u=p?.data)!==null&&u!==void 0?u:{},create_user:(c=p?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(f=p?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:w})}throw new Ci("You must provide either an email or phone number.")}catch(g){if(await Je(this.storage,`${this.storageKey}-code-verifier`),X(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(r){var s,a;try{let u,c;"options"in r&&(u=(s=r.options)===null||s===void 0?void 0:s.redirectTo,c=(a=r.options)===null||a===void 0?void 0:a.captchaToken);const{data:f,error:g}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:c}}),redirectTo:u,xform:Rt});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,y=f.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:y,session:p},error:null})}catch(u){if(X(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(r){var s,a,u,c,f;try{let g=null,p=null;this.flowType==="pkce"&&([g,p]=await cn(this.storage,this.storageKey));const y=await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(a=(s=r.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((u=r?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:p}),headers:this.headers,xform:Xm});return!((c=y.data)===null||c===void 0)&&c.url&&Qe()&&!(!((f=r.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(g){if(await Je(this.storage,`${this.storageKey}-code-verifier`),X(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)throw a;if(!s)throw new mt;const{error:u}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(r){if(X(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const s=`${this.url}/resend`;if("email"in r){const{email:a,type:u,options:c}=r,{error:f}=await re(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:u,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in r){const{phone:a,type:u,options:c}=r,{data:f,error:g}=await re(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:u,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:g})}throw new Ci("You must provide either an email or phone number and a type")}catch(s){if(X(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(r,s){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await r(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const s=await Rr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?r=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const a=r.expires_at?r.expires_at*1e3-Date.now()<Ba:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",r.expires_at),!a){if(this.userStorage){const f=await Rr(this.userStorage,this.storageKey+"-user");f?.user?r.user=f.user:r.user=Va()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};r.user=Gm(r.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:u,error:c}=await this._callRefreshToken(r.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(r){try{return r?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:gr}):await this._useSession(async s=>{var a,u,c;const{data:f,error:g}=s;if(g)throw g;return!(!((a=f.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mt}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0,xform:gr})})}catch(s){if(X(s))return jm(s)&&(await this._removeSession(),await Je(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(r,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,s))}async _updateUser(r,s={}){try{return await this._useSession(async a=>{const{data:u,error:c}=a;if(c)throw c;if(!u.session)throw new mt;const f=u.session;let g=null,p=null;this.flowType==="pkce"&&r.email!=null&&([g,p]=await cn(this.storage,this.storageKey));const{data:y,error:w}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:g,code_challenge_method:p}),jwt:f.access_token,xform:gr});if(w)throw w;return f.user=y.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(a){if(await Je(this.storage,`${this.storageKey}-code-verifier`),X(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new mt;const s=Date.now()/1e3;let a=s,u=!0,c=null;const{payload:f}=qa(r.access_token);if(f.exp&&(a=f.exp,u=a<=s),u){const{data:g,error:p}=await this._callRefreshToken(r.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g)return{data:{user:null,session:null},error:null};c=g}else{const{data:g,error:p}=await this._getUser(r.access_token);if(p)throw p;c={access_token:r.access_token,refresh_token:r.refresh_token,user:g.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(s){if(X(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async s=>{var a;if(!r){const{data:f,error:g}=s;if(g)throw g;r=(a=f.session)!==null&&a!==void 0?a:void 0}if(!r?.refresh_token)throw new mt;const{data:u,error:c}=await this._callRefreshToken(r.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(X(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(r,s){try{if(!Qe())throw new Oi("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Oi(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Ed("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Oi("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Ed("No code detected.");const{data:B,error:z}=await this._exchangeCodeForSession(r.code);if(z)throw z;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:u,access_token:c,refresh_token:f,expires_in:g,expires_at:p,token_type:y}=r;if(!c||!g||!f||!y)throw new Oi("No session defined in URL");const w=Math.round(Date.now()/1e3),k=parseInt(g);let j=w+k;p&&(j=parseInt(p));const T=j-w;T*1e3<=mn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${k}s`);const R=j-k;w-R>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",R,j,w):w-R<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",R,j,w);const{data:C,error:b}=await this._getUser(c);if(b)throw b;const P={provider_token:a,provider_refresh_token:u,access_token:c,expires_in:k,expires_at:j,refresh_token:f,token_type:y,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:P,redirectType:r.type},error:null})}catch(a){if(X(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const s=await Rr(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&s)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:u,error:c}=s;if(c)return this._returnResult({error:c});const f=(a=u.session)===null||a===void 0?void 0:a.access_token;if(f){const{error:g}=await this.admin.signOut(f,r);if(g&&!(Sm(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return r!=="others"&&(await this._removeSession(),await Je(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const s=Im(),a={id:s,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(r){return await this._useSession(async s=>{var a,u;try{const{data:{session:c},error:f}=s;if(f)throw f;await((a=this.stateChangeEmitters.get(r))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",r,"session",c)}catch(c){await((u=this.stateChangeEmitters.get(r))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",c),console.error(c)}})}async resetPasswordForEmail(r,s={}){let a=null,u=null;this.flowType==="pkce"&&([a,u]=await cn(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:a,code_challenge_method:u,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(await Je(this.storage,`${this.storageKey}-code-verifier`),X(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var r;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(r=s.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var s;try{const{data:a,error:u}=await this._useSession(async c=>{var f,g,p,y,w;const{data:k,error:j}=c;if(j)throw j;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(f=r.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=r.options)===null||g===void 0?void 0:g.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",T,{headers:this.headers,jwt:(w=(y=k.session)===null||y===void 0?void 0:y.access_token)!==null&&w!==void 0?w:void 0})});if(u)throw u;return Qe()&&!(!((s=r.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:r.provider,url:a?.url},error:null})}catch(a){if(X(a))return this._returnResult({data:{provider:r.provider,url:null},error:a});throw a}}async linkIdentityIdToken(r){return await this._useSession(async s=>{var a;try{const{error:u,data:{session:c}}=s;if(u)throw u;const{options:f,provider:g,token:p,access_token:y,nonce:w}=r,k=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=c?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:g,id_token:p,access_token:y,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Rt}),{data:j,error:T}=k;return T?this._returnResult({data:{user:null,session:null},error:T}):!j||!j.session||!j.user?this._returnResult({data:{user:null,session:null},error:new un}):(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("USER_UPDATED",j.session)),this._returnResult({data:j,error:T}))}catch(u){if(await Je(this.storage,`${this.storageKey}-code-verifier`),X(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(r){try{return await this._useSession(async s=>{var a,u;const{data:c,error:f}=s;if(f)throw f;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(u=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&u!==void 0?u:void 0})})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(r){const s=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await Um(async u=>(u>0&&await Lm(200*Math.pow(2,u-1)),this._debug(s,"refreshing attempt",u),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Rt})),(u,c)=>{const f=200*Math.pow(2,u);return c&&Fa(c)&&Date.now()+f-a<mn})}catch(a){if(this._debug(s,"error",a),X(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(s,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",s,"url",a),Qe()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:r,url:a},error:null}}async _recoverAndRefresh(){var r,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const u=await Rr(this.storage,this.storageKey);if(u&&this.userStorage){let f=await Rr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await gn(this.userStorage,this.storageKey+"-user",f)),u.user=(r=f?.user)!==null&&r!==void 0?r:Va()}else if(u&&!u.user&&!u.user){const f=await Rr(this.storage,this.storageKey+"-user");f&&f?.user?(u.user=f.user,await Je(this.storage,this.storageKey+"-user"),await gn(this.storage,this.storageKey,u)):u.user=Va()}if(this._debug(a,"session from storage",u),!this._isValidSession(u)){this._debug(a,"session is not valid"),u!==null&&await this._removeSession();return}const c=((s=u.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Ba;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${Ba}s`),c){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),Fa(f)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(u.access_token);!g&&f?.user?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(a,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(a,"error",u),console.error(u);return}finally{this._debug(a,"end")}}async _callRefreshToken(r){var s,a;if(!r)throw new mt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Li;const{data:c,error:f}=await this._refreshAccessToken(r);if(f)throw f;if(!c.session)throw new mt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const g={data:c.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(c){if(this._debug(u,"error",c),X(c)){const f={data:null,error:c};return Fa(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(f),f}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(r,s,a=!0){const u=`#_notifyAllSubscribers(${r})`;this._debug(u,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:r,session:s});const c=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(r,s)}catch(p){c.push(p)}});if(await Promise.all(f),c.length>0){for(let g=0;g<c.length;g+=1)console.error(c[g]);throw c[0]}}finally{this._debug(u,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await Je(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},r),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await gn(this.userStorage,this.storageKey+"-user",{user:s.user});const u=Object.assign({},s);delete u.user;const c=Rd(u);await gn(this.storage,this.storageKey,c)}else{const u=Rd(s);await gn(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Je(this.storage,this.storageKey),await Je(this.storage,this.storageKey+"-code-verifier"),await Je(this.storage,this.storageKey+"-user"),this.userStorage&&await Je(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Qe()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),mn);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((a.expires_at*1e3-r)/mn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${mn}ms, refresh threshold is ${Za} ticks`),u<=Za&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof eh)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qe()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const s=`#_onVisibilityChanged(${r})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,s,a){const u=[`provider=${encodeURIComponent(s)}`];if(a?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&u.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,f]=await cn(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(g.toString())}if(a?.queryParams){const c=new URLSearchParams(a.queryParams);u.push(c.toString())}return a?.skipBrowserRedirect&&u.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${r}?${u.join("&")}`}async _unenroll(r){try{return await this._useSession(async s=>{var a;const{data:u,error:c}=s;return c?this._returnResult({data:null,error:c}):await re(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(r){try{return await this._useSession(async s=>{var a,u;const{data:c,error:f}=s;if(f)return this._returnResult({data:null,error:f});const g=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:p,error:y}=await re(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});return y?this._returnResult({data:null,error:y}):(r.factorType==="totp"&&p.type==="totp"&&(!((u=p?.totp)===null||u===void 0)&&u.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var a;const{data:u,error:c}=s;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?pg(r.webauthn.credential_response):mg(r.webauthn.credential_response)})}:{code:r.code}),{data:g,error:p}=await re(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:f,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:p}))})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var a;const{data:u,error:c}=s;if(c)return this._returnResult({data:null,error:c});const f=await re(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:hg(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:fg(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(r){const{data:s,error:a}=await this._challenge({factorId:r.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:r.factorId,challengeId:s.id,code:r.code})}async _listFactors(){var r;const{data:{user:s},error:a}=await this.getUser();if(a)return{data:null,error:a};const u={all:[],phone:[],totp:[],webauthn:[]};for(const c of(r=s?.factors)!==null&&r!==void 0?r:[])u.all.push(c),c.status==="verified"&&u[c.factor_type].push(c);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var r,s;const{data:{session:a},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=qa(a.access_token);let f=null;c.aal&&(f=c.aal);let g=f;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(g="aal2");const y=c.amr||[];return{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async s=>{const{data:{session:a},error:u}=s;return u?this._returnResult({data:null,error:u}):a?await re(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:a.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new mt})})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(r,s){try{return await this._useSession(async a=>{const{data:{session:u},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new mt});const f=await re(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&Qe()&&!s?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(a){if(X(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(r,s){try{return await this._useSession(async a=>{const{data:{session:u},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new mt});const f=await re(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&Qe()&&!s?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(a){if(X(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await re(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new mt})})}catch(r){if(X(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async s=>{const{data:{session:a},error:u}=s;return u?this._returnResult({data:null,error:u}):a?(await re(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new mt})})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(r,s={keys:[]}){let a=s.keys.find(g=>g.kid===r);if(a)return a;const u=Date.now();if(a=this.jwks.keys.find(g=>g.kid===r),a&&this.jwks_cached_at+bm>u)return a;const{data:c,error:f}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=u,a=c.keys.find(g=>g.kid===r),!a)?null:a}async getClaims(r,s={}){try{let a=r;if(!a){const{data:T,error:R}=await this.getSession();if(R||!T.session)return this._returnResult({data:null,error:R});a=T.session.access_token}const{header:u,payload:c,signature:f,raw:{header:g,payload:p}}=qa(a);s?.allowExpired||Wm(c.exp);const y=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!y){const{error:T}=await this.getUser(a);if(T)throw T;return{data:{claims:c,header:u,signature:f},error:null}}const w=Hm(u.alg),k=await crypto.subtle.importKey("jwk",y,w,!0,["verify"]);if(!await crypto.subtle.verify(w,k,f,Pm(`${g}.${p}`)))throw new rl("Invalid JWT signature");return{data:{claims:c,header:u,signature:f},error:null}}catch(a){if(X(a))return this._returnResult({data:null,error:a});throw a}}}fs.nextInstanceID={};const Sg=fs,jg="2.90.0";let os="";typeof Deno<"u"?os="deno":typeof document<"u"?os="web":typeof navigator<"u"&&navigator.product==="ReactNative"?os="react-native":os="node";const Eg={"X-Client-Info":`supabase-js-${os}/${jg}`},Ng={headers:Eg},Tg={schema:"public"},Cg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Og={};function ps(i){"@babel/helpers - typeof";return ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ps(i)}function Rg(i,r){if(ps(i)!="object"||!i)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var a=s.call(i,r);if(ps(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}function Pg(i){var r=Rg(i,"string");return ps(r)=="symbol"?r:r+""}function Ag(i,r,s){return(r=Pg(r))in i?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s,i}function Ud(i,r){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);r&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),s.push.apply(s,a)}return s}function Ie(i){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Ud(Object(s),!0).forEach(function(a){Ag(i,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):Ud(Object(s)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(s,a))})}return i}const Ig=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),$g=()=>Headers,Dg=(i,r,s)=>{const a=Ig(s),u=$g();return async(c,f)=>{var g;const p=(g=await r())!==null&&g!==void 0?g:i;let y=new u(f?.headers);return y.has("apikey")||y.set("apikey",i),y.has("Authorization")||y.set("Authorization",`Bearer ${p}`),a(c,Ie(Ie({},f),{},{headers:y}))}};function Lg(i){return i.endsWith("/")?i:i+"/"}function Ug(i,r){var s,a;const{db:u,auth:c,realtime:f,global:g}=i,{db:p,auth:y,realtime:w,global:k}=r,j={db:Ie(Ie({},p),u),auth:Ie(Ie({},y),c),realtime:Ie(Ie({},w),f),storage:{},global:Ie(Ie(Ie({},k),g),{},{headers:Ie(Ie({},(s=k?.headers)!==null&&s!==void 0?s:{}),(a=g?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return i.accessToken?j.accessToken=i.accessToken:delete j.accessToken,j}function zg(i){const r=i?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Lg(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Mg=class extends Sg{constructor(i){super(i)}},Bg=class{constructor(i,r,s){var a,u;this.supabaseUrl=i,this.supabaseKey=r;const c=zg(i);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const f=`sb-${c.hostname.split(".")[0]}-auth-token`,g={db:Tg,realtime:Og,auth:Ie(Ie({},Cg),{},{storageKey:f}),global:Ng},p=Ug(s??{},g);if(this.storageKey=(a=p.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(u=p.global.headers)!==null&&u!==void 0?u:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(w,k)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(k)} is not possible`)}});else{var y;this.auth=this._initSupabaseAuthClient((y=p.auth)!==null&&y!==void 0?y:{},this.headers,p.global.fetch)}this.fetch=Dg(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Ie({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new xp(new URL("rest/v1",c).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new ym(this.storageUrl.href,this.headers,this.fetch,s?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new mp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,r,s)}channel(i,r={config:{}}){return this.realtime.channel(i,r)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,r,s;if(i.accessToken)return await i.accessToken();const{data:a}=await i.auth.getSession();return(r=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:u,storageKey:c,flowType:f,lock:g,debug:p,throwOnError:y},w,k){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mg({url:this.authUrl.href,headers:Ie(Ie({},j),w),storageKey:c,autoRefreshToken:i,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:u,flowType:f,lock:g,debug:p,throwOnError:y,fetch:k,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new Lp(this.realtimeUrl.href,Ie(Ie({},i),{},{params:Ie(Ie({},{apikey:this.supabaseKey}),i?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,r)=>{this._handleTokenChanged(i,"CLIENT",r?.access_token)})}_handleTokenChanged(i,r,s){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Fg=(i,r,s)=>new Bg(i,r,s);function qg(){if(typeof window<"u")return!1;const i=globalThis.process;if(!i)return!1;const r=i.version;if(r==null)return!1;const s=r.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}qg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Vg="",Wg="";throw new Error("Missing Supabase environment variables");const Z=Fg(Vg,Wg),nh=Y.createContext(void 0);function Hg({children:i}){const[r,s]=Y.useState(null),[a,u]=Y.useState(null),[c,f]=Y.useState(!0);Y.useEffect(()=>{Z.auth.getSession().then(({data:{session:j}})=>{s(j?.user??null),j?.user?g(j.user.id):f(!1)});const{data:{subscription:k}}=Z.auth.onAuthStateChange((j,T)=>{(async()=>(s(T?.user??null),T?.user?await g(T.user.id):(u(null),f(!1))))()});return()=>k.unsubscribe()},[]);const g=async k=>{try{const{data:j,error:T}=await Z.from("profiles").select("*").eq("id",k).maybeSingle();if(T)throw T;u(j)}catch(j){console.error("Error loading profile:",j)}finally{f(!1)}},p=async(k,j)=>{try{const{error:T}=await Z.auth.signInWithPassword({email:k,password:j});return{error:T}}catch(T){return{error:T}}},y=async(k,j,T,R)=>{try{const{data:C,error:b}=await Z.auth.signUp({email:k,password:j});if(b)throw b;if(!C.user)throw new Error("No user returned");const{error:P}=await Z.from("profiles").insert({id:C.user.id,email:k,full_name:T,role:R});if(P)throw P;return{error:null}}catch(C){return{error:C}}},w=async()=>{await Z.auth.signOut(),s(null),u(null)};return d.jsx(nh.Provider,{value:{user:r,profile:a,loading:c,signIn:p,signUp:y,signOut:w},children:i})}function Jt(){const i=Y.useContext(nh);if(i===void 0)throw new Error("useAuth must be used within an AuthProvider");return i}function Kg(){const[i,r]=Y.useState(!0),[s,a]=Y.useState(""),[u,c]=Y.useState(""),[f,g]=Y.useState(""),[p,y]=Y.useState("staff"),[w,k]=Y.useState(""),[j,T]=Y.useState(!1),{signIn:R,signUp:C}=Jt(),b=async P=>{P.preventDefault(),k(""),T(!0);try{if(i){const{error:B}=await R(s,u);if(B)throw B}else{const{error:B}=await C(s,u,f,p);if(B)throw B}}catch(B){k(B.message||" xy ra li")}finally{T(!1)}};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:i?"ng Nhp":"ng K"}),d.jsx("p",{className:"text-gray-600",children:"H thng qun l bn hng"})]}),w&&d.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:w}),d.jsxs("form",{onSubmit:b,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),d.jsx("input",{type:"email",value:s,onChange:P=>a(P.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),!i&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"H v tn"}),d.jsx("input",{type:"text",value:f,onChange:P=>g(P.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!i})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mt khu"}),d.jsx("input",{type:"password",value:u,onChange:P=>c(P.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),!i&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vai tr"}),d.jsxs("select",{value:p,onChange:P=>y(P.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"staff",children:"Nhn vin"}),d.jsx("option",{value:"manager",children:"Qun l"}),d.jsx("option",{value:"admin",children:"Qun tr vin"})]})]}),d.jsx("button",{type:"submit",disabled:j,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-lg transition-colors disabled:bg-gray-400",children:j?"ang x l...":i?"ng Nhp":"ng K"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsx("button",{onClick:()=>r(!i),className:"text-blue-600 hover:text-blue-700 font-medium",children:i?"Cha c ti khon? ng k ngay":" c ti khon? ng nhp"})})]})})}var Gg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Jg=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),He=(i,r)=>{const s=Y.forwardRef(({color:a="currentColor",size:u=24,strokeWidth:c=2,absoluteStrokeWidth:f,className:g="",children:p,...y},w)=>Y.createElement("svg",{ref:w,...Gg,width:u,height:u,stroke:a,strokeWidth:f?Number(c)*24/Number(u):c,className:["lucide",`lucide-${Jg(i)}`,g].join(" "),...y},[...r.map(([k,j])=>Y.createElement(k,j)),...Array.isArray(p)?p:[p]]));return s.displayName=`${i}`,s};const Qg=He("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Yg=He("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const sh=He("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const Xg=He("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Zg=He("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const ey=He("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const ty=He("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const ih=He("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const cl=He("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const wn=He("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const ry=He("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const ny=He("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const dl=He("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const sy=He("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const hl=He("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const nl=He("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);const Ii=He("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const iy=He("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),oy=[{id:"dashboard",label:"Tng quan",icon:d.jsx(Zg,{size:20})},{id:"products",label:"Sn phm",icon:d.jsx(ih,{size:20})},{id:"purchases",label:"Nhp hng",icon:d.jsx(ny,{size:20})},{id:"sales",label:"Bn hng",icon:d.jsx(hl,{size:20})},{id:"customers",label:"Khch hng",icon:d.jsx(Ii,{size:20})},{id:"suppliers",label:"Nh cung cp",icon:d.jsx(nl,{size:20})},{id:"cashflow",label:"Dng tin",icon:d.jsx(sh,{size:20})},{id:"debts",label:"Cng n",icon:d.jsx(Xg,{size:20})}];function ay({children:i,currentPage:r,onNavigate:s}){const[a,u]=Y.useState(!1),{profile:c,signOut:f}=Jt();return d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-20",children:d.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:()=>u(!a),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:a?d.jsx(iy,{size:24}):d.jsx(ty,{size:24})}),d.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Qun l bn hng"})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-sm font-medium text-gray-800",children:c?.full_name}),d.jsxs("p",{className:"text-xs text-gray-500",children:[c?.role==="admin"&&"Qun tr vin",c?.role==="manager"&&"Qun l",c?.role==="staff"&&"Nhn vin"]})]}),d.jsx("button",{onClick:()=>f(),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",children:d.jsx(ey,{size:20})})]})]})}),d.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 z-10 lg:hidden transition-opacity ${a?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>u(!1)}),d.jsx("aside",{className:`fixed top-16 left-0 bottom-0 w-64 bg-white border-r border-gray-200 z-10 transition-transform lg:translate-x-0 ${a?"translate-x-0":"-translate-x-full"}`,children:d.jsx("nav",{className:"p-4 space-y-1",children:oy.map(g=>d.jsxs("button",{onClick:()=>{s(g.id),u(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${r===g.id?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[g.icon,d.jsx("span",{children:g.label})]},g.id))})}),d.jsx("main",{className:"lg:ml-64 pt-16",children:d.jsx("div",{className:"p-6",children:i})})]})}function zd(){const[i,r]=Y.useState({totalProducts:0,lowStockProducts:0,totalSales:0,totalPurchases:0,totalCustomers:0,totalSuppliers:0,customerDebts:0,supplierDebts:0,recentSales:[],recentPurchases:[]}),[s,a]=Y.useState(!0);Y.useEffect(()=>{u()},[]);const u=async()=>{try{const[f,g,p,y,w,k,j,T,R,C]=await Promise.all([Z.from("products").select("id",{count:"exact",head:!0}),Z.from("products").select("id",{count:"exact",head:!0}).lt("stock_quantity",Z.rpc("min_stock_level")),Z.from("sales_orders").select("total_amount, paid_amount").eq("status","completed"),Z.from("purchase_orders").select("total_amount, paid_amount").eq("status","completed"),Z.from("customers").select("id",{count:"exact",head:!0}),Z.from("suppliers").select("id",{count:"exact",head:!0}),Z.from("customers").select("debt_balance"),Z.from("suppliers").select("debt_balance"),Z.from("sales_orders").select("order_number, order_date, total_amount, paid_amount, customers(name)").order("created_at",{ascending:!1}).limit(5),Z.from("purchase_orders").select("order_number, order_date, total_amount, paid_amount, suppliers(name)").order("created_at",{ascending:!1}).limit(5)]),b=p.data?.reduce((q,ae)=>q+Number(ae.total_amount),0)||0,P=y.data?.reduce((q,ae)=>q+Number(ae.total_amount),0)||0,B=j.data?.reduce((q,ae)=>q+Number(ae.debt_balance),0)||0,z=T.data?.reduce((q,ae)=>q+Number(ae.debt_balance),0)||0;r({totalProducts:f.count||0,lowStockProducts:g.count||0,totalSales:b,totalPurchases:P,totalCustomers:w.count||0,totalSuppliers:k.count||0,customerDebts:B,supplierDebts:z,recentSales:R.data||[],recentPurchases:C.data||[]})}catch(f){console.error("Error loading stats:",f)}finally{a(!1)}},c=f=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(f);return s?d.jsx("div",{className:"text-center py-8",children:"ang ti..."}):d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Tng quan"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Tng sn phm"}),d.jsx("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:i.totalProducts})]}),d.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:d.jsx(ih,{className:"text-blue-600",size:24})})]})}),d.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Sp ht hng"}),d.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:i.lowStockProducts})]}),d.jsx("div",{className:"p-3 bg-orange-50 rounded-lg",children:d.jsx(Qg,{className:"text-orange-600",size:24})})]})}),d.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Khch hng"}),d.jsx("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:i.totalCustomers})]}),d.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:d.jsx(Ii,{className:"text-green-600",size:24})})]})}),d.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Doanh thu"}),d.jsx("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:c(i.totalSales)})]}),d.jsx("div",{className:"p-3 bg-emerald-50 rounded-lg",children:d.jsx(hl,{className:"text-emerald-600",size:24})})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:d.jsx(Yg,{className:"text-red-600",size:20})}),d.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Cng n khch hng"})]}),d.jsx("p",{className:"text-3xl font-bold text-red-600",children:c(i.customerDebts)})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"p-2 bg-yellow-50 rounded-lg",children:d.jsx(sh,{className:"text-yellow-600",size:20})}),d.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Cng n nh cung cp"})]}),d.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:c(i.supplierDebts)})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"n bn hng gn y"}),d.jsx("div",{className:"space-y-3",children:i.recentSales.length===0?d.jsx("p",{className:"text-gray-500 text-center py-4",children:"Cha c n hng no"}):i.recentSales.map(f=>d.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 pb-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-800",children:f.order_number}),d.jsx("p",{className:"text-sm text-gray-500",children:f.customers?.name||"Khch l"})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"font-semibold text-gray-800",children:c(f.total_amount)}),d.jsxs("p",{className:"text-sm text-gray-500",children:[" thu: ",c(f.paid_amount)]})]})]},f.order_number))})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"n nhp hng gn y"}),d.jsx("div",{className:"space-y-3",children:i.recentPurchases.length===0?d.jsx("p",{className:"text-gray-500 text-center py-4",children:"Cha c n nhp hng no"}):i.recentPurchases.map(f=>d.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 pb-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-800",children:f.order_number}),d.jsx("p",{className:"text-sm text-gray-500",children:f.suppliers?.name||"N/A"})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"font-semibold text-gray-800",children:c(f.total_amount)}),d.jsxs("p",{className:"text-sm text-gray-500",children:[" tr: ",c(f.paid_amount)]})]})]},f.order_number))})]})]})]})}function ly(){const[i,r]=Y.useState([]),[s,a]=Y.useState([]),[u,c]=Y.useState(!1),[f,g]=Y.useState(null),[p,y]=Y.useState(""),[w,k]=Y.useState({name:"",sku:"",category_id:"",description:"",unit:"ci",cost_price:0,selling_price:0,stock_quantity:0,min_stock_level:0}),{profile:j}=Jt(),T=j?.role==="admin"||j?.role==="manager";Y.useEffect(()=>{R(),C()},[]);const R=async()=>{const{data:I,error:J}=await Z.from("products").select("*, categories(name)").order("created_at",{ascending:!1});J?console.error("Error loading products:",J):r(I||[])},C=async()=>{const{data:I,error:J}=await Z.from("categories").select("*").order("name");J?console.error("Error loading categories:",J):a(I||[])},b=async I=>{if(I.preventDefault(),f){const{error:J}=await Z.from("products").update(w).eq("id",f.id);if(J){alert("Li cp nht sn phm: "+J.message);return}}else{const{error:J}=await Z.from("products").insert([w]);if(J){alert("Li thm sn phm: "+J.message);return}}c(!1),g(null),z(),R()},P=I=>{g(I),k({name:I.name,sku:I.sku,category_id:I.category_id,description:I.description,unit:I.unit,cost_price:I.cost_price,selling_price:I.selling_price,stock_quantity:I.stock_quantity,min_stock_level:I.min_stock_level}),c(!0)},B=async I=>{if(!confirm("Bn c chc mun xa sn phm ny?"))return;const{error:J}=await Z.from("products").delete().eq("id",I);J?alert("Li xa sn phm: "+J.message):R()},z=()=>{k({name:"",sku:"",category_id:"",description:"",unit:"ci",cost_price:0,selling_price:0,stock_quantity:0,min_stock_level:0})},q=i.filter(I=>I.name.toLowerCase().includes(p.toLowerCase())||I.sku.toLowerCase().includes(p.toLowerCase())),ae=I=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(I);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Qun l sn phm"}),T&&d.jsxs("button",{onClick:()=>{g(null),z(),c(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[d.jsx(wn,{size:20}),"Thm sn phm"]})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(ry,{className:"text-gray-400",size:20}),d.jsx("input",{type:"text",placeholder:"Tm kim sn phm...",value:p,onChange:I=>y(I.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{className:"overflow-x-auto",children:[d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"M SKU"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Tn sn phm"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Danh mc"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"n v"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Gi vn"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Gi bn"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Tn kho"}),T&&d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Thao tc"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:q.map(I=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:I.sku}),d.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:I.name}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:I.categories?.name||"-"}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:I.unit}),d.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-700",children:ae(I.cost_price)}),d.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-700",children:ae(I.selling_price)}),d.jsx("td",{className:`px-4 py-3 text-sm text-right font-medium ${I.stock_quantity<=I.min_stock_level?"text-red-600":"text-gray-700"}`,children:I.stock_quantity}),T&&d.jsx("td",{className:"px-4 py-3 text-right",children:d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{onClick:()=>P(I),className:"p-2 hover:bg-blue-50 text-blue-600 rounded-lg transition-colors",children:d.jsx(cl,{size:16})}),j?.role==="admin"&&d.jsx("button",{onClick:()=>B(I.id),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",children:d.jsx(dl,{size:16})})]})})]},I.id))})]}),q.length===0&&d.jsx("p",{className:"text-center text-gray-500 py-8",children:"Khng c sn phm no"})]})]}),u&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsx("div",{className:"p-6 border-b border-gray-200",children:d.jsx("h3",{className:"text-xl font-bold text-gray-800",children:f?"Cp nht sn phm":"Thm sn phm mi"})}),d.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tn sn phm"}),d.jsx("input",{type:"text",value:w.name,onChange:I=>k({...w,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M SKU"}),d.jsx("input",{type:"text",value:w.sku,onChange:I=>k({...w,sku:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Danh mc"}),d.jsxs("select",{value:w.category_id,onChange:I=>k({...w,category_id:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Chn danh mc"}),s.map(I=>d.jsx("option",{value:I.id,children:I.name},I.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"n v"}),d.jsx("input",{type:"text",value:w.unit,onChange:I=>k({...w,unit:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M t"}),d.jsx("textarea",{value:w.description,onChange:I=>k({...w,description:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gi vn (VND)"}),d.jsx("input",{type:"number",value:w.cost_price,onChange:I=>k({...w,cost_price:Number(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gi bn (VND)"}),d.jsx("input",{type:"number",value:w.selling_price,onChange:I=>k({...w,selling_price:Number(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S lng tn kho"}),d.jsx("input",{type:"number",value:w.stock_quantity,onChange:I=>k({...w,stock_quantity:Number(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mc tn kho ti thiu"}),d.jsx("input",{type:"number",value:w.min_stock_level,onChange:I=>k({...w,min_stock_level:Number(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{c(!1),g(null),z()},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:f?"Cp nht":"Thm mi"})]})]})]})})]})}function uy(){const[i,r]=Y.useState([]),[s,a]=Y.useState([]),[u,c]=Y.useState([]),[f,g]=Y.useState(!1),[p,y]=Y.useState({supplier_id:"",paid_amount:0,notes:""}),[w,k]=Y.useState([]),{profile:j}=Jt(),T=j?.role==="admin"||j?.role==="manager";Y.useEffect(()=>{R(),C(),b()},[]);const R=async()=>{const{data:A,error:ie}=await Z.from("purchase_orders").select("*, suppliers(name)").order("created_at",{ascending:!1});ie||r(A||[])},C=async()=>{const{data:A}=await Z.from("suppliers").select("id, name").order("name");a(A||[])},b=async()=>{const{data:A}=await Z.from("products").select("id, name, unit, cost_price").order("name");c(A||[])},P=()=>{k([...w,{product_id:"",quantity:1,unit_price:0}])},B=(A,ie,ue)=>{const de=[...w];if(de[A]={...de[A],[ie]:ue},ie==="product_id"){const je=u.find(ze=>ze.id===ue);je&&(de[A].unit_price=je.cost_price)}k(de)},z=A=>{k(w.filter((ie,ue)=>ue!==A))},q=()=>w.reduce((A,ie)=>A+ie.quantity*ie.unit_price,0),ae=async A=>{if(A.preventDefault(),w.length===0){alert("Vui lng thm t nht mt sn phm");return}const ie=`NH${Date.now()}`,ue=q(),{data:de,error:je}=await Z.from("purchase_orders").insert([{order_number:ie,supplier_id:p.supplier_id,total_amount:ue,paid_amount:p.paid_amount,status:"completed",notes:p.notes,created_by:j?.id}]).select().single();if(je){alert("Li to n nhp hng: "+je.message);return}const ze=w.map(le=>({purchase_order_id:de.id,product_id:le.product_id,quantity:le.quantity,unit_price:le.unit_price,total_price:le.quantity*le.unit_price})),{error:Ye}=await Z.from("purchase_order_items").insert(ze);if(Ye){alert("Li thm chi tit n hng: "+Ye.message);return}for(const le of w){const{data:pe}=await Z.from("products").select("stock_quantity").eq("id",le.product_id).single();pe&&await Z.from("products").update({stock_quantity:pe.stock_quantity+le.quantity}).eq("id",le.product_id)}if(p.supplier_id){const{data:le}=await Z.from("suppliers").select("debt_balance").eq("id",p.supplier_id).single();if(le){const pe=ue-p.paid_amount;await Z.from("suppliers").update({debt_balance:le.debt_balance+pe}).eq("id",p.supplier_id)}}g(!1),I(),R()},I=()=>{y({supplier_id:"",paid_amount:0,notes:""}),k([])},J=A=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(A),Se=A=>{const ie={pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},ue={pending:"Ch x l",completed:"Hon thnh",cancelled:" hy"};return d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ie[A]}`,children:ue[A]})};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Qun l nhp hng"}),T&&d.jsxs("button",{onClick:()=>{I(),g(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[d.jsx(wn,{size:20}),"To n nhp hng"]})]}),d.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"overflow-x-auto",children:[d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"M n"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Nh cung cp"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Ngy nhp"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Tng tin"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" tr"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Cn n"}),d.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Trng thi"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(A=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:A.order_number}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:A.suppliers?.name||"-"}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:new Date(A.order_date).toLocaleDateString("vi-VN")}),d.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-700",children:J(A.total_amount)}),d.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-700",children:J(A.paid_amount)}),d.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-red-600",children:J(A.total_amount-A.paid_amount)}),d.jsx("td",{className:"px-4 py-3 text-center",children:Se(A.status)})]},A.id))})]}),i.length===0&&d.jsx("p",{className:"text-center text-gray-500 py-8",children:"Cha c n nhp hng no"})]})}),f&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[d.jsx("div",{className:"p-6 border-b border-gray-200",children:d.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"To n nhp hng"})}),d.jsxs("form",{onSubmit:ae,className:"p-6 space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nh cung cp"}),d.jsxs("select",{value:p.supplier_id,onChange:A=>y({...p,supplier_id:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[d.jsx("option",{value:"",children:"Chn nh cung cp"}),s.map(A=>d.jsx("option",{value:A.id,children:A.name},A.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S tin  tr (VND)"}),d.jsx("input",{type:"number",value:p.paid_amount,onChange:A=>y({...p,paid_amount:Number(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ghi ch"}),d.jsx("textarea",{value:p.notes,onChange:A=>y({...p,notes:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sn phm"}),d.jsx("button",{type:"button",onClick:P,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"+ Thm sn phm"})]}),d.jsx("div",{className:"space-y-3",children:w.map((A,ie)=>d.jsxs("div",{className:"flex gap-3 items-start",children:[d.jsxs("select",{value:A.product_id,onChange:ue=>B(ie,"product_id",ue.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[d.jsx("option",{value:"",children:"Chn sn phm"}),u.map(ue=>d.jsxs("option",{value:ue.id,children:[ue.name," (",ue.unit,")"]},ue.id))]}),d.jsx("input",{type:"number",value:A.quantity,onChange:ue=>B(ie,"quantity",Number(ue.target.value)),placeholder:"S lng",className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),d.jsx("input",{type:"number",value:A.unit_price,onChange:ue=>B(ie,"unit_price",Number(ue.target.value)),placeholder:"n gi",className:"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),d.jsx("button",{type:"button",onClick:()=>z(ie),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:"Xa"})]},ie))})]}),w.length>0&&d.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:d.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[d.jsx("span",{children:"Tng cng:"}),d.jsx("span",{className:"text-blue-600",children:J(q())})]})}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{g(!1),I()},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"To n nhp hng"})]})]})]})})]})}function cy(){const[i,r]=Y.useState([]),[s,a]=Y.useState([]),[u,c]=Y.useState([]),[f,g]=Y.useState(!1),[p,y]=Y.useState({customer_id:"",paid_amount:0,discount:0,notes:""}),[w,k]=Y.useState([]),{profile:j}=Jt();Y.useEffect(()=>{T(),R(),C()},[]);const T=async()=>{const{data:A,error:ie}=await Z.from("sales_orders").select("*, customers(name)").order("created_at",{ascending:!1});ie||r(A||[])},R=async()=>{const{data:A}=await Z.from("customers").select("id, name").order("name");a(A||[])},C=async()=>{const{data:A}=await Z.from("products").select("id, name, unit, selling_price, stock_quantity").order("name");c(A||[])},b=()=>{k([...w,{product_id:"",quantity:1,unit_price:0}])},P=(A,ie,ue)=>{const de=[...w];if(de[A]={...de[A],[ie]:ue},ie==="product_id"){const je=u.find(ze=>ze.id===ue);je&&(de[A].unit_price=je.selling_price)}k(de)},B=A=>{k(w.filter((ie,ue)=>ue!==A))},z=()=>w.reduce((A,ie)=>A+ie.quantity*ie.unit_price,0),q=()=>z()-p.discount,ae=async A=>{if(A.preventDefault(),w.length===0){alert("Vui lng thm t nht mt sn phm");return}for(const le of w){const pe=u.find(F=>F.id===le.product_id);if(pe&&pe.stock_quantity<le.quantity){alert(`Khng  hng tn kho cho sn phm ${pe.name}`);return}}const ie=`BH${Date.now()}`,ue=q(),{data:de,error:je}=await Z.from("sales_orders").insert([{order_number:ie,customer_id:p.customer_id||null,total_amount:ue,paid_amount:p.paid_amount,discount:p.discount,status:"completed",notes:p.notes,created_by:j?.id}]).select().single();if(je){alert("Li to n bn hng: "+je.message);return}const ze=w.map(le=>({sales_order_id:de.id,product_id:le.product_id,quantity:le.quantity,unit_price:le.unit_price,total_price:le.quantity*le.unit_price})),{error:Ye}=await Z.from("sales_order_items").insert(ze);if(Ye){alert("Li thm chi tit n hng: "+Ye.message);return}for(const le of w){const{data:pe}=await Z.from("products").select("stock_quantity").eq("id",le.product_id).single();pe&&await Z.from("products").update({stock_quantity:pe.stock_quantity-le.quantity}).eq("id",le.product_id)}if(p.customer_id){const{data:le}=await Z.from("customers").select("debt_balance").eq("id",p.customer_id).single();if(le){const pe=ue-p.paid_amount;await Z.from("customers").update({debt_balance:le.debt_balance+pe}).eq("id",p.customer_id)}}g(!1),I(),T()},I=()=>{y({customer_id:"",paid_amount:0,discount:0,notes:""}),k([])},J=A=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(A),Se=A=>{const ie={pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},ue={pending:"Ch x l",completed:"Hon thnh",cancelled:" hy"};return d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ie[A]}`,children:ue[A]})};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Qun l bn hng"}),d.jsxs("button",{onClick:()=>{I(),g(!0)},className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:[d.jsx(wn,{size:20}),"To n bn hng"]})]}),d.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"overflow-x-auto",children:[d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"M n"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Khch hng"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Ngy bn"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Tng tin"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" thu"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Cn n"}),d.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Trng thi"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(A=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:A.order_number}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:A.customers?.name||"Khch l"}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:new Date(A.order_date).toLocaleDateString("vi-VN")}),d.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-700",children:J(A.total_amount)}),d.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-700",children:J(A.paid_amount)}),d.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-red-600",children:J(A.total_amount-A.paid_amount)}),d.jsx("td",{className:"px-4 py-3 text-center",children:Se(A.status)})]},A.id))})]}),i.length===0&&d.jsx("p",{className:"text-center text-gray-500 py-8",children:"Cha c n bn hng no"})]})}),f&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[d.jsx("div",{className:"p-6 border-b border-gray-200",children:d.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"To n bn hng"})}),d.jsxs("form",{onSubmit:ae,className:"p-6 space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Khch hng"}),d.jsxs("select",{value:p.customer_id,onChange:A=>y({...p,customer_id:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Khch l"}),s.map(A=>d.jsx("option",{value:A.id,children:A.name},A.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gim gi (VND)"}),d.jsx("input",{type:"number",value:p.discount,onChange:A=>y({...p,discount:Number(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S tin  thu (VND)"}),d.jsx("input",{type:"number",value:p.paid_amount,onChange:A=>y({...p,paid_amount:Number(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ghi ch"}),d.jsx("textarea",{value:p.notes,onChange:A=>y({...p,notes:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:2})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sn phm"}),d.jsx("button",{type:"button",onClick:b,className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"+ Thm sn phm"})]}),d.jsx("div",{className:"space-y-3",children:w.map((A,ie)=>{const ue=u.find(de=>de.id===A.product_id);return d.jsxs("div",{className:"flex gap-3 items-start",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("select",{value:A.product_id,onChange:de=>P(ie,"product_id",de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[d.jsx("option",{value:"",children:"Chn sn phm"}),u.map(de=>d.jsxs("option",{value:de.id,children:[de.name," (",de.unit,") - Tn: ",de.stock_quantity]},de.id))]}),ue&&A.quantity>ue.stock_quantity&&d.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Khng  hng tn kho"})]}),d.jsx("input",{type:"number",value:A.quantity,onChange:de=>P(ie,"quantity",Number(de.target.value)),placeholder:"S lng",className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,min:"0.01",step:"0.01"}),d.jsx("input",{type:"number",value:A.unit_price,onChange:de=>P(ie,"unit_price",Number(de.target.value)),placeholder:"n gi",className:"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0}),d.jsx("button",{type:"button",onClick:()=>B(ie),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:"Xa"})]},ie)})})]}),w.length>0&&d.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-gray-700",children:[d.jsx("span",{children:"Tm tnh:"}),d.jsx("span",{children:J(z())})]}),d.jsxs("div",{className:"flex justify-between text-gray-700",children:[d.jsx("span",{children:"Gim gi:"}),d.jsxs("span",{children:["-",J(p.discount)]})]}),d.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold border-t pt-2",children:[d.jsx("span",{children:"Tng cng:"}),d.jsx("span",{className:"text-green-600",children:J(q())})]})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{g(!1),I()},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:"To n bn hng"})]})]})]})})]})}function dy(){const[i,r]=Y.useState([]),[s,a]=Y.useState(!1),[u,c]=Y.useState(null),[f,g]=Y.useState({name:"",phone:"",email:"",address:""}),{profile:p}=Jt(),y=p?.role==="admin"||p?.role==="manager";Y.useEffect(()=>{w()},[]);const w=async()=>{const{data:b,error:P}=await Z.from("customers").select("*").order("created_at",{ascending:!1});P||r(b||[])},k=async b=>{if(b.preventDefault(),u){const{error:P}=await Z.from("customers").update(f).eq("id",u.id);if(P){alert("Li cp nht khch hng: "+P.message);return}}else{const{error:P}=await Z.from("customers").insert([f]);if(P){alert("Li thm khch hng: "+P.message);return}}a(!1),c(null),R(),w()},j=b=>{c(b),g({name:b.name,phone:b.phone,email:b.email,address:b.address}),a(!0)},T=async b=>{if(!confirm("Bn c chc mun xa khch hng ny?"))return;const{error:P}=await Z.from("customers").delete().eq("id",b);P?alert("Li xa khch hng: "+P.message):w()},R=()=>{g({name:"",phone:"",email:"",address:""})},C=b=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(b);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Qun l khch hng"}),d.jsxs("button",{onClick:()=>{c(null),R(),a(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[d.jsx(wn,{size:20}),"Thm khch hng"]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Tng khch hng"}),d.jsx("p",{className:"text-2xl font-bold text-gray-800",children:i.length})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Tng cng n"}),d.jsx("p",{className:"text-2xl font-bold text-red-600",children:C(i.reduce((b,P)=>b+P.debt_balance,0))})]})]}),d.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"overflow-x-auto",children:[d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Tn khch hng"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"S in thoi"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"a ch"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Cng n"}),y&&d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Thao tc"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(b=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:b.name}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:b.phone||"-"}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:b.email||"-"}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:b.address||"-"}),d.jsx("td",{className:`px-4 py-3 text-sm text-right font-medium ${b.debt_balance>0?"text-red-600":"text-gray-700"}`,children:C(b.debt_balance)}),y&&d.jsx("td",{className:"px-4 py-3 text-right",children:d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{onClick:()=>j(b),className:"p-2 hover:bg-blue-50 text-blue-600 rounded-lg transition-colors",children:d.jsx(cl,{size:16})}),p?.role==="admin"&&d.jsx("button",{onClick:()=>T(b.id),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",children:d.jsx(dl,{size:16})})]})})]},b.id))})]}),i.length===0&&d.jsx("p",{className:"text-center text-gray-500 py-8",children:"Cha c khch hng no"})]})}),s&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md",children:[d.jsx("div",{className:"p-6 border-b border-gray-200",children:d.jsx("h3",{className:"text-xl font-bold text-gray-800",children:u?"Cp nht khch hng":"Thm khch hng mi"})}),d.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tn khch hng"}),d.jsx("input",{type:"text",value:f.name,onChange:b=>g({...f,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S in thoi"}),d.jsx("input",{type:"tel",value:f.phone,onChange:b=>g({...f,phone:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),d.jsx("input",{type:"email",value:f.email,onChange:b=>g({...f,email:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"a ch"}),d.jsx("textarea",{value:f.address,onChange:b=>g({...f,address:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{a(!1),c(null),R()},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:u?"Cp nht":"Thm mi"})]})]})]})})]})}function hy(){const[i,r]=Y.useState([]),[s,a]=Y.useState(!1),[u,c]=Y.useState(null),[f,g]=Y.useState({name:"",contact_person:"",phone:"",email:"",address:""}),{profile:p}=Jt(),y=p?.role==="admin"||p?.role==="manager";Y.useEffect(()=>{w()},[]);const w=async()=>{const{data:b,error:P}=await Z.from("suppliers").select("*").order("created_at",{ascending:!1});P||r(b||[])},k=async b=>{if(b.preventDefault(),u){const{error:P}=await Z.from("suppliers").update(f).eq("id",u.id);if(P){alert("Li cp nht nh cung cp: "+P.message);return}}else{const{error:P}=await Z.from("suppliers").insert([f]);if(P){alert("Li thm nh cung cp: "+P.message);return}}a(!1),c(null),R(),w()},j=b=>{c(b),g({name:b.name,contact_person:b.contact_person,phone:b.phone,email:b.email,address:b.address}),a(!0)},T=async b=>{if(!confirm("Bn c chc mun xa nh cung cp ny?"))return;const{error:P}=await Z.from("suppliers").delete().eq("id",b);P?alert("Li xa nh cung cp: "+P.message):w()},R=()=>{g({name:"",contact_person:"",phone:"",email:"",address:""})},C=b=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(b);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Qun l nh cung cp"}),y&&d.jsxs("button",{onClick:()=>{c(null),R(),a(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[d.jsx(wn,{size:20}),"Thm nh cung cp"]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Tng nh cung cp"}),d.jsx("p",{className:"text-2xl font-bold text-gray-800",children:i.length})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Tng cng n"}),d.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:C(i.reduce((b,P)=>b+P.debt_balance,0))})]})]}),d.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"overflow-x-auto",children:[d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Tn cng ty"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Ngi lin h"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"S in thoi"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Cng n"}),y&&d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Thao tc"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(b=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:b.name}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:b.contact_person||"-"}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:b.phone||"-"}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:b.email||"-"}),d.jsx("td",{className:`px-4 py-3 text-sm text-right font-medium ${b.debt_balance>0?"text-yellow-600":"text-gray-700"}`,children:C(b.debt_balance)}),y&&d.jsx("td",{className:"px-4 py-3 text-right",children:d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{onClick:()=>j(b),className:"p-2 hover:bg-blue-50 text-blue-600 rounded-lg transition-colors",children:d.jsx(cl,{size:16})}),p?.role==="admin"&&d.jsx("button",{onClick:()=>T(b.id),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",children:d.jsx(dl,{size:16})})]})})]},b.id))})]}),i.length===0&&d.jsx("p",{className:"text-center text-gray-500 py-8",children:"Cha c nh cung cp no"})]})}),s&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md",children:[d.jsx("div",{className:"p-6 border-b border-gray-200",children:d.jsx("h3",{className:"text-xl font-bold text-gray-800",children:u?"Cp nht nh cung cp":"Thm nh cung cp mi"})}),d.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tn cng ty"}),d.jsx("input",{type:"text",value:f.name,onChange:b=>g({...f,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ngi lin h"}),d.jsx("input",{type:"text",value:f.contact_person,onChange:b=>g({...f,contact_person:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S in thoi"}),d.jsx("input",{type:"tel",value:f.phone,onChange:b=>g({...f,phone:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),d.jsx("input",{type:"email",value:f.email,onChange:b=>g({...f,email:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"a ch"}),d.jsx("textarea",{value:f.address,onChange:b=>g({...f,address:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{a(!1),c(null),R()},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:u?"Cp nht":"Thm mi"})]})]})]})})]})}function fy(){const[i,r]=Y.useState([]),[s,a]=Y.useState(!1),[u,c]=Y.useState({transaction_type:"income",category:"sales",amount:0,description:"",transaction_date:new Date().toISOString().split("T")[0]}),{profile:f}=Jt(),g=f?.role==="admin"||f?.role==="manager";Y.useEffect(()=>{p()},[]);const p=async()=>{const{data:C,error:b}=await Z.from("cash_transactions").select("*").order("transaction_date",{ascending:!1});b||r(C||[])},y=async C=>{C.preventDefault();const{error:b}=await Z.from("cash_transactions").insert([{...u,created_by:f?.id}]);if(b){alert("Li thm giao dch: "+b.message);return}a(!1),w(),p()},w=()=>{c({transaction_type:"income",category:"sales",amount:0,description:"",transaction_date:new Date().toISOString().split("T")[0]})},k=C=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(C),T=(()=>{const C=i.filter(P=>P.transaction_type==="income").reduce((P,B)=>P+B.amount,0),b=i.filter(P=>P.transaction_type==="expense").reduce((P,B)=>P+B.amount,0);return{income:C,expense:b,balance:C-b}})(),R=C=>({sales:"Bn hng",purchase:"Nhp hng",other:"Khc",salary:"Lng",rent:"Thu mt bng",utilities:"Tin ch",marketing:"Marketing"})[C]||C;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Qun l dng tin"}),g&&d.jsxs("button",{onClick:()=>{w(),a(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[d.jsx(wn,{size:20}),"Thm giao dch"]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:d.jsx(hl,{className:"text-green-600",size:20})}),d.jsx("p",{className:"text-sm text-gray-600",children:"Thu nhp"})]}),d.jsx("p",{className:"text-2xl font-bold text-green-600",children:k(T.income)})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:d.jsx(sy,{className:"text-red-600",size:20})}),d.jsx("p",{className:"text-sm text-gray-600",children:"Chi ph"})]}),d.jsx("p",{className:"text-2xl font-bold text-red-600",children:k(T.expense)})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsx("div",{className:"flex items-center gap-3 mb-2",children:d.jsx("p",{className:"text-sm text-gray-600",children:"S d"})}),d.jsx("p",{className:`text-2xl font-bold ${T.balance>=0?"text-blue-600":"text-red-600"}`,children:k(T.balance)})]})]}),d.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"overflow-x-auto",children:[d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Ngy"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Loi"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Danh mc"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"M t"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"S tin"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(C=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:new Date(C.transaction_date).toLocaleDateString("vi-VN")}),d.jsx("td",{className:"px-4 py-3 text-sm",children:d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.transaction_type==="income"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.transaction_type==="income"?"Thu":"Chi"})}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:R(C.category)}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:C.description||"-"}),d.jsxs("td",{className:`px-4 py-3 text-sm text-right font-medium ${C.transaction_type==="income"?"text-green-600":"text-red-600"}`,children:[C.transaction_type==="income"?"+":"-",k(C.amount)]})]},C.id))})]}),i.length===0&&d.jsx("p",{className:"text-center text-gray-500 py-8",children:"Cha c giao dch no"})]})}),s&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md",children:[d.jsx("div",{className:"p-6 border-b border-gray-200",children:d.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Thm giao dch mi"})}),d.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi giao dch"}),d.jsxs("select",{value:u.transaction_type,onChange:C=>c({...u,transaction_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"income",children:"Thu nhp"}),d.jsx("option",{value:"expense",children:"Chi ph"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Danh mc"}),d.jsx("select",{value:u.category,onChange:C=>c({...u,category:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:u.transaction_type==="income"?d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"sales",children:"Bn hng"}),d.jsx("option",{value:"other",children:"Khc"})]}):d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"purchase",children:"Nhp hng"}),d.jsx("option",{value:"salary",children:"Lng"}),d.jsx("option",{value:"rent",children:"Thu mt bng"}),d.jsx("option",{value:"utilities",children:"Tin ch"}),d.jsx("option",{value:"marketing",children:"Marketing"}),d.jsx("option",{value:"other",children:"Khc"})]})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S tin (VND)"}),d.jsx("input",{type:"number",value:u.amount,onChange:C=>c({...u,amount:Number(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ngy giao dch"}),d.jsx("input",{type:"date",value:u.transaction_date,onChange:C=>c({...u,transaction_date:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M t"}),d.jsx("textarea",{value:u.description,onChange:C=>c({...u,description:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{a(!1),w()},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Thm giao dch"})]})]})]})})]})}function py(){const[i,r]=Y.useState([]),[s,a]=Y.useState([]);Y.useEffect(()=>{u()},[]);const u=async()=>{const{data:p}=await Z.from("customers").select("id, name, phone, debt_balance").gt("debt_balance",0).order("debt_balance",{ascending:!1}),{data:y}=await Z.from("suppliers").select("id, name, phone, debt_balance").gt("debt_balance",0).order("debt_balance",{ascending:!1});r(p||[]),a(y||[])},c=p=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(p),f=i.reduce((p,y)=>p+y.debt_balance,0),g=s.reduce((p,y)=>p+y.debt_balance,0);return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Qun l cng n"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:d.jsx(Ii,{className:"text-red-600",size:20})}),d.jsx("p",{className:"text-sm text-gray-600",children:"Tng n khch hng"})]}),d.jsx("p",{className:"text-2xl font-bold text-red-600",children:c(f)}),d.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i.length," khch hng n"]})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"p-2 bg-yellow-50 rounded-lg",children:d.jsx(nl,{className:"text-yellow-600",size:20})}),d.jsx("p",{className:"text-sm text-gray-600",children:"Tng n nh cung cp"})]}),d.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:c(g)}),d.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s.length," nh cung cp n"]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[d.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[d.jsx(Ii,{size:20}),"Cng n khch hng"]}),d.jsxs("div",{className:"overflow-x-auto",children:[d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Khch hng"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"ST"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"S n"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(p=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:p.name}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:p.phone||"-"}),d.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-red-600",children:c(p.debt_balance)})]},p.id))})]}),i.length===0&&d.jsx("p",{className:"text-center text-gray-500 py-8",children:"Khng c khch hng n"})]})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[d.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[d.jsx(nl,{size:20}),"Cng n nh cung cp"]}),d.jsxs("div",{className:"overflow-x-auto",children:[d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Nh cung cp"}),d.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"ST"}),d.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"S n"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(p=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:p.name}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:p.phone||"-"}),d.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-yellow-600",children:c(p.debt_balance)})]},p.id))})]}),s.length===0&&d.jsx("p",{className:"text-center text-gray-500 py-8",children:"Khng c nh cung cp n"})]})]})]})]})}function my(){const{user:i,loading:r}=Jt(),[s,a]=Y.useState("dashboard");if(r)return d.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"ang ti..."})]})});if(!i)return d.jsx(Kg,{});const u=()=>{switch(s){case"dashboard":return d.jsx(zd,{});case"products":return d.jsx(ly,{});case"purchases":return d.jsx(uy,{});case"sales":return d.jsx(cy,{});case"customers":return d.jsx(dy,{});case"suppliers":return d.jsx(hy,{});case"cashflow":return d.jsx(fy,{});case"debts":return d.jsx(py,{});default:return d.jsx(zd,{})}};return d.jsx(ay,{currentPage:s,onNavigate:a,children:u()})}function gy(){return d.jsx(Hg,{children:d.jsx(my,{})})}dp.createRoot(document.getElementById("root")).render(d.jsx(Y.StrictMode,{children:d.jsx(gy,{})}));
